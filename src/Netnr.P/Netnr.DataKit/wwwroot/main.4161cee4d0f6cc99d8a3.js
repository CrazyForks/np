(()=>{"use strict";var __webpack_modules__={120:function(e,a,t){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.filetypeextension=a.filetypemime=a.filetypename=a.filetypeinfo=void 0;const o=n(t(715)),r=t(304),l=o.default();a.filetypeinfo=e=>{let a=l;for(const t of Object.keys(a.offset)){const a=r.fromHex(t);if(a>=e.length)continue;const n=l.offset[t],o=i(a,e,n);if(o.length>0)return o}return null===a.noOffset?[]:i(0,e,a.noOffset)};const i=(e,a,t)=>{let n=t,o=[];for(;;){const t=r.toHex(a[e]);if(n=n.bytes["?"]&&!n.bytes[t]?n.bytes["?"]:n.bytes[t],!n)return o;n&&n.matches&&(o=n.matches.slice(0)),e+=1}};a.default=a.filetypeinfo;a.filetypename=e=>a.filetypeinfo(e).map((e=>e.typename));a.filetypemime=e=>a.filetypeinfo(e).map((e=>e.mime?e.mime:""));a.filetypeextension=e=>a.filetypeinfo(e).map((e=>e.extension?e.extension:""))},715:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});const n=t(304),o=t(908);let r=new Map,l={noOffset:null,offset:{}};const i=(e,a,t,i)=>{if(r.set(e,a),i){const r=l.offset[n.toHex(i)];if(r){const s=o.merge(o.createNode(e,a.map((e=>e.toLowerCase())),t),{...r});l.offset[n.toHex(i)]=s}else l.offset[n.toHex(i)]=o.createComplexNode(e,a.map((e=>e.toLowerCase())),t)}else null===l.noOffset?l.noOffset=o.createComplexNode(e,a.map((e=>e.toLowerCase())),t):l.noOffset=o.merge(o.createNode(e,a.map((e=>e.toLowerCase())),t),l.noOffset)};i("gif",["0x47","0x49","0x46","0x38","0x37","0x61"],{mime:"image/gif",extension:"gif"}),i("gif",["0x47","0x49","0x46","0x38","0x39","0x61"],{mime:"image/gif",extension:"gif"}),i("jpg",["0xFF","0xD8","0xFF","0xDB"],{mime:"image/jpeg",extension:"jpeg"}),i("jpg",["0xFF","0xD8","0xFF","0xE0","?","?","0x4A","0x46","0x49","0x46","0x00","0x01"],{mime:"image/jpeg",extension:"jpeg"}),i("jpg",["0xFF","0xD8","0xFF","0xE1","?","?","0x45","0x78","0x69","0x66","0x00","0x00"],{mime:"image/jpeg",extension:"jpeg"}),i("webp",["0x52","0x49","0x46","0x46","?","?","?","?","0x57","0x45","0x42","0x50"],{mime:"image/webp",extension:"webp"}),i("heif",["0x66","0x74","0x79","0x70","0x6D","0x69","0x66","0x31"],{mime:"image/heif",extension:"heif"},4),i("heif",["0x66","0x74","0x79","0x70","0x68","0x65","0x69","0x63"],{mime:"image/heif",extension:"heic"},4),i("rpm",["0xed","0xab","0xee","0xdb"]),i("bin",["0x53","0x50","0x30","0x31"],{mime:"application/octet-stream",extension:"bin"}),i("pic",["0x00"]),i("pif",["0x00"]),i("sea",["0x00"]),i("ytr",["0x00"]),i("mp4",["0x66","0x74","0x79","0x70"],{mime:"video/mp4",extension:"mp4"},4),i("pdb",["0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00"]),i("dba",["0xBE","0xBA","0xFE","0xCA"]),i("dba2",["0x00","0x01","0x42","0x44"]),i("tda",["0x00","0x01","0x44","0x54"]),i("tda2",["0x00","0x01","0x00","0x00"]),i("ico",["0x00","0x00","0x01","0x00"],{mime:"image/x-icon",extension:"ico"}),i("3gp",["0x66","0x74","0x79","0x70","0x33","0x67"]),i("z",["0x1F","0x9D"]),i("tar.z",["0x1F","0xA0"]),i("bac",["0x42","0x41","0x43","0x4B","0x4D","0x49","0x4B","0x45","0x44","0x49","0x53","0x4B"]),i("bz2",["0x42","0x5A","0x68"],{mime:"application/x-bzip2",extension:"bz2"}),i("tif",["0x49","0x49","0x2A","0x00"],{mime:"image/tiff",extension:"tif"}),i("tiff",["0x4D","0x4D","0x00","0x2A"],{mime:"image/tiff",extension:"tiff"}),i("cr2",["0x49","0x49","0x2A","0x00","0x10","0x00","0x00","0x00","0x43","0x52"]),i("cin",["0x80","0x2A","0x5F","0xD7"]),i("cin1",["0x52","0x4E","0x43","0x01"]),i("cin2",["0x52","0x4E","0x43","0x02"]),i("dpx",["0x53","0x44","0x50","0x58"]),i("dpx2",["0x58","0x50","0x44","0x53"]),i("exr",["0x76","0x2F","0x31","0x01"]),i("bpg",["0x42","0x50","0x47","0xFB"]),i("ilbm",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x49","0x4C","0x42","0x4D"]),i("8svx",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x38","0x53","0x56","0x58"]),i("acbm",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x41","0x43","0x42","0x4D"]),i("anbm",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x41","0x4E","0x42","0x4D"]),i("anim",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x41","0x4E","0x49","0x4D"]),i("faxx",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x46","0x41","0x58","0x58"]),i("ftxt",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x46","0x54","0x58","0x54"]),i("smus",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x53","0x4D","0x55","0x53"]),i("cmus",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x43","0x4D","0x55","0x53"]),i("yuvn",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x59","0x55","0x56","0x4E"]),i("iff",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x46","0x41","0x4E","0x54"]),i("aiff",["0x46","0x4F","0x52","0x4D","?","?","?","?","0x41","0x49","0x46","0x46"],{mime:"audio/x-aiff",extension:"aiff"}),i("idx",["0x49","0x4E","0x44","0x58"]),i("lz",["0x4C","0x5A","0x49","0x50"]),i("exe",["0x4D","0x5A"]),i("zip",["0x50","0x4B","0x03","0x04"],{mime:"application/zip",extension:"zip"}),i("zip",["0x50","0x4B","0x05","0x06"],{mime:"application/zip",extension:"zip"}),i("zip",["0x50","0x4B","0x07","0x08"],{mime:"application/zip",extension:"zip"}),i("jar",["0x50","0x4B","0x03","0x04"],{mime:"application/java-archive",extension:"jar"}),i("jar",["0x50","0x4B","0x05","0x06"],{mime:"application/java-archive",extension:"jar"}),i("jar",["0x50","0x4B","0x07","0x08"],{mime:"application/java-archive",extension:"jar"}),i("odt",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.oasis.opendocument.text",extension:"odt"}),i("odt",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.oasis.opendocument.text",extension:"odt"}),i("odt",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.oasis.opendocument.text",extension:"odt"}),i("ods",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.oasis.opendocument.spreadsheet",extension:"ods"}),i("ods",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.oasis.opendocument.spreadsheet",extension:"ods"}),i("ods",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.oasis.opendocument.spreadsheet",extension:"ods"}),i("odp",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.oasis.opendocument.presentation",extension:"odp"}),i("odp",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.oasis.opendocument.presentation",extension:"odp"}),i("odp",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.oasis.opendocument.presentation",extension:"odp"}),i("docx",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",extension:"docx"}),i("docx",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",extension:"docx"}),i("docx",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",extension:"docx"}),i("xlsx",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",extension:"xlsx"}),i("xlsx",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",extension:"xlsx"}),i("xlsx",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",extension:"xlsx"}),i("pptx",["0x50","0x4B","0x03","0x04"],{mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation",extension:"pptx"}),i("pptx",["0x50","0x4B","0x05","0x06"],{mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation",extension:"pptx"}),i("pptx",["0x50","0x4B","0x07","0x08"],{mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation",extension:"pptx"}),i("vsdx",["0x50","0x4B","0x03","0x04"]),i("vsdx",["0x50","0x4B","0x05","0x06"]),i("vsdx",["0x50","0x4B","0x07","0x08"]),i("apk",["0x50","0x4B","0x03","0x04"]),i("apk",["0x50","0x4B","0x05","0x06"]),i("apk",["0x50","0x4B","0x07","0x08"]),i("aar",["0x50","0x4B","0x03","0x04"]),i("aar",["0x50","0x4B","0x05","0x06"]),i("aar",["0x50","0x4B","0x07","0x08"]),i("rar",["0x52","0x61","0x72","0x21","0x1A","0x07","0x00"],{mime:"application/vnd.rar",extension:"rar"}),i("rar",["0x52","0x61","0x72","0x21","0x1A","0x07","0x01","0x00"],{mime:"application/vnd.rar",extension:"rar"}),i("rar",["0x7F","0x45","0x4C","0x46"],{mime:"application/vnd.rar",extension:"rar"}),i("png",["0x89","0x50","0x4E","0x47","0x0D","0x0A","0x1A","0x0A"],{mime:"image/png",extension:"png"}),i("apng",["0x89","0x50","0x4E","0x47","0x0D","0x0A","0x1A","0x0A"],{mime:"image/apng",extension:"apng"}),i("class",["0xCA","0xFE","0xBA","0xBE"]),i("class",["0xEF","0xBB","0xBF"]),i("class",["0xFE","0xed","0xFA","0xCE"],void 0,4096),i("class",["0xFE","0xed","0xFA","0xCF"],void 0,4096),i("class",["0xCE","0xFA","0xed","0xFE"]),i("class",["0xCF","0xFA","0xed","0xFE"]),i("class",["0xFF","0xFE"]),i("class",["0xFF","0xFE"]),i("class",["0xFF","0xFE","0x00","0x00"]),i("ps",["0x25","0x21","0x50","0x53"]),i("pdf",["0x25","0x50","0x44","0x46"],{mime:"application/pdf",extension:"pdf"}),i("asf",["0x30","0x26","0xB2","0x75","0x8E","0x66","0xCF","0x11","0xA6","0xD9","0x00","0xAA","0x00","0x62","0xCE","0x6C"]),i("wma",["0x30","0x26","0xB2","0x75","0x8E","0x66","0xCF","0x11","0xA6","0xD9","0x00","0xAA","0x00","0x62","0xCE","0x6C"]),i("wmv",["0x30","0x26","0xB2","0x75","0x8E","0x66","0xCF","0x11","0xA6","0xD9","0x00","0xAA","0x00","0x62","0xCE","0x6C"]),i("deploymentimage",["0x24","0x53","0x44","0x49","0x30","0x30","0x30","0x31"]),i("ogg",["0x4F","0x67","0x67","0x53"],{mime:"audio/ogg",extension:"ogg"}),i("oga",["0x4F","0x67","0x67","0x53"],{mime:"audio/ogg",extension:"oga"}),i("ogv",["0x4F","0x67","0x67","0x53"],{mime:"video/ogg",extension:"ogv"}),i("psd",["0x38","0x42","0x50","0x53"],{mime:"application/x-photoshop",extension:"psd"}),i("wav",["0x52","0x49","0x46","0x46","?","?","?","?","0x57","0x41","0x56","0x45"],{mime:"audio/x-wav",extension:"wav"}),i("avi",["0x52","0x49","0x46","0x46","?","?","?","?","0x41","0x56","0x49","0x20"],{mime:"video/x-msvideo",extension:"avi"}),i("mp3",["0xFF","0xFB"],{mime:"audio/mpeg",extension:"mp3"}),i("mp3",["0x49","0x44","0x33"],{mime:"audio/mpeg",extension:"mp3"}),i("bmp",["0x42","0x4D"],{mime:"image/bmp",extension:"bmp"}),i("iso",["0x43","0x44","0x30","0x30","0x31"]),i("flac",["0x66","0x4C","0x61","0x43"]),i("mid",["0x4D","0x54","0x68","0x64"],{mime:"audio/midi",extension:"mid"}),i("midi",["0x4D","0x54","0x68","0x64"],{mime:"audio/midi",extension:"midi"}),i("doc",["0xD0","0xCF","0x11","0xE0","0xA1","0xB1","0x1A","0xE1"],{mime:"application/msword",extension:"doc"}),i("xls",["0xD0","0xCF","0x11","0xE0","0xA1","0xB1","0x1A","0xE1"],{mime:"application/vnd.ms-excel",extension:"xls"}),i("ppt",["0xD0","0xCF","0x11","0xE0","0xA1","0xB1","0x1A","0xE1"],{mime:"application/vnd.ms-powerpoint",extension:"ppt"}),i("msg",["0xD0","0xCF","0x11","0xE0","0xA1","0xB1","0x1A","0xE1"]),i("dex",["0x64","0x65","0x78","0x0A","0x30","0x33","0x35","0x00"]),i("vmdk",["0x4B","0x44","0x4D"]),i("crx",["0x43","0x72","0x32","0x34"]),i("fh8",["0x41","0x47","0x44","0x33"]),i("cwk",["0x05","0x07","0x00","0x00","0x42","0x4F","0x42","0x4F","0x05","0x07","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x01"]),i("cwk",["0x06","0x07","0xE1","0x00","0x42","0x4F","0x42","0x4F","0x06","0x07","0xE1","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x00","0x01"]),i("toast",["0x45","0x52","0x02","0x00","0x00","0x00"]),i("toast",["0x8B","0x45","0x52","0x02","0x00","0x00","0x00"]),i("dmg",["0x78","0x01","0x73","0x0D","0x62","0x62","0x60"]),i("xar",["0x78","0x61","0x72","0x21"]),i("dat",["0x50","0x4D","0x4F","0x43","0x43","0x4D","0x4F","0x43"]),i("nes",["0x4E","0x45","0x53","0x1A"]),i("tar",["0x75","0x73","0x74","0x61","0x72","0x00","0x30","0x30"],void 0,257),i("tar",["0x75","0x73","0x74","0x61","0x72","0x20","0x20","0x00"],void 0,257),i("tox",["0x74","0x6F","0x78","0x33"]),i("mlv",["0x4D","0x4C","0x56","0x49"]),i("windowsupdate",["0x44","0x43","0x4D","0x01","0x50","0x41","0x33","0x30"]),i("7z",["0x37","0x7A","0xBC","0xAF","0x27","0x1C"],{mime:"application/x-7z-compressed",extension:"7z"}),i("gz",["0x1F","0x8B"],{mime:"application/gzip",extension:"gz"}),i("tar.gz",["0x1F","0x8B"],{mime:"application/gzip",extension:"tar.gz"}),i("xz",["0xFD","0x37","0x7A","0x58","0x5A","0x00","0x00"],{mime:"application/gzip",extension:"xz"}),i("tar.xz",["0xFD","0x37","0x7A","0x58","0x5A","0x00","0x00"],{mime:"application/gzip",extension:"tar.xz"}),i("lz2",["0x04","0x22","0x4D","0x18"]),i("cab",["0x4D","0x53","0x43","0x46"]),i("mkv",["0x1A","0x45","0xDF","0xA3"]),i("mka",["0x1A","0x45","0xDF","0xA3"]),i("mks",["0x1A","0x45","0xDF","0xA3"]),i("mk3d",["0x1A","0x45","0xDF","0xA3"]),i("webm",["0x1A","0x45","0xDF","0xA3"],{mime:"audio/webm",extension:"webm"}),i("dcm",["0x44","0x49","0x43","0x4D"],void 0,128),i("xml",["0x3C","0x3f","0x78","0x6d","0x6C","0x20"],{mime:"application/xml",extension:"xml"}),i("wasm",["0x00","0x61","0x73","0x6d"]),i("lep",["0xCF","0x84","0x01"]),i("swf",["0x43","0x57","0x53"],{mime:"application/x-shockwave-flash",extension:"swf"}),i("swf",["0x46","0x57","0x53"],{mime:"application/x-shockwave-flash",extension:"swf"}),i("deb",["0x21","0x3C","0x61","0x72","0x63","0x68","0x3E"]),i("rtf",["0x7B","0x5C","0x72","0x74","0x66","0x31"],{mime:"application/rtf",extension:"rtf"}),i("m2p",["0x00","0x00","0x01","0xBA"]),i("vob",["0x00","0x00","0x01","0xBA"]),i("mpg",["0x00","0x00","0x01","0xBA"],{mime:"video/mpeg",extension:"mpg"}),i("mpeg",["0x00","0x00","0x01","0xBA"],{mime:"video/mpeg",extension:"mpeg"}),i("mpeg",["0x47"],{mime:"video/mpeg",extension:"mpeg"}),i("mpeg",["0x00","0x00","0x01","0xB3"],{mime:"video/mpeg",extension:"mpeg"}),i("hl2demo",["48","4C","32","44","45","4D","4F"]),a.default=()=>l},304:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.fromHex=a.toHex=void 0;const t=e=>new Number(e).toString(16).toLowerCase();a.toHex=e=>`0x${1===t(e).length?"0"+t(e):t(e)}`;a.fromHex=e=>new Number(e)},908:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createComplexNode=a.createNode=a.merge=void 0;const t=e=>({typename:e.typename,mime:e.info.mime,extension:e.info.extension}),n=e=>e[0],o=e=>e.slice(1,e.length);a.merge=(e,r)=>{if(0===e.bytes.length)return r;const l=n(e.bytes),i=o(e.bytes);if(((e,a)=>e&&0===a.length)(r.bytes[l],i)){const a=r.bytes[l];return r.bytes[l]={...a,matches:[...a.matches?a.matches:[],t(e)]},r}return r.bytes[l]?(r.bytes[l]=a.merge(a.createNode(e.typename,i,e.info),r.bytes[l]),r):(r.bytes[l]||(r.bytes[l]={...r.bytes[l],...a.createComplexNode(e.typename,i,e.info)}),r)};a.createNode=(e,a,t)=>({typename:e,bytes:a,info:t||{}});a.createComplexNode=(e,r,l)=>{let i={bytes:{},matches:void 0};const s=n(r),c=o(r);return 0===r.length?{matches:[t({typename:e,info:l?{extension:l.extension,mime:l.mime}:{}})],bytes:{}}:(i.bytes[s]=a.createComplexNode(e,c,l),i)}},484:(e,a,t)=>{t.d(a,{F:()=>l});var n=t(644),o=t(769),r=t(821),l={lk:()=>agGrid.LicenseManager.prototype.outputMissingLicenseKey=e=>{},defaultColDef:e=>Object.assign({width:150,minWidth:100,maxWidth:4e3,filter:!0,sortable:!0,resizable:!0,filter:"agMultiColumnFilter",menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"]},e),autoGroupColumnDef:e=>Object.assign({width:300,maxWidth:4e3},e),optionDef:e=>Object.assign({localeText:"zh-CN"==o.t.languageGet()?l.localeText:null,defaultColDef:l.defaultColDef(),getMainMenuItems:function(e){return e.defaultItems.unshift("separator"),e.defaultItems.unshift({name:o.t.lg.copyTitle,icon:r.p.iconGrid("copy"),action:()=>n.R.clipboard(e.column.getId())}),e.defaultItems},autoGroupColumnDef:l.autoGroupColumnDef(),suppressFieldDotNotation:!0,rowGroupPanelShow:"always",enableBrowserTooltips:!0,rowSelection:"multiple",suppressRowClickSelection:!0,enableRangeSelection:!0,autoSizePadding:40,headerHeight:32,pagination:!1,paginationPageSize:100,cacheBlockSize:100,suppressMoveWhenRowDragging:!0,animateRows:!0,popupParent:document.body,isRowSelectable:e=>!0!==e.group,onSortChanged:e=>e.api.refreshCells(),onFilterChanged:e=>e.api.refreshCells(),onRowGroupOpened:e=>e.api.refreshCells()},e),numberCol:e=>Object.assign({headerName:"🆔",valueGetter:"node.rowIndex + 1",width:120,maxWidth:150,checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,sortable:!1,filter:!1,menuTabs:!1},e),filterParamsDef:(e,a)=>{switch(e){case"Number":return{filters:[{filter:`ag${e}ColumnFilter`},{filter:"agSetColumnFilter"}]};case"Date":return{filters:[{filter:"agDateColumnFilter",filterParams:{comparator:function(e,a){if(null==a||""==a)return-1;var t=new Date(a);return t=new Date(Number(t.getFullYear()),Number(t.getMonth())-1,Number(t.getDate())),(e=new Date(Number(e.getFullYear()),Number(e.getMonth())-1,Number(e.getDate()))).getTime()==t.getTime()?0:t<e?-1:t>e?1:void 0}}},{filter:"agSetColumnFilter",filterParams:{comparator:(e,a)=>a}}]}}return a},getAllRows:function(e,a=!0){let t=[];return a?e.api.forEachLeafNode((e=>t.push(e.data))):e.api.forEachNode((e=>t.push(e.data))),t},getSelectedOrRangeRow:function(e){var a=e.api.getSelectedRows(),t=e.api.getCellRanges();return a.length>0?a[0]:t.length>0?e.api.getDisplayedRowAtIndex(t[0].startRow.rowIndex).data:void 0},getSelectedOrRangeRows:function(e){var a=e.api.getSelectedRows(),t=e.api.getCellRanges();if(t.length>0){var n=t[0].startRow.rowIndex,o=t[0].endRow.rowIndex;for(let t=n;t<=o;t++){var r=e.api.getDisplayedRowAtIndex(t).data;r&&a.push(r)}}return a},getContainer:e=>e.api.gridOptionsWrapper.environment.eGridDiv,setGridLoading:function(e,a){if(e&&e.api)switch(a){case 1:e.api.hideOverlay();break;case 2:e.api.hideOverlay(),e.api.showNoRowsOverlay();break;default:e.api.showLoadingOverlay()}},localeText:{selectAll:"（全部）",selectAllSearchResults:"（全部搜索结果）",searchOoo:"搜索...",blanks:"（空）",noMatches:"未找到",filterOoo:"搜索...",equals:"等于",notEqual:"不等于",blank:"空",notBlank:"非空",empty:"选择一项",lessThan:"小于",greaterThan:"大于",lessThanOrEqual:"小于等于",greaterThanOrEqual:"大于等于",inRange:"范围",inRangeStart:"开始值",inRangeEnd:"结束值",contains:"包含",notContains:"不包含",startsWith:"开始包含",endsWith:"结尾包含",dateFormatOoo:"yyyy-mm-dd",andCondition:"和",orCondition:"或",applyFilter:"确定",resetFilter:"重置",clearFilter:"清除",cancelFilter:"取消",textFilter:"文本搜索",numberFilter:"数字搜索",dateFilter:"日期搜索",setFilter:"项搜索",columns:"列",filters:"搜索",pivotMode:"枢轴模式",groups:"行组",rowGroupColumnsEmptyMessage:"拖拽列到此处进行分组",values:"值",valueColumnsEmptyMessage:"拖拽到此处合计",pivots:"列标签",pivotColumnsEmptyMessage:"拖拽到此处设置列标签",group:"分组",rowDragRows:"行",loadingOoo:"加载中...",noRowsToShow:"（空）",enabled:"启用",pinColumn:"固定列",pinLeft:"左固定",pinRight:"右固定",noPin:"取消固定",valueAggregation:"合计",autosizeThiscolumn:"当前列大小自适应",autosizeAllColumns:"所有列大小自适应",groupBy:"分组",ungroupBy:"不分组",addToValues:"添加值 ${variable}",removeFromValues:"移除值 ${variable}",addToLabels:"添加到标签 ${variable}",removeFromLabels:"移除标签 ${variable}",resetColumns:"重置列",expandAll:"展开全部",collapseAll:"折叠全部",copy:"复制",ctrlC:"Ctrl+C",copyWithHeaders:"复制（带标题）",copyWithHeaderGroups:"复制（带分组）",paste:"粘贴",ctrlV:"Ctrl+V",export:"内置保存",csvExport:"CSV 导出",excelExport:"Excel 导出",sum:"合计",min:"最小值",max:"最大值",none:"无",count:"选择行",avg:"平均值",filteredRows:"过滤行",selectedRows:"选中",totalRows:"总行",totalAndFilteredRows:"搜索",more:"更多",to:"-",of:"，总共",page:"当前",nextPage:"下一页",lastPage:"尾页",firstPage:"首页",previousPage:"上一页",pivotColumnGroupTotals:"总",pivotChartAndPivotMode:"图表枢轴 & 枢轴模式",pivotChart:"图表枢轴",chartRange:"范围图表",columnChart:"柱状图",groupedColumn:"分组",stackedColumn:"堆叠柱形图",normalizedColumn:"100% 堆叠柱形图",barChart:"条形图",groupedBar:"分组",stackedBar:"堆叠柱形图",normalizedBar:"100% 堆叠柱形图",pieChart:"饼形图",pie:"饼图",doughnut:"环形图",line:"线图",xyChart:"散点图及气泡图",scatter:"散点图",bubble:"气泡图",areaChart:"面积图",area:"面积",stackedArea:"叠堆",normalizedArea:"100% 叠堆",histogramChart:"直方图",pivotChartTitle:"图表枢轴",rangeChartTitle:"范围图表",settings:"设置",data:"数据",format:"格式",categories:"类别",defaultCategory:"(无)",series:"系数",xyValues:"X Y 值",paired:"配对模式",axis:"轴",navigator:"导航",color:"颜色",thickness:"坐标宽度",xType:"X Type",automatic:"Automatic",category:"类别",number:"数字",time:"时间",xRotation:"X 旋转",yRotation:"Y 旋转",ticks:"Ticks",width:"宽",height:"高",length:"长",padding:"填充",spacing:"间距",chart:"图表",title:"标题",titlePlaceholder:"图表标题 - 双击编辑",background:"背景",font:"字体",top:"上",right:"右",bottom:"下",left:"左",labels:"标签",size:"大小",minSize:"最小",maxSize:"最大",legend:"指标项",position:"位置",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"线条宽度",offset:"Offset",offsets:"Offsets",tooltips:"显示提示",callout:"Callout",markers:"标点",shadow:"阴影",blur:"发散",xOffset:"X 偏移",yOffset:"Y 偏移",lineWidth:"线条粗细",normal:"正常",bold:"加粗",italic:"斜体",boldItalic:"加粗斜体",predefined:"Predefined",fillOpacity:"填充透明度",strokeOpacity:"线条透明度",histogramBinCount:"Bin count",columnGroup:"柱状",barGroup:"条形",pieGroup:"饼状",lineGroup:"线",scatterGroup:"散点及气泡",areaGroup:"面积",histogramGroup:"直方",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart"}}},147:(e,a,t)=>{t.d(a,{x:()=>u});var n=t(213),o=t(372),r=t(178),l=t(821),i=t(513),s=t(3),c=t(384),p=t(769),d=t(334),m=t(644),u={actionRun:function(e,a){var t="object"==typeof a?a.getAttribute("data-val"):a;switch(e){case"theme":l.p.theme=t,u.themeSL(),u.themeGrid(),u.themeEditor(),o.U.stepSave();break;case"language":p.t.language=t,l.p.domMenu.querySelectorAll('[data-cmd="language"]').forEach((e=>{e.checked=e.getAttribute("data-val")==p.t.language})),"object"==typeof a&&(m.R.output(p.t.lg.reloadDone),o.U.stepSave());break;case"setting-manager":l.p.domDialogSetting.show(),l.p.domTextApiServer.value=l.p.apiServer;var b=[];for(const e in l.p.parameterConfig){const a=l.p.parameterConfig[e],t=p.t.lg[`parameterKey_${e}`];switch(a.type){case"number":b.push(`<div><sl-input name="${e}" label="${t}" type="${a.type}" required placeholder="${p.t.lg.default} ${a.defaultValue}" value="${a.value}"></sl-input></div>`);break;case"select":case"boolean":b.push(`<div><sl-select name="${e}" label="${t}" value="${a.value}" hoist="true">`),a.list.forEach((t=>{var n=p.t.lg[`parameterKey_${e}_${t.val}`.replace("-","_")],o=a.defaultValue==t.val?"class='nrc-item-default'":"";b.push(`<sl-menu-item ${o} value="${t.val}">${n}</sl-menu-item>`)})),b.push("</sl-select></div>")}}b.push(`<div><sl-button size="large" pill>${l.p.emoji.success}${p.t.lg.save}</sl-button></div>`),l.p.domParameterConfig.innerHTML=b.join(""),1!=l.p.domDialogSetting.getAttribute("event-bind")&&(l.p.domDialogSetting.setAttribute("event-bind",1),l.p.domTextApiServer.addEventListener("input",(function(){l.p.apiServer=this.value,o.U.stepSave()}),!1),l.p.domTextApiServer.addEventListener("blur",(function(){this.value.endsWith("/")&&(l.p.apiServer=this.value.substring(0,this.value.length-1),this.value=l.p.apiServer),o.U.stepSave()}),!1),l.p.domParameterConfig.addEventListener("click",(function(e){if("SL-BUTTON"==e.target.tagName){for(const e in l.p.parameterConfig){const a=l.p.parameterConfig[e];let t=l.p.domParameterConfig.querySelector(`[name="${e}"]`).value;"number"==a.type?t=parseInt(t):"boolean"==a.type&&(t="true"==t),a.value=t}o.U.stepSave(),m.R.output(p.t.lg.done)}}),!1));break;case"about":m.R.alert(`<div style="font-size:var(--sl-font-size-x-large)">${l.p.name} <sl-badge variant="warning">v${l.p.version}</sl-badge></div>\n<p><a href="https://github.com/netnr/np" target="_blank">https://github.com/netnr/np</a></p>\n<a href="https://zme.ink" target="_blank">Sponsors</a>`,p.t.lg.about,"25vw");break;case"set-api-server":l.p.domTextApiServer.value=l.p.apiServer=t,o.U.stepSave();break;case"config-export":case"config-export-clipboard":var g=[],h=[],f={date:m.R.now(),version:l.p.version};l.p.domConfigExportItems.querySelectorAll("sl-checkbox").forEach((e=>{if(e.checked){var a=e.getAttribute("data-val");g.push(a);var t=Object.values(s.$.keys).find((e=>e.key==a));h.push(s.$.instanceConfig.getItem(t.key))}})),Promise.all(h).then((a=>{for(var t=0;t<a.length;t++)f[g[t]]=a[t];u.safeConfig(f,"AESEncrypt").then((()=>{if(e.endsWith("clipboard")){var a=JSON.stringify(f,null,4);m.R.clipboard(a).then((()=>{m.R.output(p.t.lg.done),m.R.toast(p.t.lg.done)}))}else{a=JSON.stringify(f);m.R.download(a,"ndk.json")}}))}));break;case"config-import":case"config-import-clipboard":try{new Promise((t=>{e.endsWith("clipboard")?m.R.clipboard().then((e=>{t(e)})):t(a.previousElementSibling.value)})).then((e=>{if(""==e.trim())m.R.output(p.t.lg.contentNotEmpty);else{var a=JSON.parse(e),t=[];u.safeConfig(a,"AESDecrypt").then((()=>{var e=Object.keys(a);Object.values(s.$.keys).forEach((n=>{e.includes(n.key)&&t.push(s.$.instanceConfig.setItem(n.key,a[n.key]))})),Promise.all(t).then((()=>{m.R.output(p.t.lg.done),m.R.toast(p.t.lg.done),location.reload(!1)}))}))}}))}catch(e){console.debug(e),m.R.output(e)}break;case"new-query":switch(l.p.domTabGroupTree.activeTab.panel){case"tp1-conns":if(S=agg.getSelectedOrRangeRow(l.p.gridOpsConns)){var x=l.p.iconSvg("plug-fill",S.alias),v={cobj:S};r.W.tabBuildFast_sql(v,x)}else m.R.output(p.t.lg.selectDataRows);break;case"tp1-database":v=o.U.cpGet(1);if(S=agg.getSelectedOrRangeRow(l.p.gridOpsDatabase)){x=l.p.iconSvg("server",S.DatabaseName);v.databaseName=S.DatabaseName,r.W.tabBuildFast_sql(v,x)}else{S=v.cobj;x=l.p.iconSvg("plug-fill",S.alias);r.W.tabBuildFast_sql(v,x)}break;case"tp1-table":case"tp1-column":if((v=o.U.cpGet(1))&&v.cobj&&v.databaseName){x=l.p.iconSvg("server",v.databaseName);r.W.tabBuildFast_sql(v,x)}else m.R.output(p.t.lg.selectDataRows)}break;case"sql-execute-selected-or-all":var _=a.getAttribute("panel"),E=r.W.tabKeys[_];d.Y.editorSql(_);break;case"sql-formatting":_=a.getAttribute("panel"),E=r.W.tabKeys[_];n.C.formatter(E.editor);break;case"quick-generate-code":if(v=o.U.cpCurrent()){var S=v.cobj;r.W.tabBuild(10099,l.p.iconSvg("file-earmark-code",p.t.lg.generateCode),r.W.tabType.code).then((e=>{l.p.domTabGroupBody.show(e),o.U.cpSet(e,S),o.U.cpInfo(e)}))}break;case"quick-generate-faker":if(v=o.U.cpCurrent()){S=v.cobj;r.W.tabBuild(10098,l.p.iconSvg("box",p.t.lg.generateFaker),r.W.tabType.faker).then((e=>{l.p.domTabGroupBody.show(e),o.U.cpSet(e,S),o.U.cpInfo(e)}))}break;case"open-link":var y=document.createElement("a");y.href=t,y.target="_blank",y.click();break;case"sql-notes":_=a.getAttribute("panel"),v=o.U.cpGet(_);i.P.viewExecuteSql({Item1:{"sql-notes":c.A[v.cobj.type]}},_);break;case"sql-historys":_=a.getAttribute("panel"),v=o.U.cpGet(_);s.$.historysGet().then((e=>{i.P.viewExecuteSql({Item1:{"sql-historys":e}},_)}));break;case"view-cell-base64":var T=m.R.base64Detect(t),C="application/octet-stream",D="<sl-menu-item>未知</sl-menu-item>";T.length&&(C=T[0].mime,D=T.map((e=>null==e.mime?"":`<sl-menu-item value="${e.mime}">.${e.extension} → ${e.mime}</sl-menu-item>`)).join(""));var N=`\n<sl-button-group>\n    <sl-input class="view-cell-mime" placeholder="MIME-Type" value="${C}"></sl-input>\n    <sl-button class="view-cell-tofile" variant="warning">${p.t.lg.viewBase64ToFile}</sl-button>\n    <sl-dropdown>\n        <sl-button slot="trigger" caret variant="default">${p.t.lg.viewBase64Detect}</sl-button>\n        <sl-menu>${D}</sl-menu>\n    </sl-dropdown>\n</sl-button-group>\n<sl-button class="view-cell-decode" variant="warning">${p.t.lg.viewBase64Decode}</sl-button>\n<div class="view-cell-body" style="margin-top:1em;min-height:40vh"></div>`;m.R.alert(N,null,"full");var L=l.p.domAlert.querySelector(".view-cell-mime"),w=l.p.domAlert.querySelector(".view-cell-body"),A=l.p.domAlert.querySelector(".view-cell-tofile"),R=l.p.domAlert.querySelector(".view-cell-decode");l.p.domAlert.querySelector("sl-dropdown").addEventListener("sl-select",(e=>{const a=e.detail.item;L.value=a.value,A.click()})),A.addEventListener("click",(function(){var e=l.p.domAlert.querySelector(".view-cell-mime").value.trim();""==e&&(e="application/octet-stream");for(var a=window.atob(t),n=a.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=a.charCodeAt(r);var i,s=new Blob([o],{type:e});s.type.indexOf("image")>=0&&(i=document.createElement("img")),s.type.indexOf("audio")>=0&&((i=document.createElement("audio")).controls=!0),s.type.indexOf("video")>=0&&((i=document.createElement("video")).controls=!0),i?i.src=URL.createObjectURL(s):((i=document.createElement("a")).href=URL.createObjectURL(s),i.download="file.bin",i.innerHTML="下载"),i.style.maxWidth="100%",w.innerHTML="",w.appendChild(i)})),R.addEventListener("click",(function(){try{w.innerHTML="<sl-textarea></sl-textarea>",l.p.domAlert.querySelector("sl-textarea").value=window.atob(t)}catch(e){m.R.output(e)}}))}},themeSL:()=>{l.p.domMenu.querySelectorAll('sl-menu-item[data-cmd="theme"]').forEach((e=>{e.checked=e.getAttribute("data-val")==l.p.theme})),"dark"==l.p.themeGet()?document.documentElement.classList.add("sl-theme-dark"):document.documentElement.classList.remove("sl-theme-dark")},themeGrid:function(){var e=e=>{var a="ag-theme-balham",t="ag-theme-balham-dark";if(e.classList.remove(a),e.classList.remove(t),"dark"===l.p.themeGet())e.classList.add(t);else e.classList.add(a)};for(const t in l.p)if(t.startsWith("domGrid")){var a=l.p[t];e(a)}for(var t in l.p.domTabGroupBody.querySelectorAll(".nr-grid-execute-sql").forEach((a=>{e(a)})),r.W.tabKeys){var n=r.W.tabKeys[t];n.grids&&n.grids.forEach((a=>{var t=a.domGridExecuteSql;e(t)}))}},themeEditor:function(){if(window.monaco)if("dark"===l.p.themeGet())monaco.editor.setTheme("vs-dark");else monaco.editor.setTheme("vs")},setSpliterSize:(e,a="no")=>{var t=e.classList.contains("nrc-spliter-horizontal"),n=e.children;if("auto"==a)if(t&&n[3].clientWidth/e.clientWidth<.15)a="50%";else{if(t||!(n[3].clientHeight/e.clientHeight<.15))return!1;a="30%"}"yes"==a?a="30%":"no"==a&&(a="calc(100% - var(--nrc-spliter-width))"),t?(n[0].style.width=a,n[2].style.left=a,n[3].style.width=`calc(100% - var(--nrc-spliter-width) - ${a})`):(n[0].style.height=a,n[2].style.top=a,n[3].style.height=`calc(100% - var(--nrc-spliter-width) - ${a})`)},getSpliterSize:e=>e.classList.contains("nrc-spliter-horizontal")?(parseFloat(getComputedStyle(e.firstElementChild).width)/parseFloat(getComputedStyle(e).width)*100).toFixed(2)+"%":(parseFloat(getComputedStyle(e.firstElementChild).height)/parseFloat(getComputedStyle(e).height)*100).toFixed(2)+"%",safeConfig:(e,a)=>new Promise((t=>{let n=e[s.$.keys.keyConns.key]||[],o=0;n.forEach((e=>{m.R[a](e.conn,l.p.key).then((a=>{o++,e.conn=a})).catch((()=>{o++}))})),l.p.defer.safeConfig=setInterval((()=>{n.length==o&&(clearInterval(l.p.defer.safeConfig),t(e))}),100)})),size:function(){var e=document.documentElement.clientHeight;l.p.domSpliterBody.style.height=e-l.p.domSpliterBody.getBoundingClientRect().top-5+"px",["Conns","Database","Table","Column"].forEach((a=>{var t=l.p[`domGrid${a}`];if("none"!=getComputedStyle(t.parentElement).display){var n=t.getBoundingClientRect().top+5;t.style.height=e-n+"px"}})),l.p.domTabGroupBody.querySelectorAll(".nr-spliter-sql").forEach((a=>{var t=a.parentElement;if("none"!=getComputedStyle(t).display){var n=a.getBoundingClientRect().top+5;a.style.height=e-n+"px";var o=r.W.tabKeys[t.name];o&&o.grids&&o.grids.forEach((a=>{if("none"!=getComputedStyle(a.domTabPanel).display){var t=e-a.domGridExecuteSql.getBoundingClientRect().top-5+"px";if(a.domGridExecuteSql.style.height=t,!a.gridOps&&a.opsExecuteSql){var n=new agGrid.Grid(a.domGridExecuteSql,a.opsExecuteSql).gridOptions;a.domFilterExecuteSql.addEventListener("input",(function(){n.api.setQuickFilter(this.value)}),!1),a.gridOps=n}}}))}})),l.p.domTabGroupBody.querySelectorAll(".nr-spliter-code").forEach((a=>{var t=a.parentElement;if("none"!=getComputedStyle(t).display){var n=a.getBoundingClientRect().top+5;a.style.height=e-n+"px";var o=r.W.tabKeys[t.name];o.domEditor1.style.height=e-n-o.domTool1.clientHeight+"px",o.domEditor2.style.height=e-n-o.domTool2.clientHeight+"px"}}))}}},213:(e,a,t)=>{t.d(a,{C:()=>i});var n=t(821),o=t(769),r=t(178),l=(t(372),t(33)),i={init:e=>{if(e){for(var a,t={paths:{}},n=0;n<document.scripts.length;n++){var r=document.scripts[n];if(r.src.includes("monaco-editor")){a=r.src;break}}t.paths.vs=a.replace("/loader.js",""),"zh-CN"==o.t.languageGet()&&(t["vs/nls"]={availableLanguages:{"*":"zh-cn"}}),e.config(t),e(["vs/editor/editor.main"],(function(){i.extend()}))}else i.extend()},extend:()=>{monaco.languages.html.registerHTMLLanguageService("xml",{},{documentFormattingEdits:!0});["sql","mysql","pgsql"].forEach((e=>{monaco.languages.registerDocumentFormattingEditProvider(e,{provideDocumentFormattingEdits:function(e,a,t){var n=r.W.tabActiveCp();return[{text:i.formatterSQL(e.getValue(),n.cobj.type),range:e.getFullModelRange()}]}})})),monaco.languages.registerCompletionItemProvider("sql",{provideCompletionItems:async function(e,a){var t=r.W.tabActiveCp(),n=[],o=["add","add constraint","all","alter","alter column","alter table","and","any","as","asc","backup database","between","case","check","column","constraint","create","create database","create index","create or replace view","create table","create procedure","create unique index","create view","database","default","delete","desc","distinct","drop","drop column","drop constraint","drop database","drop default","drop index","drop table","drop view","exec","exists","foreign key","from","full outer join","group by","having","in","index","inner join","insert into","insert into select","is null","is not null","join","left join","like","limit","not","not null","offset","or","order by","outer join","primary key","procedure","right join","rownum","select","select distinct","select into","select top","set","table","top","truncate table","union","union all","unique","update","values","view","where"];if("Oracle"===t.cobj.type)o=o.concat(["dual","grant","revoke"]);o.map((e=>n.push({label:e,kind:monaco.languages.CompletionItemKind.Field,documentation:"common",insertText:e,range:c})));var i={avg:"avg(1)",count:"count(*)",max:"max(1)",min:"min(1)",sum:"sum(1)"};for(const e in i)n.push({label:e,kind:monaco.languages.CompletionItemKind.Function,documentation:"function",insertText:i[e],range:c});var s=e.getWordUntilPosition(a),c={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};if(t&&((await l.N.reqDatabaseName(t.cobj)).forEach((e=>{n.push({label:e.DatabaseName,kind:monaco.languages.CompletionItemKind.Text,documentation:"database",insertText:e.DatabaseName,range:c})})),t.databaseName)){var p=await l.N.reqTable(t.cobj,t.databaseName);p.forEach((e=>{var a=[];a.push(e.TableName),e.SchemaName&&t.databaseName!=e.SchemaName?a.push(`${t.databaseName}.${e.SchemaName}.${e.TableName}`):a.push(`${t.databaseName}.${e.TableName}`),a.map((e=>n.push({label:e,kind:monaco.languages.CompletionItemKind.Text,documentation:"table",insertText:e,range:c})))}));var d=p.map((e=>null==e.SchemaName?e.TableName:`${e.SchemaName}.${e.TableName}`)).join(","),m=await l.N.reqColumn(t.cobj,t.databaseName,d),u={};m.forEach((e=>{e.ColumnName in u||(u[e.ColumnName]=1,n.push({label:e.ColumnName,kind:monaco.languages.CompletionItemKind.Text,documentation:"column",insertText:e.ColumnName,range:c})),n.push({label:`(${e.TableName}).${e.ColumnName}`,kind:monaco.languages.CompletionItemKind.Text,documentation:"column",insertText:e.ColumnName,range:c})}))}return{suggestions:n}}})},config:e=>Object.assign({value:"",theme:"dark"==n.p.themeGet()?"vs-dark":"vs",fontSize:n.p.parameterConfig.editorFontSize.value,language:"sql",lineNumbers:n.p.parameterConfig.editorLineNumbers.value,wordWrap:n.p.parameterConfig.editorWordWrap.value,automaticLayout:!0,scrollbar:{verticalScrollbarSize:13,horizontalScrollbarSize:13},minimap:{enabled:!1}},e),create:(e,a)=>new Promise((t=>{t(monaco.editor.create(e,i.config(a)))})),formatter:e=>e.trigger("a","editor.action.formatDocument"),selectedValue:e=>e.getModel().getValueInRange(e.getSelection()),selectedOrAllValue:e=>{var a=i.selectedValue(e);return""==a.trim()&&(a=e.getValue()),a},keepSetValue:(e,a)=>{var t=e.getPosition();e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:a}]),e.setSelection(new monaco.Range(0,0,0,0)),e.setPosition(t)},formatterSQL:function(e,a){var t;switch(a){case"SQLite":case"MySQL":case"MariaDB":case"PostgreSQL":t=a.toLowerCase();break;case"Oracle":t="plsql";break;default:t="tsql"}return sqlFormatter.format(e,{language:t})},setLanguage:(e,a)=>{monaco.editor.setModelLanguage(e.getModel(),a)},fullScreen:function(e){e.addAction({id:"meid-fullscreen",label:o.t.lg.fullScreenSwitch,keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.KeyM],contextMenuGroupId:"me-01",run:function(e){e.getContainerDomNode().classList.toggle("nrc-fullscreen")}})},wordWrap:function(e){e.addAction({id:"meid-wordwrap",label:o.t.lg.wrapSwitch,keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.KeyN],contextMenuGroupId:"me-01",run:function(e){var a=e.getContainerDomNode(),t=a.getAttribute("wordWrap");null==t&&(t=e.getRawOptions().wordWrap),t="on"==t?"off":"on",a.setAttribute("wordWrap",t),e.updateOptions({wordWrap:t})}})},typeAsLanguage:function(e){var a;switch(e){case"MySQL":case"MariaDB":a="mysql";break;case"PostgreSQL":a="pgsql";break;default:a="sql"}return a}}},334:(e,a,t)=>{t.d(a,{Y:()=>c});var n=t(178),o=t(821),r=t(213),l=t(644),i=t(33),s=t(3),c={executeSql:(e,a,t)=>new Promise(((n,r)=>{var l=new FormData;l.append("tdb",e.type),l.append("conn",e.conn),l.append("sql",t),a&&l.append("databaseName",a),t.length<9999&&s.$.historysAdd(e.id,a,t),i.N.request(`${o.p.apiServer}${o.p.apiExecuteSql}`,{method:"POST",body:l}).then((e=>n(e.data))).catch((e=>r(e)))})),getDataCell:e=>Object.values(e.Item1.table1[0])[0],getDataTable:e=>e.Item1.table1,editorSql:e=>{var a=n.W.tabKeys[e],t=r.C.selectedOrAllValue(a.editor);if(""==t.trim())l.R.output(ndkI18n.lg.contentNotEmpty);else{var o=ndkStep.cpGet(e);c.executeSql(o.cobj,o.databaseName,t).then((a=>{ndkView.viewExecuteSql(a,e)}))}}}},644:(e,a,t)=>{t.d(a,{R:()=>r});var n=t(821),o=t(769),r={hump:e=>e.substring(0,1).toUpperCase()+e.substring(1),htmlEncode:e=>e.replace(/[\u00A0-\u9999<>\&]/g,(e=>"&#"+e.charCodeAt(0)+";")),htmlCull:e=>{var a=document.createElement("div");return a.innerHTML=e,a.innerText},cssvar:(e,a,t)=>{if(null==t)return getComputedStyle(e).getPropertyValue(a);e.style.setProperty(a,t)},type:function(e){return{}.toString.call(e).split(" ")[1].replace("]","")},arrayDistinct:e=>Array.from(new Set(e)),groupBy:(e,a)=>Array.from(new Set(e.map(a))),byteLength:e=>{var a=0;return Array.from(e).map((function(e){a+=e.charCodeAt(0)>255?2:1})),a},getFullPath:e=>{var a=e.includes("/")?"/":"\\";return e.substring(0,e.lastIndexOf(a)+1)},formatByteSize:function(e,a=2,t=1024){if(Math.abs(e)<t)return e+" B";const n=1e3==t?["KB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let o=-1;const r=10**a;do{e/=t,++o}while(Math.round(Math.abs(e)*r)/r>=t&&o<n.length-1);return(1*e.toFixed(a)).toString()+" "+n[o]},formatDateTime:(e,a)=>{a=a||Date.now();var t=Intl.DateTimeFormat().resolvedOptions(),n={hour12:!1,timeZone:t.timeZone};switch(e){case"date":n=Object.assign({year:"numeric",month:"2-digit",day:"2-digit"},n);break;case"time":n=Object.assign({hour:"numeric",minute:"2-digit",second:"2-digit"},n);break;case"year":return new Date(a).getFullYear();default:n=Object.assign({year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"2-digit",second:"2-digit"},n)}return new Intl.DateTimeFormat(t.locale,n).format(a)},now:()=>r.formatDateTime("datetime"),formatNull:()=>'<em style="color:var(--sl-color-neutral-400)">(Null)</em>',notify:(e,a)=>{if(window.Notification)if("granted"===Notification.permission){var t=new Notification(e,a);t.onclick=function(){window.focus(),t.close()}}else"denied"!==Notification.permission&&Notification.requestPermission((function(t){if("granted"===t){var n=new Notification(e,a);n.onclick=function(){window.focus(),n.close()}}}))},toast:function(e,a="primary",t="info-circle",n=8e3){const o=Object.assign(document.createElement("sl-alert"),{type:a,closable:!0,duration:n,innerHTML:`\n          <sl-icon name="${t}" slot="icon"></sl-icon>\n          ${e}\n        `});return document.body.append(o),o.toast()},alert:(e,a,t="60vw")=>{null==n.p.domAlert&&(n.p.domAlert=document.createElement("sl-dialog"),document.body.appendChild(n.p.domAlert),n.p.domAlert.addEventListener("click",(function(e){"primary"==e.target.getAttribute("variant")&&n.p.domAlert.hide()}),!1)),n.p.domAlert.label=a||"","full"==t&&(t="98vw"),n.p.domAlert.setAttribute("style",`--width:${t}`),n.p.domAlert.innerHTML=`${e}<sl-button slot="footer" variant="primary">${o.t.lg.close}</sl-button>`,n.p.domAlert.show()},output:e=>{n.p.domOutputBody.style.display="block",clearTimeout(n.p.defer.outputAutoHide),n.p.defer.outputAutoHide=setTimeout((()=>{n.p.domOutputBody.style.display="none"}),6e3);try{"string"!=typeof e&&(e=JSON.stringify(e))}catch(e){}var a=[{content:e}];n.p.gridOpsOutput.rowData.unshift(a[0]),n.p.gridOpsOutput.api.applyTransaction({addIndex:0,add:a});var t=n.p.gridOpsOutput.api.getDisplayedRowAtIndex(0);n.p.gridOpsOutput.api.flashCells({rowNodes:[t]})},markdownEncode:e=>(null!=e&&(e=e.toString().replace(/\n/g,"<br/>").replace(/\r/g,"").replace(/\[/g,"\\[").replace(/\(/g,"\\(")),e),rowsToMarkdown:(e,a,t)=>{null==a&&Object.keys(e[0]).forEach((e=>{a.push({headerName:a[e]||e,field:e})})),null==t&&(t={});var n=[];return e.forEach((e=>{var o=[];a.forEach((a=>{var n=e[a.field];null!=a.cellRenderer&&(n=a.cellRenderer({value:n,data:e})),n=r.markdownEncode(n),t.htmlCull&&(n=r.htmlCull(n)),o.push(n)})),n.push(`| ${o.join(" | ")} |`)})),`| ${a.map((e=>e.headerName)).join(" | ")} |\n| ${a.map((e=>"---")).join(" | ")} |\n${n.join("\n")}`},random:(e=2e4,a=99999)=>Math.floor(Math.random()*(a-e+1)+e),UUID:()=>window.crypto?crypto.randomUUID():URL.createObjectURL(new Blob([])).split("/").pop(),AESEncrypt:(e,a)=>new Promise(((t,n)=>{let o=(new TextEncoder).encode(a);window.crypto.subtle.digest("SHA-256",o).then((a=>{let o=window.crypto.getRandomValues(new Uint8Array(12)),r=Array.from(o).map((e=>String.fromCharCode(e))).join(""),l={name:"AES-GCM",iv:o};window.crypto.subtle.importKey("raw",a,l,!1,["encrypt"]).then((a=>{let o=(new TextEncoder).encode(e);window.crypto.subtle.encrypt(l,a,o).then((e=>{let a=Array.from(new Uint8Array(e)).map((e=>String.fromCharCode(e))).join(""),n=window.btoa(r+a);t(n)})).catch(n)})).catch(n)})).catch(n)})),AESDecrypt:(e,a)=>new Promise(((t,n)=>{let o=(new TextEncoder).encode(a);window.crypto.subtle.digest("SHA-256",o).then((a=>{let o=window.atob(e).slice(0,12),r={name:"AES-GCM",iv:new Uint8Array(Array.from(o).map((e=>e.charCodeAt(0))))};window.crypto.subtle.importKey("raw",a,r,!1,["decrypt"]).then((a=>{let o=window.atob(e).slice(12),l=new Uint8Array(Array.from(o).map((e=>e.charCodeAt(0))));window.crypto.subtle.decrypt(r,a,l).then((e=>{let a=(new TextDecoder).decode(e);t(a)})).catch(n)})).catch(n)})).catch(n)})),download:function(e,a){var t=document.createElement("a"),n=new Blob([e]);t.download=a,t.href=URL.createObjectURL(n),document.body.appendChild(t),t.click(),URL.revokeObjectURL(n),t.remove()},readFileContent:(e,a="utf-8")=>new Promise(((t,n)=>{var o=new FileReader;o.onload=function(e){t(e.target.result)},o.onerror=function(){n(o.error)},o.readAsText(e,a)})),base64Detect:e=>{try{for(var a=e.split(";base64,").pop(),t=window.atob(a),n=t.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=t.charCodeAt(r);return magicBytes.filetypeinfo(o)}catch(e){return[]}},clipboard:e=>new Promise(((a,t)=>{if(r.supportClipboard)null==e?navigator.clipboard.readText().then((e=>{a(e)})).catch((e=>{t(e)})):navigator.clipboard.writeText(e).then((e=>{a(e)})).catch((e=>{t(e)}));else if(null!=e){var n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity=0,document.body.appendChild(n),n.select(),document.execCommand("Copy"),n.remove(),a(e)}else t(o.t.lg.unsupported)})),supportClipboard:window.isSecureContext&&null!=navigator.clipboard}},722:(e,a,t)=>{t.d(a,{l:()=>i});var n=t(644),o=t(769),r=t(372),l=t(821),i={ref:{echoTableColumn:function(e){var a,t=[];if(l.p.gridOpsColumn&&(t=l.p.gridOpsColumn.api.getSelectedRows(),a=r.U.cpGet(1).cobj.type),0==t.length)return n.R.output(o.t.lg.selectColumn),o.t.lg.selectColumn;console.debug("allColumns",t),console.debug("ctype",a);let i=n.R.groupBy(t,(e=>null==e.SchemaName?e.TableName:`${e.SchemaName}.${e.TableName}`));i.forEach((n=>{let o=t.filter((e=>null==e.SchemaName?e.TableName==n:`${e.SchemaName}.${e.TableName}`==n)),r=o[0],l=n.split(".").pop();e(t,a,i,n,o,r,l,[])}))},csharp:{isNullable:["DateTime","DateTimeOffset","Guid","NpgsqlTypes.NpgsqlLSeg","NpgsqlTypes.NpgsqlLine","NpgsqlTypes.NpgsqlPath","NpgsqlTypes.NpgsqlPoint","TimeSpan","bool","byte","decimal","double","float","int","long"],SQLite:{integer:["int","Integer"],real:["double","Real"],text:["string","Text"],blob:["byte[]","Blob"]},MySQL:{bigint:["long","Int64"],binary:["byte[]","Binary"],bit:["ulong","Bit"],blob:["byte[]","Blob"],char:["string","VarChar"],date:["DateTime","Date"],datetime:["DateTime","DateTime"],decimal:["decimal","Decimal"],double:["double","Double"],float:["float","Float"],int:["int","Int32"],json:["string","JSON"],longblob:["byte[]","LongBlob"],longtext:["string","LongText"],mediumblob:["byte[]","MediumBlob"],mediumint:["int","Int32"],mediumtext:["string","MediumText"],text:["string","Text"],time:["DateTime","Time"],timestamp:["DateTime","Timestamp"],tinyblob:["byte[]","TinyBlob"],tinyint:["short","Int16"],tinytext:["string","TinyText"],varbinary:["byte[]","VarBinary"],varchar:["string","VarChar"],year:["string","Year"]},Oracle:{BFILE:["byte[]","BFile"],VARCHAR2:["string","Varchar2"],BINARY_DOUBLE:["double","BinaryDouble"],BINARY_FLOAT:["float","BinaryFloat"],BLOB:["byte[]","Blob"],CLOB:["string","Clob"],CHAR:["string","Char"],DATE:["DateTime","Date"],LONG:["Long","Long"],"LONG RAW":["byte[]","LongRaw"],NCLOB:["string","NClob"],NUMBER:["decimal","Decimal"],NVARCHAR2:["string","NVarchar2"],RAW:["byte[]","Raw"],"TIMESTAMP(6)":["DateTime","TimeStamp"],"INTERVAL DAY(2) TO SECOND(6)":["TimeSpan","IntervalDS"],"INTERVAL YEAR(2) TO MONTH":["string","IntervalYM"],"TIMESTAMP(6) WITH LOCAL TIME ZONE":["DateTimeOffset","TimeStampLTZ"],"TIMESTAMP(6) WITH TIME ZONE":["DateTimeOffset","TimeStampTZ"]},SQLServer:{bigint:["long","BigInt"],binary:["byte[]","Binary"],bit:["bool","Bit"],char:["string","Char"],date:["DateTime","Date"],datetime:["DateTime","DateTime"],datetime2:["DateTime","DateTime2"],datetimeoffset:["DateTimeOffset","DateTimeOffset"],decimal:["decimal","Decimal"],float:["double","Float"],image:["byte[]","Image"],int:["int","Int"],money:["decimal","Money"],nchar:["string","NChar"],ntext:["string","NText"],numeric:["decimal","Decimal"],nvarchar:["string","NVarChar"],real:["float","Real"],smalldatetime:["DateTime","SmallDateTime"],smallint:["short","SmallInt"],smallmoney:["decimal","SmallMoney"],sql_variant:["object","NVarChar"],text:["string","Text"],time:["TimeSpan","Time"],timestamp:["byte[]","Timestamp"],tinyint:["byte","TinyInt"],uniqueidentifier:["Guid","UniqueIdentifier"],varbinary:["byte[]","VarBinary"],varchar:["string","VarChar"],xml:["string","Xml"]},PostgreSQL:{bit:["System.Collections.BitArray","Bit"],bool:["bool","Boolean"],box:["NpgsqlTypes.NpgsqlBox","Box"],bytea:["byte[]","Bytea"],bpchar:["string","Varchar"],cidr:["ValueTuple<System.Net.IPAddress, int>","Cidr"],circle:["NpgsqlTypes.NpgsqlCircle","Circle"],date:["DateTime","Date"],numeric:["decimal","Numeric"],float4:["float","Double"],float8:["double","Double"],inet:["System.Net.IPAddress","Inet"],int2:["short","Integer"],int4:["int","Integer"],int8:["long","Bigint"],interval:["TimeSpan","Interval"],json:["string","Json"],jsonb:["string","Jsonb"],line:["NpgsqlTypes.NpgsqlLine","Line"],lseg:["NpgsqlTypes.NpgsqlLSeg","LSeg"],macaddr:["System.Net.NetworkInformation.PhysicalAddress","MacAddr"],money:["decimal","Money"],path:["NpgsqlTypes.NpgsqlPath","Path"],point:["NpgsqlTypes.NpgsqlPoint","Point"],text:["string","Text"],time:["TimeSpan","Time"],timestamp:["DateTime","Timestamp"],timestamptz:["DateTime","TimestampTz"],timetz:["TimeSpan","TimeTz"],tsquery:["NpgsqlTypes.NpgsqlTsQuery","TsQuery"],tsvector:["NpgsqlTypes.NpgsqlTsVector","TsVector"],txid_snapshot:["string","Varchar"],uuid:["Guid","Uuid"],varbit:["System.Collections.BitArray","Varbit"],varchar:["string","Varchar"],xml:["string","Xml"]}}},fns:[{language:"csharp",name:"Model",fn:()=>{let e=[],a="Netnr.Blog.Domain",t="Netnr.Blog.Domain",n=window.ndkGenerateCode.ref;return n.echoTableColumn(((o,r,l,i,s,c,p,d)=>{d.push("using System;"),d.push(""),d.push(`namespace ${t}`),d.push("{"),d.push("\t/// <summary>"),(c.TableComment||"").split("\n").forEach((e=>d.push(`\t/// ${e.trim()}`))),d.push("\t/// </summary>"),d.push(`\tpublic partial class ${p}`),d.push("\t{"),s.forEach((e=>{d.push("\t\t/// <summary>"),(e.ColumnComment||"").split("\n").forEach((e=>d.push(`\t\t/// ${e.trim()}`))),d.push("\t\t/// </summary>"),e.DataType="Oracle"==r?e.DataType.toUpperCase():e.DataType.toLowerCase();let a="object",t=n.csharp[r][e.DataType];t&&(a=t[0]),"Oracle"==r&&"decimal"==a&&0==e.DataScale&&(a="int"),1==e.IsNullable&&n.csharp.isNullable.includes(a)&&(a+="?"),d.push(`\t\tpublic ${a} ${e.ColumnName} { get; set; }`)})),d.push("\t}"),d.push("}"),e.push({name:`${p}.cs`,content:d.join("\r\n"),path:a})})),console.debug("fnout",e),e}},{language:"csharp",name:"DAL",fn:()=>{let e=[],a="Netnr.Blog.Application",t="Netnr.Blog.Application",n=window.ndkGenerateCode.ref;return n.echoTableColumn(((o,r,l,i,s,c,p,d)=>{switch(d.push("using System;"),d.push("using System.Data;"),r){case"MySQL":case"MariaDB":d.push("using MySql.Data.MySqlClient;");break;case"SQLite":d.push("using Microsoft.Data.Sqlite;");break;case"Oracle":d.push("using Oracle.ManagedDataAccess.Client;");break;case"SQLServer":d.push("using System.Data.SqlClient;");break;case"PostgreSQL":d.push("using Npgsql;"),d.push("using NpgsqlTypes;")}d.push(""),d.push(`namespace ${t}`),d.push("{"),d.push("\t/// <summary>"),(c.TableComment||"").split("\n").forEach((e=>d.push(`\t/// ${e.trim()}`))),d.push("\t/// </summary>"),d.push(`\tpublic partial class ${p}`),d.push("\t{"),d.push(`\t\tpublic ${p}() { }`),d.push("");let m={namespaceDomain:"Netnr.Blog.Domain",pprefix:"Oracle"==r?":":"@",fields:s.map((e=>e.ColumnName)),dbQuery:"DbHelper.SqlExecuteReader",dbExecute:"DbHelper.SqlExecuteNonQuery",dbParameterClass:"",dbParameterType:""};switch(r){case"MySQL":case"MariaDB":m.dbParameterType="MySqlDbType",m.dbParameterClass="MySqlParameter";break;case"SQLite":m.dbParameterType="SqliteType",m.dbParameterClass="SqliteParameter";break;case"Oracle":m.dbParameterType="OracleDbType",m.dbParameterClass="OracleParameter";break;case"SQLServer":m.dbParameterType="SqlDbType",m.dbParameterClass="SqlParameter";break;case"PostgreSQL":m.dbParameterType="NpgsqlDbType",m.dbParameterClass="NpgsqlParameter"}d.push("\t\t/// <summary>"),d.push("\t\t/// 查询"),d.push("\t\t/// </summary>"),d.push('\t\t/// <param name="whereSql">SQL条件，可选</param>'),d.push("\t\t/// <returns>返回数据集</returns>"),d.push("\t\tpublic DataSet Query(string whereSql = null)"),d.push("\t\t{"),d.push(`\t\t\tvar sql = "select * from ${i}";`),d.push("\t\t\tif (!string.IsNullOrWhiteSpace(whereSql))"),d.push("\t\t\t{"),d.push('\t\t\t\tsql += " where " + whereSql;'),d.push("\t\t\t}"),d.push(""),d.push(`\t\t\tvar ds = ${m.dbQuery}(sql);`),d.push("\t\t\treturn ds;"),d.push("\t\t}"),d.push(""),d.push("\t\t/// <summary>"),d.push("\t\t/// 删除"),d.push("\t\t/// </summary>"),d.push('\t\t/// <param name="whereSql">SQL条件</param>'),d.push("\t\t/// <returns>返回受影响行数</returns>"),d.push("\t\tpublic int Delete(string whereSql)"),d.push("\t\t{"),d.push(`\t\t\tvar sql = "delete from ${i} where " + whereSql;`),d.push(`\t\t\tvar num = ${m.dbExecute}(sql);`),d.push("\t\t\treturn num;"),d.push("\t\t}"),d.push(""),d.push("\t\t/// <summary>"),d.push("\t\t/// 新增"),d.push("\t\t/// </summary>"),d.push('\t\t/// <param name="model">新增实体对象</param>'),d.push("\t\t/// <returns>返回受影响行数</returns>"),d.push(`\t\tpublic int Add(${m.namespaceDomain}.${p} model)`),d.push("\t\t{"),d.push(`\t\t\tvar sql = @"insert into ${i} `),d.push(`\t\t\t\t\t\t(${m.fields.join(", ")}) values `),d.push(`\t\t\t\t\t\t(${m.pprefix+m.fields.join(", "+m.pprefix)})";`),d.push(""),d.push(`\t\t\t${m.dbParameterClass}[] parameters = {`),s.forEach((e=>{let a="";e.DataType="Oracle"==r?e.DataType.toUpperCase():e.DataType.toLowerCase();let t,o=n.csharp[r][e.DataType];o&&(a=o[1]),"Oracle"==r&&"Decimal"==a&&0==e.DataScale&&(a="Int32"),t=isNaN(parseInt(e.DataLength))||"Oracle"==r&&"lob"==a.slice(-3)?"":`, ${e.DataLength}`;let l=`new ${m.dbParameterClass}("${m.pprefix+e.ColumnName}", ${m.dbParameterType}.${a}${t})`;d.push(`\t\t\t\t${l},`)})),d.push("\t\t\t};"),d.push("");for(let e=0;e<s.length;e++){let a=s[e];d.push(`\t\t\tparameters[${e}].Value = model.${a.ColumnName};`)}d.push(""),d.push(`\t\t\tint num = ${m.insert}(sql, parameters);`),d.push("\t\t\treturn num;"),d.push("\t\t}"),d.push(""),d.push("\t\t/// <summary>"),d.push("\t\t/// 修改"),d.push("\t\t/// </summary>"),d.push('\t\t/// <param name="model">修改实体对象</param>'),d.push("\t\t/// <returns>返回受影响行数</returns>"),d.push(`\t\tpublic int Update(${m.namespaceDomain}.${p} model)`),d.push("\t\t{"),d.push(`\t\t\tvar sql = @"update ${i} set `);let u=[],b=[];s.forEach((e=>{let a=`${m.pprefix+e.ColumnName}=${m.pprefix+e.ColumnName}`;e.PrimaryKey>0?b.push(a):u.push(a)})),d.push(`\t\t\t\t\t\t${u.join(", ")} `),d.push(`\t\t\t\t\t\twhere ${b.join(" and ")}";`),d.push(""),d.push(`\t\t\t${m.dbParameterClass}[] parameters = {`),s.forEach((e=>{let a="";e.DataType="Oracle"==r?e.DataType.toUpperCase():e.DataType.toLowerCase();let t,o=n.csharp[r][e.DataType];o&&(a=o[1]),"Oracle"==r&&"Decimal"==a&&0==e.DataScale&&(a="Int32"),t=isNaN(parseInt(e.DataLength))||"Oracle"==r&&"lob"==a.slice(-3)?"":`, ${e.DataLength}`;let l=`new ${m.dbParameterClass}("${m.pprefix+e.ColumnName}", ${m.dbParameterType}.${a}${t})`;d.push(`\t\t\t\t${l},`)})),d.push("\t\t\t};"),d.push("");for(let e=0;e<s.length;e++){let a=s[e];d.push(`\t\t\tparameters[${e}].Value = model.${a.ColumnName};`)}switch(d.push(""),d.push(`\t\t\tint num = ${m.dbExecute}(sql, parameters);`),d.push("\t\t\treturn num;"),d.push("\t\t}"),d.push(""),d.push("\t\t/// <summary>"),d.push("\t\t/// 分页查询"),d.push("\t\t/// </summary>"),d.push('\t\t/// <param name="pageNumber">页码</param>'),d.push('\t\t/// <param name="pageSize">页量</param>'),d.push('\t\t/// <param name="whereSql">SQL条件</param>'),d.push('\t\t/// <param name="sortOrder">排序</param>'),d.push('\t\t/// <param name="total">返回总条数</param>'),d.push("\t\t/// <returns>返回数据表及总条数</returns>"),d.push("\t\tpublic DataTable Query(int pageNumber, int pageSize, string whereSql, string sortOrder, out int total)"),d.push("\t\t{"),d.push('\t\t\tsortOrder = string.IsNullOrWhiteSpace(sortOrder) ? "" : "ORDER BY " + sortOrder;'),"Oracle"!=r&&(d.push('\t\t\twhereSql = string.IsNullOrWhiteSpace(whereSql) ? "" : "WHERE " + whereSql;'),d.push("")),r){case"MySQL":case"MariaDB":d.push(`\t\t\tvar sql = $"SELECT * FROM ${i} {whereSql} {sortOrder} LIMIT {(pageNumber - 1) * pageSize}, {pageSize}";`),d.push(`\t\t\tsql += $";SELECT COUNT(1) AS TOTAL FROM ${i} {whereSql}";`);break;case"SQLite":case"PostgreSQL":d.push(`\t\t\tvar sql = $"SELECT * FROM ${i} {whereSql} {sortOrder} LIMIT {pageSize} OFFSET {(pageNumber - 1) * pageSize}";`),d.push(`\t\t\tsql += $";SELECT COUNT(1) AS TOTAL FROM ${i} {whereSql}";`);break;case"Oracle":d.push('\t\t\tvar ws1 = string.IsNullOrWhiteSpace(whereSql) ? "" : whereSql + " AND ";'),d.push('\t\t\tvar ws2 = string.IsNullOrWhiteSpace(whereSql) ? "" : "WHERE " + whereSql;'),d.push(""),d.push(`\t\t\tvar sql = $"SELECT * FROM ( SELECT ROWNUM AS rowno, a.* FROM ${i} a WHERE {ws1} ROWNUM <= {pageNumber * pageSize} {sortOrder} ) x WHERE x.rowno >= {(pageNumber - 1) * pageSize}";`),d.push(`\t\t\tsql += $";SELECT COUNT(1) AS TOTAL FROM ${i} {ws2}";`);break;case"SQLServer":d.push(`\t\t\tvar sql = $"SELECT TOP {rows} * FROM ( SELECT ROW_NUMBER() OVER( {sortOrder} ) AS numid, * FROM ${i} {whereSql} ) x WHERE numid > {(pageNumber - 1) * pageSize}";`),d.push(`\t\t\tsql += $";SELECT COUNT(1) AS TOTAL FROM ${i} {whereSql}";`)}d.push(""),d.push(`\t\t\tvar ds = ${m.dbQuery}(sql);`),d.push("\t\t\ttotal = Convert.ToInt32(ds.Table[1].Rows[0][0].ToString());"),d.push("\t\t\treturn ds.Table[0];"),d.push("\t\t}"),d.push(""),d.push("\t}"),d.push("}"),e.push({name:`${p}.cs`,content:d.join("\r\n"),path:a})})),console.debug("fnout",e),e}},{language:"java",name:"Model",fn:()=>{let e=[],a="Netnr.Blog.Domain";return window.ndkGenerateCode.ref.echoTableColumn(((t,n,o,r,l,i,s,c)=>{c.push("import javax.persistence.*;"),e.push({name:`${s}.cs`,content:c.join("\r\n"),path:a})})),console.debug("fnout",e),e}}]};i.ref.csharp.MariaDB=i.ref.csharp.MySQL,Object.assign(i.ref.csharp.SQLite,i.ref.csharp.SQLServer),i.fns.forEach((e=>{e.code=e.fn.toString().replace(/(_ndkFunction__WEBPACK_IMPORTED_MODULE_\d+__).ndkFunction./gm,"ndkFunction.").replace(/(_ndkI18n__WEBPACK_IMPORTED_MODULE_\d+__).ndkI18n./gm,"ndkI18n.").replace(/(_ndkStep__WEBPACK_IMPORTED_MODULE_\d+__).ndkStep./gm,"ndkStep.").replace(/(_ndkVary__WEBPACK_IMPORTED_MODULE_\d+__).ndkVary./gm,"ndkVary.")}))},408:(e,a,t)=>{t.d(a,{w:()=>i});var n=t(769),o=t(644),r=t(33),l=t(821),i={loopTable:(e,a,t,s,c,p)=>{let d=t[s].TableName,m=t[s].SchemaName||"",u=["SQLServer","PostgreSQL"].includes(e.type)?[m,d].filter((e=>""!=e)).join("."):d;o.R.output(`${u} ${s+1}/${t.length}`),r.N.reqTableDDL(e,a,m,d).then((r=>{var d=r.data,m="-- --------------------";l.p.generateDDL.push(`${m}`),l.p.generateDDL.push(`-- ${u}`),l.p.generateDDL.push(`${m}`),l.p.generateDDL.push(d),l.p.generateDDL.push(""),++s<t.length?i.loopTable(e,a,t,s,c,p):(o.R.output(n.t.lg.done),c())})).catch((e=>{p(e.msg)}))},reqDDL:(e,a,t)=>new Promise(((r,s)=>{switch(l.p.generateDDL=[],e.type){case"SQLite":l.p.generateDDL.push(`-- ${e.type}`),l.p.generateDDL.push(`-- ${e.conn}`),l.p.generateDDL.push(`-- Database: ${a}`),l.p.generateDDL.push(`-- Date: ${o.R.now()}`),l.p.generateDDL.push(""),l.p.generateDDL.push("PRAGMA foreign_keys = false;"),l.p.generateDDL.push(""),i.loopTable(e,a,t,0,(function(){l.p.generateDDL.push("PRAGMA foreign_keys = true;"),r(l.p.generateDDL.join("\r\n"))}),(function(e){s(e)}));break;case"MySQL":case"MariaDB":l.p.generateDDL.push(`-- ${e.type}`),l.p.generateDDL.push(`-- Database: ${a}`),l.p.generateDDL.push(`-- Date: ${o.R.now()}`),l.p.generateDDL.push(""),l.p.generateDDL.push("SET FOREIGN_KEY_CHECKS = 0;"),l.p.generateDDL.push(""),i.loopTable(e,a,t,0,(function(){l.p.generateDDL.push("SET FOREIGN_KEY_CHECKS = 1;"),r(l.p.generateDDL.join("\r\n"))}),(function(e){s(e)}));break;case"Oracle":case"SQLServer":case"PostgreSQL":l.p.generateDDL.push(`-- ${e.type}`),l.p.generateDDL.push(`-- Database: ${a}`),l.p.generateDDL.push(`-- Date: ${o.R.now()}`),l.p.generateDDL.push(""),i.loopTable(e,a,t,0,(function(){r(l.p.generateDDL.join("\r\n"))}),(function(e){s(e)}));break;default:s(n.t.lg.unsupported)}}))}},268:(e,a,t)=>{t.d(a,{A:()=>m});var n=t(408),o=t(644),r=t(769),l=t(372),i=t(178),s=t(821),c=t(33),p=t(334),d=t(484),m={sqlDataType:(e,a)=>{var t=(a.ColumnComment||"").trim().replace(/[\r\n]/g,"").replace(/\s+/g," "),n=a.DataLength>0?a.DataLength:999,r=t.replaceAll("'","''").substring(0,n),l={category:"string",comment:t,defaultValue:"''",mockValue:`'${r}'`};switch(a.DataType=a.DataType.toLowerCase(),a.DataType){case"int":case"bigint":case"tinyint":case"smallint":case"mediumint":case"decimal":case"float":case"double":case"number":case"int2":case"int4":case"int8":case"integer":case"serial":case"float4":case"float8":case"real":case"numeric":case"money":Object.assign(l,{category:"number",defaultValue:0,mockValue:0});break;case"date":case"datetime":case"timestamp":case"time":case"year":Object.assign(l,{category:"date",mockValue:`'${o.R.formatDateTime(a.DataType)}'`});break;case"bool":case"boolean":Object.assign(l,{category:"boolean",defaultValue:"false",mockValue:"false"})}switch(e){case"SQLite":["nvarchar","varchar","text"].includes(a.DataType)&&a.PrimaryKey>0&&(l.mockValue="hex(randomblob(16))");break;case"MySQL":case"MariaDB":["varchar"].includes(a.DataType)&&a.DataLength>=36&&a.PrimaryKey>0&&(l.mockValue="uuid()");break;case"Oracle":["varchar","varchar2"].includes(a.DataType)&&a.DataLength>=36&&a.PrimaryKey>0&&(l.mockValue="sys_guid()");break;case"SQLServer":["varchar","nvarchar"].includes(a.DataType)&&a.DataLength>=36&&a.PrimaryKey>0?l.mockValue="newid()":["nvarchar","nchar","ntext"].includes(a.DataType)&&(l.mockValue=`N'${r}'`);break;case"PostgreSQL":["varchar","varchar2"].includes(a.DataType)&&a.DataLength>=36&&a.PrimaryKey>0&&(l.mockValue="uuid_generate_v4()")}return l},sqlQuote:(e,a,t=!1)=>{if(0==t&&0==s.p.parameterConfig.buildSqlWithQuote.value)return a;switch(e){case"SQLite":case"SQLServer":return`[${a}]`;case"MySQL":case"MariaDB":return"`"+a+"`";case"Oracle":case"PostgreSQL":return`"${a}"`;default:return a}},sqlFullTableName:(e,a)=>{var t=[m.sqlQuote(e.cobj.type,e.databaseName)];return["MySQL","MariaDB"].includes(e.cobj.type)||null==a.SchemaName||""==a.SchemaName||t.push(m.sqlQuote(e.cobj.type,a.SchemaName)),t.push(m.sqlQuote(e.cobj.type,a.TableName)),t.join(".")},buildNewTabSql:e=>{var a=d.F.getSelectedOrRangeRows(s.p.gridOpsTable);if(a.length){var t,r=l.U.cpGet(1),p=s.p.iconSvg("table",a[0].TableName);t="DDL"==e?n.w.reqDDL(r.cobj,r.databaseName,a):new Promise((t=>{c.N.reqColumn(r.cobj,r.databaseName,a.map((e=>e.TableName)).join(","),!0).then((n=>{var l=[];o.R.groupBy(n,(e=>e.TableName)).forEach((t=>{var o=a.find((e=>e.TableName==t)),i=n.filter((e=>e.TableName==t)),s=m[`build${e}Sql`](r,o,i);l.push(s)})),l="Count"==e?l.join("\r\nUNION ALL\r\n"):l.join(";\r\n"),t(l)}))})),i.W.tabBuildFast_sql(r,p,t)}},buildSelectSql:(e,a,t)=>{var n=m.sqlFullTableName(e,a),o=[];if(t)return t.forEach((a=>o.push(m.sqlQuote(e.cobj.type,a.ColumnName)))),`SELECT ${o.join(", ")} FROM ${n}`;var r=s.p.parameterConfig.selectDataLimit.value;switch(e.cobj.type){case"SQLServer":return`SELECT TOP ${r} * FROM ${n}`;case"MySQL":case"MariaDB":return`SELECT * FROM ${n} LIMIT 0,${r}`;case"Oracle":return`SELECT * FROM ${n} WHERE ROWNUM <= ${r}`;case"SQLite":case"PostgreSQL":return`SELECT * FROM ${n} LIMIT ${r} OFFSET 0`}},buildInsertSql:(e,a,t)=>{var n=m.sqlFullTableName(e,a),o=[],r=[],l=s.p.parameterConfig.buildSqlWithComment.value;return t.forEach((a=>{o.push(m.sqlQuote(e.cobj.type,a.ColumnName));var t=m.sqlDataType(e.cobj.type,a);if(l){var n=`-- ${a.ColumnName}(${a.PrimaryKey>0?s.p.emoji.key+a.PrimaryKey+", ":""}${a.ColumnType}, ${1==a.IsNullable?"null":"not null"}) ${t.comment}`;r.push(`\n  ${n}\n  ${t.mockValue}`)}else r.push(`${t.mockValue}`)})),`INSERT INTO ${n}(${o.join(", ")}) VALUES (${r.join(", ")})`},buildUpdateSql:(e,a,t,n)=>{var o=m.sqlFullTableName(e,a),r=[],l=[],i=s.p.parameterConfig.buildSqlWithComment.value;t.forEach((a=>{var t,n=m.sqlQuote(e.cobj.type,a.ColumnName),o=m.sqlDataType(e.cobj.type,a);i?t=`\n  ${`-- ${a.ColumnName}(${a.PrimaryKey>0?s.p.emoji.key+a.PrimaryKey+", ":""}${a.ColumnType}, ${1==a.IsNullable?"null":"not null"}) ${o.comment}`}\n  ${n} = ${o.defaultValue}`:t=`${n} = ${o.defaultValue}`;a.PrimaryKey>0?l.push(t):r.push(t)})),0==l.length&&(l.push(r[0]),r=r.splice(0,1));var c=i?"\nWHERE":"WHERE";return`UPDATE ${o} SET ${r.join(", ")} ${c} ${l.join(" AND ")}`},buildDeleteSql:(e,a,t,n)=>{var o=m.sqlFullTableName(e,a),r=[],l=[];return t.forEach((a=>{var t=`${m.sqlQuote(e.cobj.type,a.ColumnName)} = ${m.sqlDataType(e.cobj.type,a).defaultValue}`;0==r.length&&r.push(t),a.PrimaryKey>0&&l.push(t)})),0==l.length&&(l=r),`DELETE FROM ${o} WHERE ${l.join(" AND ")}`},buildTruncateSql:(e,a)=>`TRUNCATE TABLE ${m.sqlFullTableName(e,a)}`,buildDropSql:(e,a)=>`DROP TABLE ${m.sqlFullTableName(e,a)}`,buildCountSql:(e,a)=>{var t=m.sqlFullTableName(e,a);return`SELECT '${a.TableName}' AS name, COUNT(*) AS total FROM ${t}`},buildDropDatabaseSql:(e,a)=>new Promise((t=>{var n=o.R.arrayDistinct(a.map((e=>e.DatabaseName))),r=o.R.arrayDistinct(a.filter((e=>null!=e.DatabaseSpace)).map((e=>e.DatabaseSpace))),l=[];switch(e.cobj.type){case"MySQL":case"MariaDB":n.forEach((e=>l.push(`drop database if exists ${e}`))),t(l.join(";\r\n"));break;case"Oracle":n.forEach((e=>l.push(`drop user "${e}" cascade;`))),r.length&&(l.push("\r\n-- drop tablespace 删除表空间（可选）"),r.forEach((e=>l.push(`-- drop tablespace "${e}" including contents and datafiles cascade constraint;`)))),t(l.join("\r\n"));break;case"SQLServer":l.push("USE master;"),n.forEach((e=>l.push(`alter database [${e}] set single_user with rollback immediate;\r\ndrop database [${e}];`))),t(l.join("\r\n\r\n"));break;case"PostgreSQL":p.Y.executeSql(e.cobj,null,"SELECT setting FROM pg_settings WHERE NAME = 'server_version'").then((e=>{parseFloat(p.Y.getDataCell(e))>=13?(n.forEach((e=>l.push(`drop database if exists "${e}" with (force);`))),r.length&&(l.push("\r\n-- drop tablespace 删除表空间（可选）"),r.forEach((e=>l.push(`-- drop tablespace if exists "${e}";`)))),t(l.join("\r\n"))):(n.forEach((e=>{l.push(`-- Disallow new connections 禁止新连接\nUPDATE pg_database SET datallowconn = 'false' WHERE datname = '${e}';\nalter database "${e}" connection limit 1;\n-- Terminate existing connections 终止现有连接\nSELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = '${e}';\n-- Drop database 删除库\ndrop database "${e}";`)})),r.length&&(l.push("\r\n-- drop tablespace 删除表空间（可选）"),r.forEach((e=>l.push(`-- drop tablespace if exists "${e}";`)))),t(l.join("\r\n\r\n")))}))}})),buildCreateDatabaseSql:async(e,a)=>{var t="Oracle"==e.cobj.type;a=Object.assign(a||{},{DatabaseName:t?"NEWDB":"newdb",DatabaseSpace:"NEWTS"});var n=[];switch(e.cobj.type){case"MySQL":case"MariaDB":Object.assign(a,{DatabaseCharset:"utf8mb4",DatabaseCollation:"utf8mb4_0900_ai_ci"}),n.push(`create database if not exists ${m.sqlQuote(e.cobj.type,a.DatabaseName)} character set ${m.sqlQuote(e.cobj.type,a.DatabaseCharset)} collate ${m.sqlQuote(e.cobj.type,a.DatabaseCollation)};`);break;case"Oracle":if(null==a.DatabasePath||""==a.DatabasePath){var r=await p.Y.executeSql(e.cobj,e.databaseName,"SELECT file_name FROM dba_data_files WHERE tablespace_name IN('SYSTEM','USERS') AND rownum=1");a.DatabasePath=p.Y.getDataCell(r)}var l=o.R.getFullPath(a.DatabasePath);a.DatabasePath=`${l}${a.DatabaseSpace}01.dbf`,n.push("-- create tablespace 创建表空间（起始大小 200M，每次 100M 自动增大，最大不限制）"),n.push(`create tablespace "${a.DatabaseSpace}" datafile '${a.DatabasePath}' size 200M autoextend on next 100M maxsize unlimited;`),n.push("-- create user 创建用户并指定表空间"),n.push(`create user "${a.DatabaseName}" identified by "NewPwd" default tablespace "${a.DatabaseSpace}";`),n.push("-- grant 授予权限（connect：基本；resource：开发；dba：管理）"),n.push(`grant connect, resource, dba to "${a.DatabaseName}"`);break;case"SQLServer":Object.assign(a,{DatabaseCollation:"Chinese_PRC_CI_AS"}),n.push(`use master;\ncreate database [${a.DatabaseName}] on primary\n(\n    name='${a.DatabaseName}', filename=N'/var/opt/mssql/data/${a.DatabaseName}.mdf',\n    size=20mb, filegrowth=10mb\n)\nlog on\n(\n    name='${a.DatabaseName}_log', filename=N'/var/opt/mssql/data/${a.DatabaseName}_log.ldf',\n    size=20mb, filegrowth=10mb\n)\ncollate ${a.DatabaseCollation}`)}return n.join("\r\n")},buildConnSeeSql:(e,a)=>{var t=[];switch(e.cobj.type){case"SQLite":switch(a){case"CharSet":t.push("PRAGMA encoding");break;case"Collation":t.push("-- https://www.sqlite.org/datatype3.html\nselect 'COLLATE BINARY' name, '二进制比较（默认）' description\nunion all\nselect 'COLLATE NOCASE', '转小写比较'\nunion all\nselect 'COLLATE RTRIM', '忽略末尾空格比较'");break;case"DataType":t.push("-- https://www.sqlite.org/datatype3.html\nselect 'NULL' name, 'NULL 值' description\nunion all\nselect 'INTEGER', '有符号整数，按大小被存储成1,2,3,4,6或8字节'\nunion all\nselect 'REAL', '浮点数，以8字节指数形式存储'\nunion all\nselect 'TEXT', '字符串，以数据库编码方式存储（UTF-8, UTF-16BE 或 UTF-16-LE）'\nunion all\nselect 'BLOB', 'BLOB 数据不做任何转换，以输入形式存储'")}break;case"MySQL":case"MariaDB":switch(a){case"Status":t.push("select * from performance_schema.session_status; -- show session status;\nselect * from performance_schema.global_status; -- show global status;");break;case"User":t.push("select * from mysql.user");break;case"Session":t.push("show full processlist\n-- show engine innodb status\n-- show open tables where In_use > 0");break;case"CharSet":t.push("show charset");break;case"Collation":t.push("show collation");break;case"DataType":t.push("SELECT DISTINCT DATA_TYPE FROM INFORMATION_SCHEMA.COLUMNS")}break;case"Oracle":switch(a){case"User":t.push("SELECT * FROM DBA_USERS");break;case"Role":t.push("SELECT * FROM DBA_ROLES");break;case"Session":t.push("SELECT SID,MACHINE,USERNAME,STATUS,OSUSER,PROGRAM,MODULE,SQL_EXEC_START,LOGON_TIME FROM V$SESSION WHERE TYPE = 'USER'");break;case"Lock":t.push("SELECT a.SESSION_ID,a.ORACLE_USERNAME,a.OS_USER_NAME,a.PROCESS,b.OWNER,b.OBJECT_NAME FROM V$LOCKED_OBJECT a,ALL_OBJECTS b WHERE a.OBJECT_ID = b.OBJECT_ID");break;case"TableSpace":t.push("SELECT * FROM DBA_DATA_FILES");break;case"Charset":t.push("SELECT VALUE, UTL_I18N.MAP_CHARSET(VALUE) AS IANA_VALUE\nFROM V$NLS_VALID_VALUES WHERE PARAMETER = 'CHARACTERSET' \nORDER BY IANA_VALUE, VALUE;");break;case"Collation":t.push("-- NLS_SORT、NLS_COMP 排序比较 BINARY/linguistic\nSELECT * FROM v$NLS_PARAMETERS WHERE PARAMETER IN('NLS_SORT', 'NLS_COMP');\n-- NLS_SORT=linguistic\nSELECT VALUE FROM V$NLS_VALID_VALUES WHERE PARAMETER = 'SORT' ORDER BY VALUE");break;case"DataType":t.push("SELECT TYPE_NAME FROM SYS.DBA_TYPES WHERE OWNER IS NULL ORDER BY TYPE_NAME")}break;case"SQLServer":switch(a){case"User":t.push("select * from sysusers");break;case"Role":t.push("select * from sysusers where issqlrole = 1");break;case"Session":t.push("exec sp_who");break;case"CharSet":case"Collation":t.push("select * from sys.fn_helpcollations()");break;case"DataType":t.push("-- select * from sys.systypes;\r\nselect * from sys.types")}break;case"PostgreSQL":switch(a){case"Role":t.push("select * from pg_catalog.pg_roles");break;case"Session":t.push("select * from pg_stat_activity");break;case"Lock":t.push("select pg_blocking_pids(pid) as blocked_by,* from pg_stat_activity where cardinality(pg_blocking_pids(pid)) > 0");break;case"CharSet":t.push("select distinct pg_encoding_to_char(conforencoding) from pg_catalog.pg_conversion order BY pg_encoding_to_char(conforencoding)");break;case"Collation":t.push("select * from pg_collation");break;case"DataType":t.push("-- select * from pg_type;\nSELECT pg_catalog.format_type(t.oid, NULL) AS name, pg_catalog.obj_description(t.oid, 'pg_type') as description\nFROM pg_catalog.pg_type t LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace\nWHERE (t.typrelid = 0 OR (SELECT c.relkind = 'c' FROM pg_catalog.pg_class c WHERE c.oid = t.typrelid))\n  AND NOT EXISTS(SELECT 1 FROM pg_catalog.pg_type el WHERE el.oid = t.typelem AND el.typarray = t.oid)\n  AND pg_catalog.pg_type_is_visible(t.oid)\nORDER BY 1, 2")}}return t.join("\r\n")},dataFullTableName:(e,a)=>{var t,n,o=a.BaseTableName;switch(e.cobj.type){case"SQLite":t=a.BaseCatalogName;break;case"MySQL":case"MariaDB":case"Oracle":t=a.BaseSchemaName;break;case"SQLServer":case"PostgreSQL":t=a.BaseCatalogName,n=a.BaseSchemaName}var r=[m.sqlQuote(e.cobj.type,t)];return null!=n&&r.push(m.sqlQuote(e.cobj.type,n)),r.push(m.sqlQuote(e.cobj.type,o)),console.debug(r),r.join(".")},dataNewSql:(e,a)=>{var t,n=d.F.getContainer(e),s=n.getAttribute("data-key"),c=i.W.tabKeys[s];if(c.esdata.Item2)for(var p=0;p<c.grids.length;p++){if(c.grids[p].domGridExecuteSql==n){t=c.esdata.Item2[Object.keys(c.esdata.Item2)[p]];break}}if(t){var u=l.U.cpGet(s),b=e.api.getSelectedRows();if(b.length){var g=m[`data${a}Sql`](u,b,t);o.R.clipboard(g).then((()=>{o.R.output("Done!")}))}else o.R.output(r.t.lg.selectDataRows)}else o.R.output(r.t.lg.unsupported)},dataInsertSql:(e,a,t)=>{var n=m.dataFullTableName(e,t[0]),o=[],r={};t.forEach((a=>{var t=a.DataTypeName;null==t&&(t=a.DataType.split(",")[0].split(".")[1].toLowerCase());var n={DataType:null==a.DataTypeName?t.replace(/\d+/g,""):a.DataTypeName,DataLength:a.ColumnSize,AutoIncrement:a.IsAutoIncrement,PrimaryKey:a.IsKey?1:0},o=m.sqlDataType(e.cobj.type,n);r[a.ColumnName]={sdt:o,column:n}}));var l=s.p.parameterConfig.dataSqlBulkInsert.value,i=[],c=[];(l<=1||"Oracle"==e.cobj.type)&&(l=1);var p=s.p.parameterConfig.dataSqlWithAutoIncrement.value;if(a.forEach((a=>{i=[];var t=[];for(var s in a){var d=m.sqlQuote(e.cobj.type,s),u=a[s];const{sdt:n,column:o}=r[s];0==p&&o.AutoIncrement||(i.push(d),null==u?t.push("null"):"number"==typeof u||["number","boolean"].includes(n.category)?t.push(u):"SQLServer"==e.cobj.type&&n.mockValue.startsWith("N'")?t.push(`N'${u.replaceAll("'","''")}'`):t.push(`'${u.replaceAll("'","''")}'`))}if(c.push(t),c.length>=l){var b=1==c.length?"":"\n";o.push(`INSERT INTO ${n} (${i.join(", ")}) VALUES ${b}${c.map((e=>`(${e.join(", ")})`)).join(",\n")}`),c=[]}})),c.length>0){var d=1==c.length?"":"\n";o.push(`INSERT INTO ${n} (${i.join(", ")}) VALUES ${d}${c.map((e=>`(${e.join(", ")})`)).join(",\n")}`)}return o.join(";\n")},dataUpdateSql:(e,a,t)=>{var n=m.dataFullTableName(e,t[0]),o=[],r={};return t.forEach((a=>{var t=a.DataTypeName;null==t&&(t=a.DataType.split(",")[0].split(".")[1].toLowerCase());var n={DataType:null==a.DataTypeName?t.replace(/\d+/g,""):a.DataTypeName,DataLength:a.ColumnSize,AutoIncrement:a.IsAutoIncrement,PrimaryKey:a.IsKey?1:0},o=m.sqlDataType(e.cobj.type,n);r[a.ColumnName]={sdt:o,column:n}})),a.forEach((a=>{var t=[],l=[];for(var i in a){var s,c=m.sqlQuote(e.cobj.type,i),p=a[i];const{sdt:n,column:o}=r[i];s=null==p?`${c} = null`:"number"==typeof p||["number","boolean"].includes(n.category)?`${c} = ${p}`:"SQLServer"==e.cobj.type&&n.mockValue.startsWith("N'")?`${c} = N'${p.replaceAll("'","''")}'`:`${c} = '${p.replaceAll("'","''")}'`,o.PrimaryKey>0?l.push(s):t.push(s)}0==l.length&&(l=t),o.push(`UPDATE ${n} SET ${t.join(", ")} WHERE ${l.join(" AND ")}`)})),o.join(";\n")},dataDeleteSql:(e,a,t)=>{var n=m.dataFullTableName(e,t[0]),o=[],r={};return t.forEach((a=>{var t=a.DataTypeName;null==t&&(t=a.DataType.split(",")[0].split(".")[1].toLowerCase());var n={DataType:null==a.DataTypeName?t.replace(/\d+/g,""):a.DataTypeName,DataLength:a.ColumnSize,PrimaryKey:a.IsKey?1:0},o=m.sqlDataType(e.cobj.type,n);r[a.ColumnName]={sdt:o,column:n}})),a.forEach((a=>{var t=[],l=[];for(var i in a){var s,c=m.sqlQuote(e.cobj.type,i),p=a[i];const{sdt:n,column:o}=r[i];s=null==p?`${c} = null`:"number"==typeof p||["number","boolean"].includes(n.category)?`${c} = ${p}`:"SQLServer"==e.cobj.type&&n.mockValue.startsWith("N'")?`${c} = 'N${p.replaceAll("'","''")}'`:`${c} = '${p.replaceAll("'","''")}'`,o.PrimaryKey>0?l.push(s):t.push(s)}0==l.length&&(l=t),o.push(`DELETE FROM ${n} WHERE ${l.join(" AND ")}`)})),o.join(";\n")}}},769:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>ndkI18n});var ndkI18n={language:"auto",resLanguage:[{key:"zh-CN",icon:"flag"},{key:"en-US",icon:"flag"},{key:"auto",icon:"flag"}],languageGet:()=>"auto"==ndkI18n.language?navigator.language in ndkI18n.languages?navigator.language:"en-US":ndkI18n.language,get:e=>ndkI18n.languages[ndkI18n.languageGet()][e]||e,lg:{},languages:{"zh-CN":{menu:"菜单",setting:"设置",quick:"快捷",note:"笔记",link:"链接",search:"搜索",export:"导出",import:"导入",exportData:"导出数据",importData:"导入数据",delete:"删除",refresh:"刷新",confirm:"确认",close:"关闭",cancel:"取消",save:"保存",default:"默认",current:"当前",about:"关于",version:"版本",notify:"通知",message:"消息",fullScreenSwitch:"全屏切换",wrapSwitch:"换行切换",createTime:"创建时间",updateTime:"更新时间",group:"分组",expandAll:"全部展开",collapseAll:"全部收起",generatingScript:"正在生成脚本",pleaseChoose:"请选择",run:"运行",debug:"调试",copyTitle:"复制标题",see:"查看",done:"已完成!",reloadDone:"刷新页面才能看到效果!",success:"成功!",contentNotEmpty:"内容不能为空!",selectAnItem:"请选择项!",selectConn:"请选择连接!",selectColumn:"请选择列!",selectDataRows:"请选择数据行!",inProgress:"正在进行中...",onlyTextFile:"只能是文本文件!",unsupported:"不支持!",copiedToClipboard:"已复制到剪贴板!",themeKey_light:"主题-浅色",themeKey_dark:"主题-深色",themeKey_auto:"主题-自动",languageKey_zh_CN:"简体中文",languageKey_en_US:"English",languageKey_auto:"语言-自动",setTitle:"设置",setServerTitle:"服务设置",setServerPlaceholder:"服务地址",setParameterConfigTitle:"参数设置",parameterKey_autoFilterDatabaseNumber:"数据库名超过自动过滤",parameterKey_selectDataLimit:"查询数据默认限制行数",parameterKey_buildSqlWithQuote:"生成 SQL 带符号",parameterKey_buildSqlWithQuote_true:"带符号",parameterKey_buildSqlWithQuote_false:"不带",parameterKey_buildSqlWithComment:"生成 SQL 带注释",parameterKey_buildSqlWithComment_true:"带注释",parameterKey_buildSqlWithComment_false:"不带",parameterKey_dataSqlBulkInsert:"数据 SQL 批量插入",parameterKey_dataSqlWithAutoIncrement:"数据 SQL 带自增列",parameterKey_dataSqlWithAutoIncrement_true:"带自增列",parameterKey_dataSqlWithAutoIncrement_false:"不带自增列",parameterKey_editorFontSize:"编辑器字体大小",parameterKey_editorLineNumbers:"编辑器行号",parameterKey_editorLineNumbers_on:"显示",parameterKey_editorLineNumbers_off:"不显示",parameterKey_editorWordWrap:"编辑器换行",parameterKey_editorWordWrap_on:"自动换行",parameterKey_editorWordWrap_off:"不换行",parameterKey_gridDataShowLength:"表格数据显示截断",parameterKey_maxSqlHistory:"SQL 历史记录",parameterKey_readFileEncoding:"读取文件编码",parameterKey_readFileEncoding_GBK:"GBK",parameterKey_readFileEncoding_utf_8:"utf-8",setExportTitle:"配置导入导出",setExportSave:"导出配置",setExportSaveClipboard:"导出配置（剪贴板）",setImportPlaceholder:"拖拽配置文件到此处 或 粘贴配置文件内容",setImportSave:"导入配置",setImportSaveClipboard:"导入配置（剪贴板）",storageKey_conns:"连接",storageKey_steps:"步骤",storageKey_errors:"错误",storageKey_notes:"笔记",storageKey_historys:"历史",dbEnvInfo:"环境信息",dbVarInfo:"变量信息",dbStatusInfo:"状态信息",dbDataType:"数据类型",dbUser:"用户",dbRole:"角色",dbSession:"会话",dbLock:"锁",dbView:"视图",dbIndex:"索引",dbTrigger:"触发器",dbParamsInfo:"参数信息",package:"包",generateCode:"生成代码",generateFaker:"生成假数据",tab1Conns:"连接",tab1Database:"库",tab1Table:"表",tab1Column:"列",connAlias:"连接名",connEnv:"环境",connGroup:"分组",connType:"类型",connOrder:"排序",connConnection:"连接字符串",connControl:"操作",newQuery:"新建查询",openConn:"打开连接",createConn:"新建连接",editConn:"编辑连接",copyConn:"复制连接",deleteConn:"删除连接",confirmDelete:"确认删除",databaseInfo:"数据库信息",dbName:"库名",dbOwner:"所有者",dbSpace:"表空间",dbCharSet:"字符集",dbCollation:"排序规则",dbDataSize:"数据大小",dbLogSize:"日志大小",dbIndexSize:"索引大小",dbDataPath:"库路径",dbLogPath:"日志路径",openDatabase:"打开库",createDatabase:"创建库 (SQL)",dropDatabase:"删除库 (SQL)",executeSqlFile:"执行 SQL 文件",tableName:"表名",tableComment:"表注释",tableRows:"行数",tableDataSize:"数据大小",tableIndexSize:"索引大小",tableCharSet:"字符集",tableCollation:"排序规则",schemaName:"模式",tableOwner:"所属",tableSpace:"空间",tableCatagory:"类别",tableDesign:"表设计",tableData:"表数据",tableGenerateSQL:"生成 SQL",columnName:"列名",columnComment:"列注释",columnTypeLength:"类型及长度",columnType:"类型",columnLength:"长度",columnScale:"精度",columnOrder:"列序",columnPrimary:"主键",columnAutoIncrement:"自增",columnDefault:"默认值",columnIsNullable:"必填",sqlButtonExecute:"执行选中或全部脚本",sqlButtonFormat:"格式化脚本",sqlButtonNote:"笔记",sqlButtonHistory:"执行 SQL 历史记录",dataGenerateSQL:"复制为 SQL",viewBase64ToFile:"转文件",viewBase64Decode:"转文本",viewBase64Detect:"检测 MIME"},"en-US":{menu:"Menu",setting:"Setting",quick:"Quick",note:"Note",link:"Link",search:"Search",export:"Export",import:"Import",exportData:"Export Data",importData:"Import Data",delete:"Delete",refresh:"Refresh",confirm:"Confirm",close:"Close",cancel:"Cancel",save:"Save",default:"Default",current:"Current",about:"About",version:"Version",notify:"Notify",message:"Message",fullScreenSwitch:"Full Screen Switch",wrapSwitch:"Wrap Switch",createTime:"Create Time",updateTime:"Update Time",group:"Group",expandAll:"Expand All",collapseAll:"Collapse All",generatingScript:"Generating Script",pleaseChoose:"Please Choose",run:"Run",debug:"Debug",copyTitle:"Copy Title",see:"See",done:"Done!",reloadDone:"Reload page to see the effect!",success:"Success!",contentNotEmpty:"Content can not be empty!",selectAnItem:"Select an item!",selectConn:"Please select connection!",selectColumn:"Please select column!",selectDataRows:"Select data rows!",inProgress:"In progress...",onlyTextFile:"Only text file!",unsupported:"Unsupported!",copiedToClipboard:"Copied to clipboard!",themeKey_light:"Theme Light",themeKey_dark:"Theme Dark",themeKey_auto:"Theme Auto",languageKey_zh_CN:"简体中文",languageKey_en_US:"English",languageKey_auto:"Language Auto",setTitle:"Setting",setServerTitle:"Server setting",setServerPlaceholder:"Server host",setParameterConfigTitle:"Parameter configuration",parameterKey_autoFilterDatabaseNumber:"Auto filter database number",parameterKey_selectDataLimit:"Select data default limit",parameterKey_buildSqlWithQuote:"Build SQL with quote",parameterKey_buildSqlWithQuote_true:"With quote",parameterKey_buildSqlWithQuote_false:"Without quote",parameterKey_buildSqlWithComment:"Build SQL with comment",parameterKey_buildSqlWithComment_true:"With comment",parameterKey_buildSqlWithComment_false:"Without comment",parameterKey_dataSqlBulkInsert:"Data SQL bulk insert",parameterKey_dataSqlWithAutoIncrement:"Data SQL with auto increment",parameterKey_dataSqlWithAutoIncrement_true:"With auto increment",parameterKey_dataSqlWithAutoIncrement_false:"Without auto increment",parameterKey_editorFontSize:"Editor font size",parameterKey_editorLineNumbers:"Editor line numbers",parameterKey_editorLineNumbers_on:"Show",parameterKey_editorLineNumbers_off:"Hide",parameterKey_editorWordWrap:"Editor word wrap",parameterKey_editorWordWrap_on:"Auto wrap",parameterKey_editorWordWrap_off:"No wrap",parameterKey_gridDataShowLength:"Grid data show length",parameterKey_maxSqlHistory:"Max SQL history",parameterKey_readFileEncoding:"Read file encoding",parameterKey_readFileEncoding_GBK:"GBK",parameterKey_readFileEncoding_utf_8:"utf-8",setExportTitle:"Configuration import and export",setExportSave:"Export configuration",setExportSaveClipboard:"Export configuration (clipboard)",setImportPlaceholder:"Paste configuration content",setImportSave:"Import configuration",setImportSaveClipboard:"Import configuration (clipboard)",storageKey_conns:"conns",storageKey_steps:"steps",storageKey_errors:"errors",storageKey_notes:"notes",storageKey_historys:"historys",dbEnvInfo:"Env Info",dbVarInfo:"Var Info",dbStatusInfo:"Status Info",dbDataType:"Type of data",dbUser:"User",dbRole:"Role",dbSession:"Session",dbLock:"Lock",dbView:"View",dbIndex:"Index",dbTrigger:"Trigger",dbParamsInfo:"Params Info",package:"Package",generateCode:"Generate Code",generateFaker:"Generate Faker",tab1Conns:"Connection",tab1Database:"Database",tab1Table:"Table",tab1Column:"Column",connAlias:"Alias",connEnv:"Env",connGroup:"Group",connType:"Type",connOrder:"Order",connConnection:"Connection String",connControl:"Control",newQuery:"New Query",openConn:"Open Conn",createConn:"Create Conn",editConn:"Edit Conn",copyConn:"Copy Conn",deleteConn:"Delete Conn",confirmDelete:"Confirm Delete",databaseInfo:"Database Info",dbName:"Database Name",dbOwner:"Owner",dbSpace:"Space",dbCharSet:"CharSet",dbCollation:"Collation",dbDataSize:"Data Size",dbLogSize:"Log Size",dbIndexSize:"Index Size",dbDataPath:"Data Path",dbLogPath:"Log Path",openDatabase:"Open Database",createDatabase:"Create Database (SQL)",dropDatabase:"Drop Database (SQL)",executeSqlFile:"Execute SQL File",tableName:"Table Name",tableComment:"Table Comment",tableRows:"Rows",tableDataSize:"Data Size",tableIndexSize:"Index Size",tableCharSet:"CharSet",tableCollation:"Collation",schemaName:"Schema",tableOwner:"Owner",tableSpace:"Space",tableCatagory:"Catagory",tableDesign:"Table Design",tableData:"Table Data",tableGenerateSQL:"Generate SQL",columnName:"Column Name",columnComment:"Column Comment",columnTypeLength:"Type and Length",columnType:"Type",columnLength:"Length",columnScale:"Scale",columnOrder:"Order",columnPrimary:"Primary Key",columnAutoIncrement:"Auto Increment",columnDefault:"Default",columnIsNullable:"Required",sqlButtonExecute:"Execute Selected or All Script",sqlButtonFormat:"Format Script",sqlButtonNote:"Note",sqlButtonHistory:"Execute SQL History",dataGenerateSQL:"Copy as SQL",viewBase64ToFile:"To File",viewBase64Decode:"Decode",viewBase64Detect:"Detect MIME"}}};let elang=[];for(const e in ndkI18n.languages["zh-CN"])elang.push(`get ${e}() { return ndkI18n.get('${e}') }`);eval(`ndkI18n.lg = {${elang.join(",")}}`)},384:(e,a,t)=>{t.d(a,{A:()=>n});var n={SQLite:[{group:"rely",name:"db-env-info",sql:"SELECT 'version' col, sqlite_version() val UNION ALL SELECT 'datetime' col, datetime() val UNION ALL SELECT 'ignore_case' col, 'a' = 'A' val;\nPRAGMA encoding",remark:"数据库环境信息"},{group:"default",name:"database-name",sql:"PRAGMA database_list",remark:"数据库名称"},{group:"default",name:"uuid",sql:"select hex(randomblob(16))",remark:"模拟 UUID"},{group:"default",name:"vacuum",sql:"VACUUM",remark:"磁盘空间释放"},{group:"default",name:"attach",sql:"attach database '/tmp/dbname.db' AS main2",remark:"附加数据库"},{group:"default",name:"info",sql:"select sqlite_version(); -- 版本\nPRAGMA encoding; -- 编码\n\nselect * from main.sqlite_master; -- 所有表信息、DDL\nPRAGMA table_info('SysButton'); -- 表信息\nselect cid, name, type, [notnull], quote(dflt_value) as dflt_value, pk from pragma_table_info('SysUser'); -- 表信息\n\nselect m.*, p.cid, p.name as colname, p.type as coltype, p.[notnull], quote(p.dflt_value) as dflt_value, p.pk\nfrom main.sqlite_master m left join pragma_table_info(m.name) p ON m.name<>p.name; -- 所有表信息\n",remark:"信息"},{group:"default",name:"daetime-function",sql:"select '日期时间' as name, datetime() as value\nunion all\nselect '日期', date()\nunion all\nselect '时间', time()\nunion all\nselect '+2 天', date('now','+2 day')\nunion all\nselect '-2 年', date('now','-2 year')\nunion all\nselect '格式化（yyyy MM dd）', strftime('%Y %m %d','now')\nunion all\nselect '格式化（HH mm ss fff)', strftime('%H %M %S %s','now')",remark:"时间函数"},{group:"default",name:"empty",sql:""}]};n.MySQL=n.MariaDB=[{group:"rely",name:"db-env-info",sql:"SELECT 'name' col, @@version_comment val\nUNION ALL\nSELECT 'version' col, @@version val\nUNION ALL\nSELECT 'compile' col, @@version_compile_machine val\nUNION ALL\nSELECT 'dir_install' col, @@basedir val\nUNION ALL\nSELECT 'dir_data' col, @@datadir val\nUNION ALL\nSELECT 'dir_temp' col, @@tmpdir val\nUNION ALL\nSELECT 'engine' col, @@default_storage_engine val\nUNION ALL\nSELECT 'charset' col, @@collation_server val\nUNION ALL\nSELECT 'time_zone' col, @@system_time_zone val\nUNION ALL\nSELECT 'max_conn' col, @@max_connections val\nUNION ALL\nSELECT 'curr_conn' col, count( 1 ) val FROM information_schema.PROCESSLIST WHERE USER != 'event_scheduler'\nUNION ALL\nSELECT 'datetime' col, now() AS val\nUNION ALL\nSELECT 'time_out' col, @@wait_timeout AS val\nUNION ALL\nSELECT 'ignore_case' col, 'a' = 'A' AS val\nUNION ALL\nSELECT 'system' col, @@version_compile_os val",remark:"数据库环境信息"},{group:"rely",name:"db-var-info",sql:"SELECT concat(VARIABLE_NAME, '=', VARIABLE_VALUE) AS params,\n  CASE VARIABLE_VALUE WHEN 'OFF' THEN 'SET GLOBAL local_infile = ON' END AS idea,\n  '是否允许加载本地数据，BulkCopy 需要开启，ON 开启，OFF 关闭' AS remark\nFROM performance_schema.session_variables WHERE VARIABLE_NAME = 'local_infile'\nUNION ALL\nSELECT concat(VARIABLE_NAME, '=', VARIABLE_VALUE) AS params,\n  CASE WHEN VARIABLE_VALUE < 600 THEN 'SET GLOBAL innodb_lock_wait_timeout = 600' END AS idea,\n  'innodb 的 dml 操作的行级锁的等待时间，事务等待获取资源等待的最长时间，BulkCopy 量大超时设置，单位：秒' AS remark\nFROM performance_schema.session_variables WHERE VARIABLE_NAME = 'innodb_lock_wait_timeout'\nUNION ALL\nSELECT concat(VARIABLE_NAME, '=', VARIABLE_VALUE) AS params,\n  CASE WHEN VARIABLE_VALUE != 1073741824 THEN 'SET GLOBAL max_allowed_packet = 1073741824' END AS idea,\n  '传输的 packet 大小限制，最大 1G，单位：B' AS remark\nFROM performance_schema.session_variables WHERE VARIABLE_NAME = 'max_allowed_packet'\nUNION ALL\nSELECT concat(VARIABLE_NAME, '=', VARIABLE_VALUE) AS params,\n  CASE WHEN VARIABLE_VALUE != 0 THEN concat('SET GLOBAL ', VARIABLE_NAME, ' = 0') END AS idea,\n  '缓存中统计信息过期时间，要直接从存储引擎获取统计信息，将其设置为 0，单位：秒；expiry 为 MySQL8' AS remark\nFROM performance_schema.session_variables WHERE VARIABLE_NAME IN ( 'information_schema_stats', 'information_schema_stats_expiry' )\nUNION ALL\nSELECT concat( t1.p1, '%, Innodb_buffer_pool_size: ', @@innodb_buffer_pool_size ) AS params,\n  concat('SET GLOBAL Innodb_buffer_pool_size = ', t1.p2) AS idea,\n  concat( '缓存索引和数据的内存大小，多多益善，内存读写减少磁盘读写，', '推荐设置 Innodb_buffer_pool_size 为服务器总可用内存的 75%, 过多造成浪费，', '计算 Innodb_buffer_pool_pages_data / Innodb_buffer_pool_pages_total * 100%，', '结果 > 95% 则增加 Innodb_buffer_pool_size，结果 < 95% 则减少 Innodb_buffer_pool_size' ) AS remark\nFROM ( SELECT\n    ROUND( ( SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_data' ) / ( SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_total' ) * 100, 0 ) p1,\n    ROUND( ( SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_data' ) * ( SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_page_size' ) * 1.05, 0 ) AS p2 ) t1\nUNION ALL\nSELECT concat(VARIABLE_NAME, '=', VARIABLE_VALUE) AS params,\n  'SET GLOBAL innodb_flush_log_at_trx_commit=1' AS idea,\n  '1 保证事务，等待磁盘写入；0 和  2 高性能缓存再写入，宕机可能丢失数据' AS remark\nFROM performance_schema.session_variables WHERE VARIABLE_NAME = 'innodb_flush_log_at_trx_commit';\n\nselect * from performance_schema.session_variables; -- show session variables;\nselect * from performance_schema.global_variables; -- show global variables;\n    ",remark:"数据库参数信息"},{group:"default",name:"database-name",sql:"SELECT SCHEMA_NAME AS DatabaseName FROM information_schema.schemata ORDER BY SCHEMA_NAME",remark:"数据库名称"},{group:"default",name:"uuid",sql:"select uuid()",remark:"生成 UUID"},{group:"default",name:"show-common",sql:"show databases; -- 显示数据库\nshow tables from information_schema; -- 显示当前数据库中所有表名称\nshow columns from information_schema.TABLES; -- 显示表中列名称\nshow table status; -- 显示表的信息\nshow index from information_schema.TABLES; -- 显示表索引\n\nshow grants for root; -- 显示用户权限\n\nshow status; -- 显示系统特定资源信息\nshow variables; -- 显示系统变量的名称和值\nshow variables like '%local_infile%'; -- 搜索\n\nshow processlist; -- 显示运行进程\n\nshow warnings; -- 显示最后的错误、警告和通知\nshow errors; -- 显示最后的错误\n\nshow slave status; -- 从状态\nshow master status; -- 主状态",remark:"show 常用命令"},{group:"default",name:"sleep",sql:"select sysdate(), sleep(1), sysdate()"},{group:"default",name:"datetime-function",sql:"select now(), sysdate(), sleep(1)\nunion all\nselect now(), sysdate(), 0; -- 当前日期时间，now 执行开始得到值 sysdate 实时获取\n\nselect concat('日期：',current_date(),' , 时间：',current_time()) '日期、时间' -- 日期、时间\nunion all\nselect concat('UTC日期：',utc_date(),' , UTC时间：',utc_time());\n\nselect utc_timestamp(); -- utc日期时间\nselect unix_timestamp(now()); -- 转时间戳\nselect date_format(now(), '%Y/%m/%d %H:%i:%s'); -- 格式化",remark:"时间函数"},{group:"default",name:"string-length",sql:'-- 字符串字节长度、字符长度\nSELECT\n  LENGTH("demo") "英文(demo)",\n  LENGTH("测试。") "中文符号(测试。)",\n  CHAR_LENGTH("demo") "CHAR - 英文(demo)",\n  CHAR_LENGTH("测试。") "CHAR - 中文符号(测试。)";',remark:"字符串长度"},{group:"default",name:"innodb_buffer_pool_size",sql:"\n-- Innodb buffer pool 缓存池中包含数据的页的数目，包括脏页。单位是 page\n-- Innodb buffer pool 的页总数目。单位是 page\nshow global status where Variable_name in ('Innodb_buffer_pool_pages_data', 'Innodb_buffer_pool_pages_total', 'Innodb_page_size');\n\nSELECT @@innodb_buffer_pool_size/1024/1024/1024; -- 字节转为 G\n\n-- 在线调整 InnoDB 缓冲池大小，如果不设置，默认为 128M\n-- set global innodb_buffer_pool_size = 1024*1024*1024*9; -- 单位字节",remark:"InnoDB 缓冲池大小"},{group:"default",name:"empty",sql:""}],n.Oracle=[{group:"rely",name:"db-env-info",sql:"SELECT 'name' col, ( SELECT PRODUCT FROM ( SELECT ROW_NUMBER() OVER( ORDER BY PRODUCT DESC ) numid, A.* FROM product_component_version A ) WHERE numid = 3 ) val FROM dual\nUNION ALL\nSELECT 'version' col, ( SELECT VERSION FROM product_component_version WHERE ROWNUM = 1 ) val FROM dual\nUNION ALL\nSELECT 'compile' col, ( SELECT STATUS FROM ( SELECT ROW_NUMBER() OVER( ORDER BY PRODUCT DESC ) numid, A.* FROM product_component_version A ) WHERE numid = 3 ) val FROM dual\nUNION ALL\nSELECT 'dir_data' col, ( SELECT file_name FROM dba_data_files WHERE file_id = 1 ) val FROM dual\nUNION ALL\nSELECT 'charset' col, ( SELECT VALUE FROM Nls_Database_Parameters WHERE PARAMETER = 'NLS_CHARACTERSET' ) val FROM dual\nUNION ALL\nSELECT 'time_zone' col, SESSIONTIMEZONE val FROM dual\nUNION ALL\nSELECT 'datetime' col, TO_CHAR(SYSDATE, 'yyyy-mm-dd hh24:mi:ss') val FROM dual\nUNION ALL\nSELECT 'max_conn' coll, ( SELECT TO_CHAR(VALUE) FROM v$parameter WHERE NAME = 'processes' ) val FROM dual\nUNION ALL\nSELECT 'curr_conn' col, ( SELECT TO_CHAR(COUNT(1)) FROM v$process ) val FROM dual\nUNION ALL\nSELECT 'ignore_case' col, ( CASE WHEN 'a' = 'A' THEN '1' ELSE '0' END ) val FROM dual\nUNION ALL\nSELECT 'system' col, ( select PLATFORM_NAME from v$database ) val FROM dual",desc:"数据库环境信息"},{group:"rely",name:"db-var-info",sql:"SELECT NAME||'='||VALUE AS params from v$parameter WHERE NAME IN('processes','sessions','sga_max_size','cpu_count','spfile','instance_name','service_names')\nUNION ALL\nselect 'log_mode='|| LOG_MODE from v$database\nUNION ALL\nselect 'open_mode='|| OPEN_MODE from v$database\nUNION ALL\nselect 'guard_status='|| GUARD_STATUS from v$database;\n\n-- NLS\nSELECT a.PARAMETER,a.VALUE GLOBAL_VALUE,b.VALUE SESSION_VALUE FROM v$NLS_PARAMETERS a FULL JOIN NLS_SESSION_PARAMETERS b ON a.PARAMETER=b.PARAMETER",remark:"数据库参数信息"},{group:"default",name:"database-name",sql:"SELECT USERNAME AS DatabaseName FROM ALL_USERS ORDER BY USERNAME",desc:"数据库名称"},{group:"default",name:"uuid",sql:"select rawtohex(sys_guid()) from dual",desc:"生成 GUID"},{group:"default",name:"manager",sql:"-- sqlplus 连接数据库，密码请勿带 @ 符号，巨坑\nsqlplus system/oracle@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=localhost)(Port=1521))(CONNECT_DATA=(SID=orcl)))\n\n-- 查看表空间物理文件的名称及大小\nSELECT tablespace_name, file_id, file_name, round(bytes / (1024 * 1024), 0) total_space_MB FROM dba_data_files ORDER BY tablespace_name;\n\n-- 查询用户对应表空间\nselect username, default_tablespace from dba_users;\n-- 查看你能管理的所有用户\nselect * from all_users;\n-- 查看当前用户信息\nselect * from user_users;\n\n-- 创建表空间（大小 500M，每次 5M 自动增大，最大不限制）\n-- create tablespace DSPACE datafile '/u01/app/oracle/oradata/EE/DNAME.dbf' size 500M autoextend on next 5M maxsize unlimited;\n-- create tablespace DSPACE datafile 'c:\\oracle\\oradata\\test\\DNAME.dbf' size 500M autoextend on next 5M maxsize unlimited;\n\n-- 删除表空间\n-- drop tablespace DSPACE including contents and datafiles cascade constraint;\n\n-- 创建用户并指定表空间\n-- create user DNAME identified by DPWD default tablespace DSPACE;\n\n-- 修改用户密码\nalter user \"DNAME\" identified by \"DPWD\";\n\n-- 为用户指定表空间\nalter user DNAME default tablespace DSPACE;\n\n-- 删除用户\ndrop user DNAME cascade;\n\n-- 授予权限\n-- connect：授予最终用户的典型权利，最基本的\n-- resource：授予开发人员\n-- dba：授予数据库所有的权限\ngrant connect, resource to DNAME;\ngrant dba to DNAME;\n-- 撤销权限\nrevoke dba from DNAME;\n-- 查询用户授予的角色权限\nselect * from dba_role_privs where grantee='DNAME';\n\n-- 锁定用户\nalter user DNAME account lock;\n-- 解锁用户\nalter user DNAME account unlock;\n\n-- 账号过期查询\nSELECT username, account_status, expiry_date FROM dba_users;\n-- 密码过期策略\nSELECT * FROM dba_profiles WHERE profile='DEFAULT' AND resource_name='PASSWORD_LIFE_TIME';",desc:"管理、维护"},{group:"default",name:"expdp-impdp",sql:"-- 按用户导出\nexpdp system/oracle@orcl schemas=$user dumpfile=$dbname.dmp logfile=$dbname.log directory=DATA_PUMP_DIR\n-- 按表名导出\nexpdp system/oracle@orcl tables=($TABLE1,$TABLE2) dumpfile=$dbname.dmp logfile=$dbname.log directory=DATA_PUMP_DIR\n-- 按用户导入（表覆盖）\nimpdp system/oracle@orcl schemas=$user dumpfile=$dbname.dmp logfile=$dbname.log directory=DATA_PUMP_DIR table_exists_action=REPLACE\n-- 按用户导入（转换空间）\nimpdp system/oracle@orcl schemas=$user TRANSFORM=segment_attributes:n dumpfile=$dbname.dmp logfile=$dbname.log directory=DATA_PUMP_DIR table_exists_action=REPLACE\n\n-- 导入导出包权限设置\nchown oracle -R /u01/app/oracle/admin/EE/dpdump/\n\n-- DIRECTORY 参数说明\n-- 查看管理员目录\nselect * from dba_directories\n-- 创建逻辑目录，还需手动创建目录，Oracle 不关心目录是否存在，不存在会报错\ncreate directory DP_DIR as 'C:\\app\\Administrator/admin/orcl/dpdump/'\n-- DUMPFILE 指定的 dmp 文件应放在 DIRECTORY 目录下\n-- 删除逻辑目录\ndrop directory DP_DIR",desc:"导入导出"},{group:"default",name:"common-function",sql:"select sysdate, sys_guid(), rawtohex(sys_guid()) from dual",desc:"常用函数"},{group:"default",name:"cursor-query",sql:"-- 接收参数 cmd.Parameters.Add(cursor, OracleDbType.RefCursor, DBNull.Value, ParameterDirection.Output)\nBEGIN\n    OPEN :o1 for SELECT 1,2 FROM dual;\n    OPEN :o2 for SELECT 3,4 FROM dual;\nEND;",remark:"游标多表查询"},{group:"default",name:"empty",sql:""}],n.SQLServer=[{group:"rely",name:"db-env-info",sql:"SELECT 'name' col, SUBSTRING(@@VERSION, 1, CHARINDEX(' - ', @@VERSION, 1)) + ' ' + CONVERT(varchar(99), SERVERPROPERTY('Edition')) val\nUNION ALL\nSELECT 'version' col, SERVERPROPERTY('ProductVersion') val\nUNION ALL\nSELECT 'dir_data' col, SERVERPROPERTY('InstanceDefaultDataPath') val\nUNION ALL\nSELECT 'charset' col, SERVERPROPERTY('Collation') val\nUNION ALL\nSELECT 'datetime' col, GETDATE() val\nUNION ALL\nSELECT 'time_out' col, value_in_use val FROM sys.configurations WHERE description = 'remote query timeout'\nUNION ALL\nSELECT 'max_conn' col, @@MAX_CONNECTIONS val\nUNION ALL\nSELECT 'curr_conn' col, ( SELECT COUNT(dbid) FROM sys.sysprocesses ) val\nUNION ALL\nSELECT 'ignore_case' col, ( CASE WHEN 'a' = 'A' THEN 1 ELSE 0 END ) val\nUNION ALL\nSELECT 'system' col, REPLACE( RIGHT( @@VERSION, CHARINDEX(CHAR(10), REVERSE(@@VERSION), 2) - 2 ), CHAR(10), '' ) val;\n\nEXEC master.dbo.Xp_instance_regread N'HKEY_LOCAL_MACHINE',\nN'SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation',\nN'TimeZoneKeyName'",remark:"数据库环境信息"},{group:"default",name:"database-name",sql:"SELECT name AS DatabaseName FROM sys.databases ORDER BY name"},{group:"default",name:"uuid",sql:"select newid()"},{group:"default",name:"query-history",sql:"SELECT QS.creation_time, SUBSTRING(ST.text, (QS.statement_start_offset / 2)+1, ((CASE QS.statement_end_offset WHEN-1 THEN DATALENGTH(st.text)ELSE QS.statement_end_offset END-QS.statement_start_offset)/ 2)+1) AS statement_text, ST.text, QS.total_worker_time, QS.last_worker_time, QS.max_worker_time, QS.min_worker_time\nFROM sys.dm_exec_query_stats QS\n     CROSS APPLY sys.dm_exec_sql_text(QS.sql_handle) ST\nWHERE ST.text LIKE '%%' AND QS.creation_time BETWEEN dateadd(MM, -1, GETDATE())AND GETDATE()\nORDER BY QS.creation_time DESC",remark:"查询历史"},{group:"default",name:"connection-info",sql:"SELECT a.spid, b.name, 'kill ' + CONVERT(varchar, a.spid) + ';' AS kill_command FROM MASTER..SysProcesses a LEFT JOIN sys.databases b ON b.database_id = a.dbid",remark:"数据库连接信息、关闭连接"},{group:"default",name:"table-size",sql:"-- 定义表变量\nDECLARE @T TABLE([name] VARCHAR(99),\n[rows] INT,\nreserved VARCHAR(99),\ndata_size VARCHAR(99),\nindex_size VARCHAR(99),\nunused VARCHAR(99));\n\n-- 将表占用情况存放到表变量\nINSERT INTO @T EXEC sp_MSforeachtable \"exec sp_spaceused '?'\";\nSELECT * FROM @T",remark:"表大小情况"},{group:"default",name:"identity_cache",sql:"alter database SCOPED CONFIGURATION SET IDENTITY_CACHE = OFF -- 关闭自增缓存\nselect * from sys.database_scoped_configurations where name = 'IDENTITY_CACHE' -- 查询自增缓存状态",remark:"自增缓存"},{group:"default",name:"sleep",sql:"SELECT GETDATE()\nWAITFOR DELAY N'00:00:01.500'\nSELECT GETDATE()"},{group:"default",name:"datetime-function",sql:"declare @local datetime=getdate()\ndeclare @utc datetime=getutcdate()\ndeclare @utc8 datetime=dateadd(hour, 8, getutcdate())\nprint N'当前时间：'+CONVERT(varchar(99), @local, 21)\nprint N'UTC：'+CONVERT(varchar(99), @utc, 21)\nprint N'UTC +8：'+CONVERT(varchar(99), @utc8, 21)\nprint N'格式化（yyyy-MM-dd HH:mm:ss.fff）：'+CONVERT(varchar(99), @utc8, 21)\nprint N'格式化（yyyy-MM-dd HH:mm:ss）：'+CONVERT(varchar(99), @utc8, 20)\nprint N'格式化（yyyy-MM-dd）：'+CONVERT(varchar(99), @utc8, 23)\nprint N'格式化（yyyy.MM.dd）：'+CONVERT(varchar(99), @utc8, 102)\nprint N'格式化（yyyy/MM/dd）：'+CONVERT(varchar(99), @utc8, 111)\nprint N'格式化（yyyyMMdd）：'+CONVERT(varchar(99), @utc8, 112)\nprint N'格式化（HH:mm:ss）：'+CONVERT(varchar(99), @utc8, 24)\nprint N'追加一天：'+CONVERT(varchar(99), dateadd(day, 1, @utc8), 21)",remark:"时间函数"},{group:"default",name:"guid",sql:"print newid()"},{group:"default",name:"sp_GetDDL",sql:"-- ref: https://www.stormrage.com/SQLStuff/sp_GetDDL_Latest.txt",remark:"获取表结构"},{group:"default",name:"empty",sql:""}],n.PostgreSQL=[{group:"rely",name:"db-env-info",sql:"SELECT 'name' col, split_part(split_part(VERSION(), ',', 1), ' on ', 1) val\nUNION ALL\nSELECT 'version' col, ( SELECT setting FROM pg_settings WHERE NAME = 'server_version' ) val\nUNION ALL\nSELECT 'compile' col, split_part(VERSION(), ',', 2) val\nUNION ALL\nSELECT 'dir_install' col, ( SELECT split_part(setting, 'main', 1) FROM pg_settings WHERE NAME = 'archive_command' ) val\nUNION ALL\nSELECT 'dir_data' col, ( SELECT setting FROM pg_settings WHERE NAME = 'data_directory' ) val\nUNION ALL\nSELECT 'charset' col, ( SELECT setting FROM pg_settings WHERE NAME = 'server_encoding' ) val\nUNION ALL\nSELECT 'time_zone' col, ( SELECT setting FROM pg_settings WHERE NAME = 'TimeZone' ) val\nUNION ALL\nSELECT 'datetime' col, to_char(now(), 'YYYY-MM-DD HH24:MI:SS.MS') val\nUNION ALL\nSELECT 'max_conn' col, ( SELECT setting FROM pg_settings WHERE NAME = 'max_connections' ) val\nUNION ALL\nSELECT 'curr_conn' col, CAST(COUNT(1) AS VARCHAR) val FROM pg_stat_activity\nUNION ALL\nSELECT 'time_out' col, ( SELECT setting FROM pg_settings WHERE NAME = 'statement_timeout' ) val\nUNION ALL\nSELECT 'ignore_case' col, CASE 'a' = 'A' WHEN 't' THEN '1' ELSE '0' END val\nUNION ALL\nSELECT 'system' col, split_part(split_part(VERSION(), ',', 1), ' on ', 2) val",remark:"数据库环境信息"},{group:"default",name:"database-name",sql:"SELECT datname AS DatabaseName FROM pg_database ORDER BY datname"},{group:"default",name:"sleep",sql:"select clock_timestamp(), pg_sleep(1), clock_timestamp();"},{group:"default",name:"uuid",sql:"select uuid_generate_v4()",remark:'生成 uuid , 须添加扩展：create extension "uuid-ossp";'},{group:"default",name:"print",sql:"DO $$\nBEGIN\n    RAISE NOTICE '当前日期时间：%', now();\n    RAISE NOTICE '版本信息：%', version();\nEND\n$$;\n",remark:"打印输出"},{group:"default",name:"empty",sql:""}]},33:(e,a,t)=>{t.d(a,{N:()=>i});var n=t(644),o=t(821),r=t(3),l=t(769),i={statusSet:e=>{null==e&&(e=i.statusInfo.queueList.length>0),(o.p.domRequestStatus.loading=e)?(o.p.domRequestStatus.type="danger",i.statusInfo.run()):(o.p.domRequestStatus.type="default",i.statusInfo.stop()),o.p.gridOpsQueue.api.setRowData(i.statusInfo.queueList)},statusInfo:{title:document.title,queueList:[],queueAdd:e=>{i.statusInfo.queueList.unshift(e),i.statusSet()},queueRemove:e=>{for(var a=i.statusInfo.queueList.length-1;a>=0;a--)i.statusInfo.queueList[a].id==e.id&&i.statusInfo.queueList.splice(a,1);i.statusSet()},queueCancel:e=>{e.abortCtrl.abort(),i.statusInfo.queueRemove(e)},si:null,run:(e=1,a=!0)=>{for(var t=[],n=o.p.emoji.loading,r=0;r<e;r++)t.push(n);document.title=" "+t.join(" "),a?e++:e--,a=5!=e&&a,a=1==e||a,document.querySelector("sl-icon-button").classList.add("nrc-rotate-1"),clearTimeout(i.statusInfo.si),i.statusInfo.si=setTimeout((()=>{i.statusInfo.run(e,a)}),600)},stop:()=>{clearTimeout(i.statusInfo.si),document.title=i.statusInfo.title,document.querySelector("sl-icon-button").classList.remove("nrc-rotate-1")}},parameterJoin:e=>{var a=[];for(var t in e)a.push(`${t}=${encodeURIComponent(e[t])}`);return a.join("&")},request:(e,a)=>new Promise(((t,r)=>{let s={id:n.R.UUID(),date:n.R.formatDateTime(),url:e,abortCtrl:new AbortController};i.statusInfo.queueAdd(s);let c=[];fetch(e,Object.assign({method:"GET",signal:s.abortCtrl.signal},a)).then((e=>{if(404!=e.status)return e.json();c=[l.t.lg.menu,l.t.lg.setting,l.t.lg.setServerTitle,l.t.lg.setServerPlaceholder].join(" > ")+" ? <br/>"})).then((e=>{var c;if(console.debug(e),i.statusInfo.queueRemove(s),200==e.code)t(e);else if(a&&a.body&&(c=a.body.get("sql")),c){var p="";try{p=JSON.stringify(JSON.parse(e.msg),null,2)}catch(a){p=e.msg}n.R.alert(`<sl-textarea rows="13"></sl-textarea><sl-divider></sl-divider><code contenteditable style="word-break:break-all">${c.substring(0,999)}</code>`,l.t.lg.message),o.p.domAlert.querySelector("sl-textarea").value=p,r(e)}else n.R.output(e.msg),r(e)})).catch((a=>{n.R.alert(`${c}${a}<sl-divider></sl-divider><code style="word-break:break-all">${e}</code>`,l.t.lg.message),i.statusInfo.queueRemove(s),r(a)}))})),reqConns:()=>new Promise((e=>{r.$.connsGet().then((a=>{0==a.length&&(a=o.p.resConnDemo),a.sort(((e,a)=>e.order-a.order)),e(a)}))})),reqDatabaseName:(e,a=!1)=>new Promise(((t,n)=>{new Promise((t=>{a?t():r.$.cc([e.id]).then((e=>{null!=e?t(e.data):t()})).catch((()=>t()))})).then((a=>{if(a)t(a);else{var l=i.parameterJoin({tdb:e.type,conn:e.conn});i.request(`${o.p.apiServer}${o.p.apiGetDatabaseName}?${l}`).then((a=>{var n=[];a.data.forEach((e=>{n.push({DatabaseName:e})})),r.$.cc([e.id],n),t(n)})).catch((e=>n(e)))}}))})),reqDatabaseInfo:(e,a,t=!1)=>new Promise(((n,l)=>{var s=""==a?[]:a.split(",");new Promise((a=>{t?a():r.$.cc([e.id]).then((e=>{if(null!=e){var t=!0;e.data.forEach((e=>{0==s.length?Object.hasOwnProperty.call(e,"DatabaseCharset")||(t=!1):s.includes(e.DatabaseName)&&!Object.hasOwnProperty.call(e,"DatabaseCharset")&&(t=!1)})),t?a(e.data):a()}else a()})).catch((()=>a()))})).then((t=>{if(t)n(t);else{var s=i.parameterJoin({tdb:e.type,conn:e.conn,filterDatabaseName:a});i.request(`${o.p.apiServer}${o.p.apiGetDatabaseInfo}?${s}`).then((a=>{r.$.cc([e.id]).then((t=>{t.data.forEach((e=>{var t=a.data.filter((a=>a.DatabaseName==e.DatabaseName));t.length>0&&Object.assign(e,t[0])})),r.$.cc([e.id],t.data),n(t.data)}))})).catch((e=>l(e)))}}))})),reqTable:(e,a,t=!1)=>new Promise(((n,l)=>{new Promise((n=>{t?n():r.$.cc([e.id,a]).then((e=>{null!=e?n(e.data):n()})).catch((()=>n()))})).then((t=>{if(t)n(t);else{var s=i.parameterJoin({tdb:e.type,conn:e.conn,databaseName:a});i.request(`${o.p.apiServer}${o.p.apiGetTable}?${s}`).then((t=>{r.$.cc([e.id,a],t.data),n(t.data)})).catch((e=>l(e)))}}))})),reqColumn:(e,a,t,n=!1)=>new Promise(((l,s)=>{new Promise((l=>{n?l():r.$.cc([e.id,a,"*"]).then((e=>{if(null!=e){var a=e.data.map((e=>`${e.SchemaName}.${e.TableName}`)),n=[];if(null!=t&&""!=t)n=t.split(",");else{var r=agg.getAllRows(o.p.gridOpsTable);n=r.map((e=>`${e.SchemaName}.${e.TableName}`))}if(n.filter((e=>!a.includes(e))).length)l();else{var i=e.data.filter((e=>n.includes(`${e.SchemaName}.${e.TableName}`)));l(i)}}else l()})).catch((()=>l()))})).then((n=>{if(n)l(n);else{var c=new FormData;c.append("tdb",e.type),c.append("conn",e.conn),c.append("filterSchemaNameTableName",t),c.append("databaseName",a),i.request(`${o.p.apiServer}${o.p.apiGetColumn}`,{method:"POST",body:c}).then((t=>{r.$.cc([e.id,a,"*"]).then((n=>{if(null!=n){var o=t.data.map((e=>e.TableName)),l=n.data.filter((e=>!o.includes(e.TableName)));l=l.concat(t.data).sort(((e,a)=>e.TableName.localeCompare(a.TableName))),r.$.cc([e.id,a,"*"],l)}else r.$.cc([e.id,a,"*"],t.data)})),l(t.data)})).catch((e=>s(e)))}}))})),reqTableDDL:(e,a,t,n)=>{var r=i.parameterJoin({tdb:e.type,conn:e.conn,tableName:n,schemaName:t,databaseName:a});return i.request(`${o.p.apiServer}${o.p.apiGetTableDDL}?${r}`)},setTableComment:(e,a,t,n,r)=>new Promise(((l,s)=>{if("SQLite"!=e.type){var c=new FormData;c.append("tdb",e.type),c.append("conn",e.conn),c.append("tableName",a),c.append("tableComment",t),c.append("schemaName",n),c.append("databaseName",r),i.request(`${o.p.apiServer}${o.p.apiSetTableComment}`,{method:"POST",body:c}).then((e=>l(e))).catch((e=>s(e)))}else s()})),setColumnComment:(e,a,t,n,r,l)=>new Promise(((s,c)=>{if("SQLite"!=e.type){var p=new FormData;p.append("tdb",e.type),p.append("conn",e.conn),p.append("tableName",a),p.append("columnName",t),p.append("columnComment",n),p.append("schemaName",r),p.append("databaseName",l),i.request(`${o.p.apiServer}${o.p.apiSetColumnComment}`,{method:"POST",body:p}).then((e=>s(e))).catch((e=>c(e)))}else c()}))}},372:(e,a,t)=>{t.d(a,{U:()=>d});var n=t(821),o=t(769),r=t(3),l=t(644),i=t(513),s=t(178),c=t(33),p=t(147),d={"cp-1":{cobj:{},databaseName:null},cpKeys:["1"],cpGet:e=>d[`cp-${e}`],cpSet:(e,a,t)=>{d.cpKeys.includes(e)||d.cpKeys.push(e),d[`cp-${e}`]={cobj:a,databaseName:t},d.stepSave()},cpRemove:e=>{var a=d.cpKeys.indexOf(e);a>=0&&d.cpKeys.splice(a,1),delete d[`cp-${e}`],d.stepSave()},cpInfo:e=>{if("reset"==e)n.p.domTabconns.style.display="none",n.p.domTabdatabase.style.display="none";else{var a=d.cpGet(e);if(null!=a){var t=a.cobj;if(1!=e){n.p.domTabconns.style.display="block",n.p.domTabdatabase.style.display="block",n.p.domTabconns.setAttribute("data-key",e),n.p.domTabdatabase.setAttribute("data-cobjid",t.id);var r,l=function(e){return`<span style="color:${n.p.colorEnv(a.cobj.env)};">${e}</span>`},p=l(n.p.iconSvg(t.type,t.alias,{className:"align-middle me-1",library:"nr-icon"})),m=l(null==a.databaseName?"(none)":n.p.iconSvg("server",a.databaseName,{className:"align-middle me-1"}));if(n.p.domGridTabconns)(r=n.p.domTabconns.firstElementChild).title=t.conn,r.innerHTML=p;else n.p.domTabconns.innerHTML=`\n                        <sl-button title="${t.conn}" slot="trigger" size="small" caret>${p}</sl-button>\n                        <sl-menu class="px-2">\n                            <div>\n                                <sl-input class="nr-filter-tabconns mb-2" size="small" placeholder="${o.t.lg.search}">\n                                    <sl-icon name="search" slot="prefix"></sl-icon>\n                                </sl-input>\n                            </div>\n                            <div class="nr-grid-tabconns" style="width:24em;max-width:100%;height:55vh"></div>\n                        </sl-menu>\n                        `,n.p.domGridTabconns=n.p.domTabconns.querySelector(".nr-grid-tabconns"),n.p.domFilterTabconns=n.p.domTabconns.querySelector(".nr-filter-tabconns"),n.p.domFilterTabconns.addEventListener("input",(function(){n.p.gridOpsTabconns.api.setQuickFilter(this.value)})),n.p.domTabconns.addEventListener("sl-show",(function(e){var a=n.p.domTabconns.getAttribute("data-key"),t=d.cpGet(a);if(null==n.p.gridOpsTabconns||1==n.p.envConnsChanged){n.p.envConnsChanged=!1;var r=agg.optionDef({rowData:agg.getAllRows(n.p.gridOpsConns),getRowId:e=>e.data.id,rowGroupPanelShow:"never",rowSelection:"single",suppressRowClickSelection:!1,enableRangeSelection:!1,suppressContextMenu:!0,headerHeight:0,columnDefs:[{field:"alias",headerName:o.t.lg.connAlias,tooltipField:"conn",flex:1,checkboxSelection:!0,cellRenderer:e=>{if(!e.node.group)return e.data.type?n.p.iconSvg(e.data.type,e.value,{library:"nr-icon"}):e.value},cellStyle:e=>{var a=e.node.data&&e.node.data.env;return{color:n.p.colorEnv(a)}}}],onSelectionChanged:function(){var e=n.p.domTabconns.getAttribute("data-key"),a=d.cpGet(e),t=n.p.gridOpsTabconns.api.getSelectedRows();t.length&&a.cobj.id!=t[0].id&&(d.cpSet(e,t[0]),s.W.tabKeys[e].domTab.innerHTML=n.p.iconSvg("plug-fill",t[0].alias),s.W.tabNavFix(),d.cpInfo(e))}});i.P.createGrid("tabconns",r)}n.p.domFilterTabconns.value="",n.p.gridOpsTabconns.api.setQuickFilter(""),n.p.gridOpsTabconns.api.clearRangeSelection(),n.p.gridOpsTabconns.api.forEachNode((function(e){e.data.id==t.cobj.id&&(e.setSelected(!0,!0),n.p.gridOpsTabconns.api.ensureIndexVisible(e.rowIndex))}))}));if(n.p.domGridTabdatabase)(r=n.p.domTabdatabase.firstElementChild).title=a.databaseName||"",r.innerHTML=m;else n.p.domTabdatabase.innerHTML=`\n                        <sl-button title="${a.databaseName||""}" slot="trigger" size="small" caret>${m}</sl-button>\n                        <sl-menu class="px-2">\n                            <div>\n                                <sl-input class="nr-filter-tabdatabase mb-2" size="small" placeholder="${o.t.lg.search}">\n                                    <sl-icon name="search" slot="prefix"></sl-icon>\n                                </sl-input>\n                            </div>\n                            <div class="nr-grid-tabdatabase" style="width:24em;max-width:100%;height:55vh"></div>\n                        </sl-menu>\n                        `,n.p.domGridTabdatabase=n.p.domTabdatabase.querySelector(".nr-grid-tabdatabase"),n.p.domFilterTabdatabase=n.p.domTabdatabase.querySelector(".nr-filter-tabdatabase"),n.p.domFilterTabdatabase.addEventListener("input",(function(){n.p.gridOpsTabdatabase.api.setQuickFilter(this.value)})),n.p.domTabdatabase.addEventListener("sl-show",(function(e){var a=n.p.domTabconns.getAttribute("data-key"),t=d.cpGet(a),r=n.p.domTabdatabase.getAttribute("data-grid-cobjid");new Promise(((e,a)=>{null==n.p.gridOpsTabdatabase||r!=t.cobj.id||n.p.gridOpsDatabase.rowData.map((e=>e.DatabaseName)).join()!=n.p.gridOpsTabdatabase.rowData.map((e=>e.DatabaseName)).join()?(n.p.domTabdatabase.setAttribute("data-grid-cobjid",t.cobj.id),c.N.reqDatabaseName(t.cobj).then((a=>{var t=agg.optionDef({rowData:a,getRowId:e=>e.data.DatabaseName,rowGroupPanelShow:"never",rowSelection:"single",suppressRowClickSelection:!1,enableRangeSelection:!1,suppressContextMenu:!0,headerHeight:0,columnDefs:[{field:"DatabaseName",headerName:o.t.lg.dbName,tooltipField:"DatabaseName",flex:1,checkboxSelection:!0,cellRenderer:e=>n.p.iconSvg("server",e.value)}],onSelectionChanged:function(){var e=n.p.domTabconns.getAttribute("data-key"),a=d.cpGet(e),t=n.p.gridOpsTabdatabase.api.getSelectedRows(),o=t.length?t[0].DatabaseName:null;a.databaseName!=o&&(d.cpSet(e,a.cobj,o),s.W.tabKeys[e].domTab.innerHTML=o?n.p.iconSvg("server",t[0].DatabaseName):n.p.iconSvg("plug-fill",a.cobj.alias),s.W.tabNavFix(),d.cpInfo(e))}});i.P.createGrid("tabdatabase",t),e()})).catch((e=>{a(e)}))):e()})).then((()=>{n.p.domFilterTabdatabase.value="",n.p.gridOpsTabdatabase.api.setQuickFilter(""),n.p.gridOpsTabdatabase.api.clearRangeSelection(),t.databaseName?n.p.gridOpsTabdatabase.api.forEachNode((function(e){e.data.DatabaseName==t.databaseName&&e.setSelected(!0,!0)})):n.p.gridOpsTabdatabase.api.deselectAll()}))}))}}}},cpCurrent:function(){switch(n.p.domTabGroupTree.activeTab.panel){case"tp1-conns":var e=n.p.gridOpsConns.api.getSelectedRows(),a=n.p.gridOpsConns.api.getCellRanges();if(e.length?t=e[0]:a.length&&(t=n.p.gridOpsConns.api.getDisplayedRowAtIndex(a[0].startRow.rowIndex).data),t)return{cobj:t};l.R.output(o.t.lg.selectConn);break;case"tp1-database":var t;e=n.p.gridOpsDatabase.api.getSelectedRows(),a=n.p.gridOpsDatabase.api.getCellRanges();e.length?t=e.sort(((e,a)=>e.DatabaseName.localeCompare(a.DatabaseName)))[0]:a.length&&(t=n.p.gridOpsDatabase.api.getDisplayedRowAtIndex(a[0].startRow.rowIndex).data);var r=d.cpGet(1);return t?{cobj:r.cobj,databaseName:t.DatabaseName}:r;case"tp1-table":case"tp1-column":return r=d.cpGet(1)}},stepVarIng:0,stepVarStart:Date.now(),stepVarEnd:Date.now(),stepVarIndex:0,stepVarDefer:null,stepStatus:e=>{switch(e){case 1:d.stepVarStart=Date.now(),d.stepVarIng=e,d.stepVarIndex=0;break;case 2:d.stepVarEnd=Date.now(),d.stepVarIng=e,console.debug("step done "+(d.stepVarEnd-d.stepVarStart)),clearTimeout(d.stepVarDefer);break;default:d.stepVarEnd=Date.now(),d.stepVarIng=-1,console.debug("step timeout")}},stepSave:()=>{if(1!=d.stepVarIng){var e={theme:n.p.theme,language:o.t.language,spliterBodySize:p.x.getSpliterSize(n.p.domSpliterBody),apiServer:n.p.apiServer,parameterConfig:{},connCache:{},tabGroupTreeShow:"tp-conns",filterConns:n.p.domFilterConns.value,viewDatabase:null!=n.p.gridOpsDatabase,filterDatabase:n.p.domFilterDatabase.value,viewTable:null!=n.p.gridOpsTable,filterTable:n.p.domFilterTable.value,viewColumn:null!=n.p.gridOpsColumn,filterColumn:n.p.domFilterColumn.value,viewColumnTableName:[]};for(const a in n.p.parameterConfig)e.parameterConfig[a]=n.p.parameterConfig[a].value;n.p.domTabGroupTree.querySelectorAll("sl-tab-panel").forEach((a=>{"block"==a.style.display&&(e.tabGroupTreeShow=a.name)})),e.connCache[1]=d.cpGet(1)||{},e.viewColumn&&(e.viewColumnTableName=l.R.groupBy(n.p.gridOpsColumn.rowData,(e=>e.TableName))),r.$.stepsSet(e)}},stepStart:()=>new Promise((e=>{1==d.stepVarIng?l.R.output(o.t.lg.inProgress):(d.stepStatus(1),d.stepVarDefer=setTimeout((()=>{d.stepStatus(-1),e()}),3e4),r.$.stepsGet().then((a=>d.stepItemRun(["step-theme","step-spliter-body-size","step-api-server","step-parameter-config","step-conn-cache","step-view-conns","step-tab-group-tree-show"],a).then((()=>d.stepItemRun(["step-view-database","step-view-table","step-view-column"],a).then((()=>{d.stepStatus(2),e()})))))))})),stepItemRun:(e,a)=>new Promise((t=>{var n=[];e.forEach((e=>n.push(d.stepItemCmd(e,a)))),Promise.all(n).then((()=>t())).catch((()=>t()))})),stepItemCmd:(e,a)=>new Promise((t=>{switch(a=a||{},e){case"step-theme":p.x.actionRun("theme",a.theme),t();break;case"step-spliter-body-size":a.spliterBodySize&&""!=a.spliterBodySize&&p.x.setSpliterSize(n.p.domSpliterBody,a.spliterBodySize),t();break;case"step-api-server":a.apiServer&&""!=a.apiServer&&(n.p.apiServer=a.apiServer),t();break;case"step-parameter-config":if(a.parameterConfig)for(const e in a.parameterConfig)n.p.parameterConfig[e].value=a.parameterConfig[e];t();break;case"step-conn-cache":for(var o in a.connCache){var r=a.connCache[o];d.cpSet(o,r.cobj,r.databaseName)}t();break;case"step-view-conns":c.N.reqConns().then((e=>{i.P.viewConns(e).then((()=>{d.stepItemCmd("step-tab-group-tree-show",a);var e=(a.filterConns||"").trim();""!=e&&(n.p.domFilterConns.value=e,n.p.gridOpsConns.api.setQuickFilter(e)),t()}))}));break;case"step-view-database":if(a.viewDatabase){r=d.cpGet(1);c.N.reqDatabaseName(r.cobj).then((e=>{i.P.viewDatabase(e).then((()=>{d.stepItemCmd("step-tab-group-tree-show",a);var e=(a.filterDatabase||"").trim();""!=e&&(n.p.domFilterDatabase.value=e,n.p.gridOpsDatabase.api.setQuickFilter(e)),t()}))})).catch(t)}else t();break;case"step-view-table":r=d.cpGet(1);a.viewTable&&null!=r.databaseName?c.N.reqTable(r.cobj,r.databaseName).then((e=>{i.P.viewTable(e,r.cobj).then((()=>{d.stepItemCmd("step-tab-group-tree-show",a);var e=(a.filterTable||"").trim();""!=e&&(n.p.domFilterTable.value=e,n.p.gridOpsTable.api.setQuickFilter(e)),t()}))})).catch(t):t();break;case"step-view-column":r=d.cpGet(1);a.viewColumn&&a.viewColumnTableName.length&&null!=r.databaseName?c.N.reqColumn(r.cobj,r.databaseName,a.viewColumnTableName.join(",")).then((e=>{i.P.viewColumn(e,r.cobj).then((()=>{d.stepItemCmd("step-tab-group-tree-show",a);var e=(a.filterColumn||"").trim();""!=e&&(n.p.domFilterColumn.value=e,n.p.gridOpsColumn.api.setQuickFilter(e)),t()}))})).catch(t):t();break;case"step-tab-group-tree-show":a.tabGroupTreeShow&&""!=a.tabGroupTreeShow&&n.p.domTabGroupTree.show(a.tabGroupTreeShow),t()}}))}},3:(e,a,t)=>{t.d(a,{$:()=>l});var n=t(821),o=t(644),r=t(372),l={instanceConfig:null,instanceCache:null,init:e=>{l.instanceConfig=e.createInstance({name:"ndk-config"}),l.instanceCache=e.createInstance({name:"ndk-cache"})},keys:{keyConns:{key:"conns"},keySteps:{key:"steps"},keyErrors:{key:"errors"},keyNotes:{key:"notes"},keyHistorys:{key:"historys"}},connsSet:e=>new Promise((a=>{l.connsGet().then((t=>{"Array"!=o.R.type(e)&&(e=[e]),e.forEach((e=>{for(var a=t.length-1;a>=0;a--){if(t[a].id==e.id){t.splice(a,1);break}}})),t=t.concat(e),n.p.envConnsChanged=!0,l.instanceConfig.setItem(l.keys.keyConns.key,t).then((()=>a(t)))}))})),connsDelete:e=>new Promise((a=>{e="Array"==o.R.type(e)?e:[e],l.connsGet().then((t=>{for(var o=0;o<t.length;o++){var r=t[o];e.includes(r.id)&&t.splice(o,1)}l.instanceCache.keys().then((a=>{a.filter((a=>e.includes(a.split("-")[0]))).forEach((e=>l.instanceCache.removeItem(e)))})),n.p.envConnsChanged=!0,l.instanceConfig.setItem(l.keys.keyConns.key,t).then((()=>a(t)))}))})),connsGet:e=>new Promise((a=>{l.instanceConfig.getItem(l.keys.keyConns.key).then((t=>{t=t||[],a(null!=e?t.filter((a=>a.id==e)).pop()||[]:t)}))})),stepsSet:e=>l.instanceConfig.setItem(l.keys.keySteps.key,e),stepsGet:()=>l.instanceConfig.getItem(l.keys.keySteps.key),stepsDelete:()=>l.instanceConfig.removeItem(l.keys.keySteps.key),errorsAdd:e=>new Promise((a=>{l.errorsGet().then((t=>{(t=t||[]).length>100&&(t=t.slice(50)),t.push(Object.assign({date:o.R.now()},e)),l.instanceConfig.setItem(l.keys.keyErrors.key,t).then((()=>a(t)))}))})),errorsGet:()=>new Promise((e=>{l.instanceConfig.getItem(l.keys.keyErrors.key).then((a=>{e(a||[])}))})),historysAdd:(e,a,t)=>new Promise((r=>{l.historysGet().then((i=>{(i=i||[]).length>2*n.p.parameterConfig.maxSqlHistory.value&&(i=i.slice(n.p.parameterConfig.maxSqlHistory.value)),i.unshift({sql:t,date:o.R.now(),databaseName:a,cobjId:e}),l.instanceConfig.setItem(l.keys.keyHistorys.key,i).then((()=>r(i)))}))})),historysGet:()=>l.instanceConfig.getItem(l.keys.keyHistorys.key),cc:(e,a)=>new Promise((t=>{switch(e.length){case 1:e.splice(1,0,"database");break;case 2:e.splice(1,0,"table");break;default:e.splice(1,0,"column")}null==a?l.instanceCache.getItem(e.join("-")).then((e=>t(e))):l.instanceCache.setItem(e.join("-"),{data:a,date:o.R.now()}).then((e=>t(e)))})),ccBrushTable:()=>{var e=r.U.cpGet(1),a=agg.getAllRows(n.p.gridOpsTable);l.cc([e.cobj.id,e.databaseName],a)}}},178:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>ndkTab});var _ndkFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(644),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(213),_ndkVary__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(821),_ndkI18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(769),_ndkExecute__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(334),_ndkAction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(147),_ndkGenerateCode__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(722),_ndkStep__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(372),ndkTab={tabKeys:{},tabActiveCp:()=>{if(_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.activeTab)return _ndkStep__WEBPACK_IMPORTED_MODULE_7__.U.cpGet(_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.activeTab.panel)},tabBuild:(e,a,t)=>new Promise((n=>{(e=`tp-${e}`)in ndkTab.tabKeys||ndkTab[`tabBuild_${t}`](e,a,t),n(e)})),tabBuildFast_sql:(e,a,t,n=!1)=>new Promise((o=>{ndkTab.tabBuild(_ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.random(),a,ndkTab.tabType.sql).then((a=>{_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.show(a),_ndkStep__WEBPACK_IMPORTED_MODULE_7__.U.cpSet(a,e.cobj,e.databaseName),_ndkStep__WEBPACK_IMPORTED_MODULE_7__.U.cpInfo(a);var r=ndkTab.tabKeys[a];null==t||"string"==typeof t?(null==t&&(t=""),r.editor.setValue(t),n&&""!=t.trim()&&_ndkExecute__WEBPACK_IMPORTED_MODULE_4__.Y.editorSql(a),o(a)):(r.editor.setValue(`-- ${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.generatingScript}`),t.then((e=>{r.editor.setValue(e),n&&""!=e.trim()&&_ndkExecute__WEBPACK_IMPORTED_MODULE_4__.Y.editorSql(a),o(a)})))}))})),tabType:{sql:"sql",vsql:"vsql",code:"code",faker:"faker"},tabBuild_sql:(e,a,t)=>{var n=`\n<div class="nr-spliter-sql nrc-spliter-vertical">\n    \x3c!--SQL--\x3e\n    <div class="nr-editor-box nrc-spliter-item">\n        <div class="nr-editor-tool" panel="${e}">\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonExecute} Ctrl + Enter" placement="right">\n                <sl-icon-button data-cmd="sql-execute-selected-or-all" panel="${e}" name="caret-right-fill" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonFormat} Alt + Shift + F" placement="right">\n                <sl-icon-button data-cmd="sql-formatting" panel="${e}" name="brush-fill" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonNote}" placement="right">\n                <sl-icon-button data-cmd="sql-notes" panel="${e}" name="journal-code" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonHistory}" placement="right">\n                <sl-icon-button data-cmd="sql-historys" panel="${e}" name="clock-history" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n        </div>\n        <div class="nr-editor-sql" panel="${e}"></div>\n    </div>\n\n    <div class="nrc-spliter-bar"></div>\n    <div class="nrc-spliter-bar-active"></div>\n\n    \x3c!--Result--\x3e\n    <div class="nrc-spliter-item">\n        <sl-tab-group class="nr-tab-group-esql">\n        </sl-tab-group>\n    </div>\n</div>`,o=document.createElement("div");o.innerHTML=`<sl-tab slot="nav" panel="${e}" closable>${a}</sl-tab><sl-tab-panel name="${e}">${n}</sl-tab-panel>`;var r=o.querySelector("sl-tab"),l=o.querySelector("sl-tab-panel"),i=o.querySelector(".nr-editor-tool"),s=o.querySelector(".nr-editor-sql"),c=o.querySelector(".nr-tab-group-esql"),p=_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.querySelectorAll("sl-tab-panel");_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.insertBefore(r,p[0]),_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.appendChild(l),ndkTab.tabNavFix(),o.remove(),ndkTab.tabKeys[e]={tpkey:e,type:t,domTab:r,domTabPanel:l,domEditorTool:i,domEditorSql:s,domTabGroupEsql:c},_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.create(s,{language:_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.typeAsLanguage(t)}).then((a=>{ndkTab.tabKeys[e].editor=a,_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.wordWrap(a),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.fullScreen(a),a.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter,(function(){var e=ndkTab.tabKeys[_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.activeTab.panel];_ndkExecute__WEBPACK_IMPORTED_MODULE_4__.Y.editorSql(e.tpkey)}))})),_ndkAction__WEBPACK_IMPORTED_MODULE_5__.x.setSpliterSize(l.children[0],"no")},tabBuild_vsql:(e,a,t)=>{var n=`\n<div class="nr-spliter-vsql nrc-spliter-vertical">\n    \x3c!--SQL--\x3e\n    <div class="nr-editor-box nrc-spliter-item">\n        <div class="nr-editor-tool" panel="${e}">\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonExecute} Ctrl + Enter" placement="right">\n                <sl-icon-button data-cmd="sql-execute-selected-or-all" panel="${e}" name="caret-right-fill" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonFormat} Alt + Shift + F" placement="right">\n                <sl-icon-button data-cmd="sql-formatting" panel="${e}" name="brush-fill" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonNote}" placement="right">\n                <sl-icon-button data-cmd="sql-notes" panel="${e}" name="journal-code" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.sqlButtonHistory}" placement="right">\n                <sl-icon-button data-cmd="sql-historys" panel="${e}" name="clock-history" style="font-size: 1.5rem;"></sl-icon-button>\n            </sl-tooltip>\n        </div>\n        <div class="nr-editor-sql" panel="${e}"></div>\n    </div>\n\n    <div class="nrc-spliter-bar"></div>\n    <div class="nrc-spliter-bar-active"></div>\n\n    \x3c!--Result--\x3e\n    <div class="nrc-spliter-item">\n        <sl-tab-group class="nr-tab-group-esql">\n        </sl-tab-group>\n    </div>\n</div>`,o=document.createElement("div");o.innerHTML=`<sl-tab slot="nav" panel="${e}" closable>${a}</sl-tab><sl-tab-panel name="${e}">${n}</sl-tab-panel>`;var r=o.querySelector("sl-tab"),l=o.querySelector("sl-tab-panel"),i=o.querySelector(".nr-editor-tool"),s=o.querySelector(".nr-editor-sql"),c=o.querySelector(".nr-tab-group-esql"),p=_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.querySelectorAll("sl-tab-panel");_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.insertBefore(r,p[0]),_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.appendChild(l),ndkTab.tabNavFix(),o.remove(),ndkTab.tabKeys[e]={tpkey:e,type:t,domTab:r,domTabPanel:l,domEditorTool:i,domEditorSql:s,domTabGroupEsql:c},_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.create(s,{language:_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.typeAsLanguage(t)}).then((a=>{ndkTab.tabKeys[e].editor=a,_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.wordWrap(a),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.fullScreen(a),a.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter,(function(){var e=ndkTab.tabKeys[_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.activeTab.panel];_ndkExecute__WEBPACK_IMPORTED_MODULE_4__.Y.editorSql(e.tpkey)}))})),_ndkAction__WEBPACK_IMPORTED_MODULE_5__.x.setSpliterSize(l.children[0],"no")},tabBuild_code:(key,title,type)=>{var pbox=`\n<div class="nr-spliter-code nrc-spliter-horizontal">\n    \x3c!--Editor Code--\x3e\n    <div class="nrc-spliter-item">\n        <div class="nr-gc1-tool">\n            <sl-select class="nr-gc1-fn mb-2" size="small" panel="${key}" placeholder="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.pleaseChoose}" multiple clearable></sl-select>            \n            <sl-tooltip content="Debug">\n                <sl-icon-button class="nr-gc1-debug mb-2" name="play-circle" label="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.debug}" panel="${key}"></sl-icon-button>\n            </sl-tooltip>\n            <sl-tooltip content="Run">\n                <sl-icon-button class="nr-gc1-run mb-2" name="play-circle-fill" label="${_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.run}" panel="${key}"></sl-icon-button>\n            </sl-tooltip>\n        </div>\n        <div class="nr-editor-gc1"></div>\n    </div>\n\n    <div class="nrc-spliter-bar"></div>\n    <div class="nrc-spliter-bar-active"></div>\n\n    \x3c!--Editor Result--\x3e\n    <div class="nrc-spliter-item">\n        <div class="nr-gc2-tool">\n            <sl-select class="nr-gc2-language mb-2" size="small" panel="${key}"></sl-select>\n        </div>\n        <div class="nr-editor-gc2"></div>\n    </div>\n</div>`,tabbox=document.createElement("div");tabbox.innerHTML=`<sl-tab slot="nav" panel="${key}" closable>${title}</sl-tab><sl-tab-panel name="${key}">${pbox}</sl-tab-panel>`;var domTab=tabbox.querySelector("sl-tab"),domTabPanel=tabbox.querySelector("sl-tab-panel"),domTool1=tabbox.querySelector(".nr-gc1-tool"),domTool2=tabbox.querySelector(".nr-gc2-tool"),domSelectFn=tabbox.querySelector(".nr-gc1-fn"),domSelectDebug=tabbox.querySelector(".nr-gc1-debug"),domSelectRun=tabbox.querySelector(".nr-gc1-run"),domEditor1=tabbox.querySelector(".nr-editor-gc1"),domEditor2=tabbox.querySelector(".nr-editor-gc2"),domSelectLanguage=tabbox.querySelector(".nr-gc2-language"),fnhtm=[];_ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.groupBy(_ndkGenerateCode__WEBPACK_IMPORTED_MODULE_6__.l.fns,(e=>e.language)).forEach((e=>{fnhtm.length>0&&fnhtm.push("<sl-divider></sl-divider>"),fnhtm.push(`<sl-menu-label>${e}</sl-menu-label>`),_ndkGenerateCode__WEBPACK_IMPORTED_MODULE_6__.l.fns.filter((a=>a.language==e)).forEach((a=>{fnhtm.push(`<sl-menu-item value="${e}:${a.name}">${e} - ${a.name}</sl-menu-item>`)}))})),domSelectFn.innerHTML=fnhtm.join(""),domSelectFn.addEventListener("sl-change",(function(){var e=ndkTab.tabKeys[this.getAttribute("panel")];if(1==this.value.length){var a=this.value[0].split(":"),t=_ndkGenerateCode__WEBPACK_IMPORTED_MODULE_6__.l.fns.find((e=>e.language==a[0]&&e.name==a[1])).code;e.editor1.setValue(`//${a.join(" - ")}\r\n${t}`),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.formatter(e.editor1)}else e.editor1.setValue("")})),domSelectDebug.addEventListener("click",(function(){var tpobj=ndkTab.tabKeys[this.getAttribute("panel")],code=tpobj.editor1.getValue().trim();if(""!=code){var fnout=eval("("+code+")");"function"==typeof fnout&&(fnout=fnout()),"object"==typeof fnout?(tpobj.editor2.setValue(fnout.map((e=>e.content)).join("\r\n\r\n\r\n")),domSelectLanguage.value=tpobj.domSelectFn.value[0].split(":")[0],_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.formatter(tpobj.editor2)):tpobj.editor2.setValue(fnout.toString()),_ndkAction__WEBPACK_IMPORTED_MODULE_5__.x.setSpliterSize(tpobj.domTabPanel.children[0],"auto")}else _ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.output(_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.contentNotEmpty)})),domSelectRun.addEventListener("click",(function(){var tpobj=ndkTab.tabKeys[this.getAttribute("panel")];if(tpobj.domSelectFn.value.length){var zip=new JSZip;tpobj.domSelectFn.value.forEach((item=>{var vals=item.split(":"),code=_ndkGenerateCode__WEBPACK_IMPORTED_MODULE_6__.l.fns.find((e=>e.language==vals[0]&&e.name==vals[1])).code,fnout=eval("("+code+")");"function"==typeof fnout&&(fnout=fnout()),"object"==typeof fnout?fnout.forEach((e=>{var a=[e.name];""!=e.path&&a.unshift(e.path),zip.file(a.join("/"),e.content)})):_ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.output(fnout.toString())})),zip.generateAsync({type:"blob"}).then((function(e){_ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.download(e,"code.zip")})),_ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.output(_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.done)}else _ndkFunction__WEBPACK_IMPORTED_MODULE_0__.R.output(_ndkI18n__WEBPACK_IMPORTED_MODULE_3__.t.lg.selectAnItem)}));var slhtm=[];monaco.languages.getLanguages().map((e=>e.id)).sort().forEach((e=>{slhtm.push(`<sl-menu-item value="${e}">${e}</sl-menu-item>`)})),domSelectLanguage.innerHTML=slhtm.join(""),domSelectLanguage.value="csharp",domSelectLanguage.addEventListener("sl-change",(function(){var e=ndkTab.tabKeys[this.getAttribute("panel")];_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.setLanguage(e.editor2,this.value)}));var slpanels=_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.querySelectorAll("sl-tab-panel");_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.insertBefore(domTab,slpanels[0]),_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.appendChild(domTabPanel),ndkTab.tabNavFix(),tabbox.remove(),ndkTab.tabKeys[key]={tpkey:key,type,domTab,domTabPanel,domTool1,domTool2,domSelectFn,domSelectSave:domSelectRun,domEditor1,domEditor2,domSelectLanguage},_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.create(domEditor1,{language:"javascript"}).then((e=>{ndkTab.tabKeys[key].editor1=e,_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.wordWrap(e),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.fullScreen(e),e.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter,(function(){}))})),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.create(domEditor2,{language:"csharp"}).then((e=>{ndkTab.tabKeys[key].editor2=e,_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.wordWrap(e),_ndkEditor__WEBPACK_IMPORTED_MODULE_1__.C.fullScreen(e)})),_ndkAction__WEBPACK_IMPORTED_MODULE_5__.x.setSpliterSize(domTabPanel.children[0],"no")},tabBuild_faker:(e,a,t)=>{var n=document.createElement("div");n.innerHTML=`<sl-tab slot="nav" panel="${e}" closable>${a}</sl-tab><sl-tab-panel name="${e}">\n<div class="nr-spliter-faker nrc-spliter-horizontal">\n    <div class="nrc-spliter-item">\n        Dev...\n    </div>\n\n    <div class="nrc-spliter-bar"></div>\n    <div class="nrc-spliter-bar-active"></div>\n\n    \x3c!--Editor Result--\x3e\n    <div class="nrc-spliter-item">\n        Dev...\n    </div>\n</div></sl-tab-panel>`;var o=n.querySelector("sl-tab"),r=n.querySelector("sl-tab-panel"),l=_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.querySelectorAll("sl-tab-panel");_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.insertBefore(o,l[0]),_ndkVary__WEBPACK_IMPORTED_MODULE_2__.p.domTabGroupBody.appendChild(r),ndkTab.tabNavFix(),n.remove()},tabNavFix:()=>{document.body.style.zoom="1"==document.body.style.zoom?1.00001:1}}},821:(e,a,t)=>{t.d(a,{p:()=>o});var n=t(769),o={version:"1.1.3",name:"NDK (Netnr.DataKit)",theme:"auto",themeGet:()=>"auto"==o.theme?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o.theme,resTheme:[{key:"auto",icon:"square-half"},{key:"dark",icon:"moon-fill"},{key:"light",icon:"sun"}],typeDB:["SQLite","MySQL","MariaDB","Oracle","SQLServer","PostgreSQL"],typeEnv:["dev","prod"],colorEnv:e=>`var(--sl-color-${"prod"==e?"danger":"primary"}-600)`,iconSvg:(e,a,t)=>(a=a??"",(t=Object.assign({className:"",slot:null,library:"default"},t)).slot=t.slot?`slot="${t.slot}"`:"",`<sl-icon library="${t.library}" class="${t.className}" name="${e.toLowerCase()}" ${t.slot}></sl-icon> ${a}`),iconGrid:e=>`<span class="ag-icon ag-icon-${e}"></span>`,emoji:{menu:"Ⓜ",quick:"📌",id:"🆔",loading:"🛑",comment:"📝",ok:"🆗",key:"🔑",incr:"👆",star:"⭐",remove:"❌",success:"✔",cog:"⚙",parameter:"🛠",server:"🌎",io:"♻",clipboard:"📋",save:"💾",cut:"✂",see:"👁",wait:"⏳",package:"📦",link:"🔗",bucket:"🛢"},resConnTemplate:{SQLite:"Data Source={文件物理路径，或网络路径，后台自动下载文件}",MySQL:"Server={IP};Port=3306;Uid={USER};Pwd={PWD};Database={DBNAME};",MariaDB:"Server={IP};Port=3306;Uid={USER};Pwd={PWD};Database={DBNAME};",Oracle:"Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST={IP})(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=ORCL)));User Id={USER};Password={PWD};",SQLServer:"Server={IP},1433;User Id={USER};Password={PWD};Database={DBNAME};TrustServerCertificate=True;",PostgreSQL:"Server={IP};Port=5432;User Id={USER};Password={PWD};Database={DBNAME};"},resConnDemo:[{id:10001,type:"SQLite",alias:"netnrf",group:"demo",order:1,env:"dev",conn:"Data Source=https://gs.zme.ink/2020/05/22/2037505934.db"},{id:10002,type:"MySQL",alias:"jjrrk4fMaf",group:"demo",order:2,env:"dev",conn:"Server=remotemysql.com;Port=3306;Uid=jjrrk4fMaf;Pwd=Fb7Kx8ICY6;Database=jjrrk4fMaf;"},{id:10005,type:"PostgreSQL",alias:"eiueluhc",group:"demo",order:3,env:"dev",conn:"Server=satao.db.elephantsql.com;Port=5432;User Id=eiueluhc;Password=IbiZfVBcqLilS58RkaWNDG6j007Td0ml;Database=eiueluhc;SslMode=Require;Trust Server Certificate=true;"}],parameterConfig:{autoFilterDatabaseNumber:{type:"number",value:40},selectDataLimit:{type:"number",value:100},buildSqlWithQuote:{type:"boolean",list:[{val:!0},{val:!1}],value:!0},buildSqlWithComment:{type:"boolean",list:[{val:!0},{val:!1}],value:!0},dataSqlBulkInsert:{type:"number",value:10},dataSqlWithAutoIncrement:{type:"boolean",list:[{val:!0},{val:!1}],value:!0},editorFontSize:{type:"number",value:18},editorLineNumbers:{type:"select",list:[{val:"on"},{val:"off"}],value:"on"},editorWordWrap:{type:"select",list:[{val:"on"},{val:"off"}],value:"off"},gridDataShowLength:{type:"number",value:200},maxSqlHistory:{type:"number",value:5e3},readFileEncoding:{type:"select",list:[{val:"GBK"},{val:"utf-8"}],value:"GBK"}},resApiServer:[{key:location.origin,remark:n.t.lg.current},{key:"https://netnr.zme.ink/api/v1",remark:"Deploy on Render"}],apiServer:"https://netnr.zme.ink/api/v1",apiHeaders:null,apiGetDatabaseName:"/DK/GetDatabaseName",apiGetDatabaseInfo:"/DK/GetDatabase",apiGetTable:"/DK/GetTable",apiGetColumn:"/DK/GetColumn",apiSetTableComment:"/DK/SetTableComment",apiSetColumnComment:"/DK/SetColumnComment",apiGetTableDDL:"/DK/GetTableDDL",apiExecuteSql:"/DK/ExecuteSql",defer:{},envConnsChanged:!1,fileObject:null,fileContent:null,pasteContent:null};for(const e in o.parameterConfig)o.parameterConfig[e].defaultValue=o.parameterConfig[e].value},513:(e,a,t)=>{t.d(a,{P:()=>u});var n=t(484),o=t(769),r=t(644),l=t(3),i=t(821),s=t(372),c=t(178),p=t(268),d=(t(213),t(33)),m=(t(334),t(147)),u={createGrid:(e,a)=>{u.removeGrid(e);var t=`gridOps${e=r.R.hump(e)}`,n=`domGrid${e}`;m.x.themeGrid(i.p.theme),m.x.size(),i.p[t]=new agGrid.Grid(i.p[n],a).gridOptions},removeGrid:e=>{var a=`gridOps${e=r.R.hump(e)}`;i.p[a]&&i.p[a].api&&(i.p[`domFilter${e}`].value="",i.p[a].api.destroy(),i.p[a]=null)},gridComponents:{connStatusBarComponent:class{init(e){this.params=e;var a=s.U.cpGet(1),t=i.p.colorEnv(a.cobj.env),o=n.F.getContainer(e),r=`${a.cobj.type} ${i.p.emoji.link}${a.cobj.alias}`;a.databaseName&&!o.classList.contains("nr-grid-database")&&(r=`${r} ${i.p.emoji.bucket}${a.databaseName}`),this.eGui=document.createElement("div"),this.eGui.style.cssText=`display:flex;align-items:center;color:${t}`,this.eGui.innerHTML=`<small title="${a.cobj.conn}" style="white-space: nowrap;">${r}</small></sl-tooltip>`}getGui(){return this.eGui}}},viewConns:e=>new Promise((a=>{var t=n.F.optionDef({rowData:e,getRowId:e=>e.data.id,defaultColDef:n.F.defaultColDef({editable:!0}),suppressClickEdit:!0,columnDefs:[{field:"alias",headerName:o.t.lg.connAlias,tooltipField:"conn",width:350,checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,cellRenderer:e=>{if(!e.node.group)return e.data.type?i.p.iconSvg(e.data.type,e.value,{library:"nr-icon"}):e.value},cellStyle:e=>{var a=e.node.data&&e.node.data.env;return{color:i.p.colorEnv(a)}}},{field:"group",headerName:o.t.lg.connGroup,width:160,enableRowGroup:!0},{field:"env",headerName:o.t.lg.connEnv,width:120,enableRowGroup:!0,cellRenderer:e=>e.value?e.value:"",cellEditor:"agRichSelectCellEditor",cellEditorParams:{values:i.p.typeEnv},cellStyle:e=>{var a=e.node.data&&e.node.data.env;return{color:i.p.colorEnv(a)}}},{field:"type",headerName:o.t.lg.connType,enableRowGroup:!0,width:160,cellRenderer:e=>e.value?i.p.iconSvg(e.value.toLowerCase(),e.value,{library:"nr-icon"}):"",cellEditor:"agRichSelectCellEditor",cellEditorParams:{values:i.p.typeDB}},{field:"order",headerName:o.t.lg.connOrder,rowDrag:!0,filterParams:n.F.filterParamsDef("Number")},{field:"id",headerName:i.p.emoji.id,width:140,editable:!1},{field:"conn",headerName:o.t.lg.connConnection,width:600,cellEditor:"agLargeTextCellEditor",cellEditorParams:{maxLength:999}},{headerName:o.t.lg.connControl,pinned:"right",width:100,hide:!0,filter:!1,sortable:!1,editable:!1,menuTabs:!1,cellRenderer:class{init(e){this.eGui=document.createElement("div"),e.data&&(this.eGui.innerHTML='\n                                <a href="javascript:void(0);" class="text-decoration-none nr-conn-cell-add" title="新增">➕</a> &nbsp;\n                                <a href="javascript:void(0);" class="text-decoration-none nr-conn-cell-del" title="删除">❌</a>\n                               ',this.eGui.addEventListener("click",(function(a){var t=a.target;if(t.classList.contains("nr-conn-cell-add")){var n={...e.data};n.id=r.R.random(2e4,99999),n.alias+="+",i.p.gridOpsConns.api.applyTransaction({add:[n],addIndex:e.rowIndex+1}),l.$.connsSet(n)}else t.classList.contains("nr-conn-cell-del")&&confirm("确定删除？")&&(i.p.gridOpsConns.api.applyTransaction({remove:[e.data]}),l.$.connsDelete(e.data.id))}),!1))}getGui(){return this.eGui}}}],groupDisplayType:"groupRows",rowDragManaged:!0,rowDragMultiRow:!0,onRowDragEnd:function(e){var a=[],t=1;e.api.forEachNode((e=>{var n=e.data;n.order=t++,a.push(n)})),e.api.applyTransaction({update:a}),l.$.connsSet(a)},onCellValueChanged:function(e){"type"==e.column.colId&&e.api.refreshCells({rowNodes:[e.data],force:!0}),l.$.connsSet(n.F.getAllRows(i.p.gridOpsConns,!0))},onRowDoubleClicked:function(e){e.data&&(s.U.cpGet(1).cobj.id!=e.data.id&&["database","table","column"].forEach((e=>u.removeGrid(e))),s.U.cpSet(1,e.data),d.N.reqDatabaseName(e.data).then((e=>{u.viewDatabase(e).then((()=>{i.p.domTabGroupTree.show("tp1-database")}))})))},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(i.p.domGridConns.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>{var a=e.node,t=a&&a.data,b=i.p.gridOpsConns.api.getSelectedRows(),g=[];i.p.typeDB.forEach((e=>{g.push({name:e,icon:i.p.iconSvg(e),action:function(){var t=a?a.rowIndex+1:n.F.getAllRows(i.p.gridOpsConns,!0).length,o={id:r.R.random(2e4,99999),type:e,alias:"alias",group:"default",order:t+1,env:i.p.typeEnv[0],conn:i.p.resConnTemplate[e]};i.p.gridOpsConns.api.applyTransaction({add:[o],addIndex:t}),l.$.connsSet(o)}})})),g.push("separator"),i.p.resConnDemo.forEach((e=>{g.push({name:`[${e.group}] ${e.alias}`,icon:i.p.iconSvg(e.type),action:function(){var a=n.F.getAllRows(i.p.gridOpsConns,!0);if(a.filter((a=>a.id==e.id)).length){var t=i.p.gridOpsConns.api.getRowNode(e.id);i.p.gridOpsConns.api.ensureIndexVisible(t.rowIndex),i.p.gridOpsConns.api.flashCells({rowNodes:[t]})}else{var o=e;o.order=a.length+1,i.p.gridOpsConns.api.applyTransaction({add:[o],addIndex:a.length}),l.$.connsSet(o)}}})}));var h=[];0==b.length&&t&&b.push(t),b.length&&(h.push({name:`${o.t.lg.confirmDelete}（${b.length}）`,icon:i.p.emoji.ok,action:function(){i.p.gridOpsConns.api.applyTransaction({remove:b}),l.$.connsDelete(b.map((e=>e.id)))}}),b.forEach((e=>{h.push({name:i.p.iconSvg(e.type,e.alias,{library:"nr-icon"}),icon:i.p.iconSvg("trash"),action:function(){i.p.gridOpsConns.api.applyTransaction({remove:[e]}),l.$.connsDelete(e.id)}})})));var f=[];if(t){var x=s.U.cpCurrent(),v=i.p.iconSvg(t.type,t.alias),_=e=>()=>{var a=p.A.buildConnSeeSql(x,e);c.W.tabBuildFast_sql(x,v,a,!0)};switch(f=[{name:o.t.lg.dbEnvInfo,icon:i.p.iconSvg("info-circle"),action:()=>{var e=ndkNoteSQL[t.type].find((e=>"db-env-info"==e.name)),a=e?e.sql:"";c.W.tabBuildFast_sql(x,v,a,!0)}},{name:o.t.lg.dbVarInfo,icon:i.p.iconSvg("info-circle"),action:()=>{var e=ndkNoteSQL[t.type].find((e=>"db-var-info"==e.name)),a=e?e.sql:"";c.W.tabBuildFast_sql(x,v,a,!0)}},{name:o.t.lg.dbDataType,icon:i.p.iconSvg("info-circle"),action:_("DataType")},"separator",{name:o.t.lg.dbCharSet,icon:i.p.iconSvg("body-text"),action:_("CharSet")},{name:o.t.lg.dbCollation,icon:i.p.iconSvg("body-text"),action:_("Collation")},"separator"],t.type){case"SQLite":f=f.concat([{name:o.t.lg.dbView,icon:i.p.iconSvg("grid-3x3")},{name:o.t.lg.dbIndex,icon:i.p.iconSvg("list-columns-reverse")},{name:"序列",icon:i.p.iconSvg("list-ol")},{name:o.t.lg.dbTrigger,icon:i.p.iconSvg("info-circle")}]);break;case"MySQL":case"MariaDB":(f=f.concat([{name:o.t.lg.dbUser,icon:i.p.iconSvg("person-fill"),action:_("User")},{name:o.t.lg.dbSession,icon:i.p.iconSvg("diagram-3-fill"),action:_("Session")}])).splice(f.findIndex((e=>e.name==o.t.lg.dbVarInfo))+1,0,{name:o.t.lg.dbStatusInfo,icon:i.p.iconSvg("info-circle"),action:_("Status")});break;case"Oracle":f=f.concat([{name:o.t.lg.dbUser,icon:i.p.iconSvg("person-fill"),action:_("User")},{name:o.t.lg.dbRole,icon:i.p.iconSvg("people-fill"),action:_("Role")},{name:o.t.lg.dbSession,icon:i.p.iconSvg("diagram-3-fill"),action:_("Session")},{name:o.t.lg.dbLock,icon:i.p.iconSvg("lock-fill"),action:_("Lock")},{name:"表空间",icon:i.p.iconSvg("info-circle"),action:_("TableSpace")}]);break;case"SQLServer":f=f.concat([{name:o.t.lg.dbUser,icon:i.p.iconSvg("person-fill"),action:_("User")},{name:o.t.lg.dbRole,icon:i.p.iconSvg("people-fill"),action:_("Role")},{name:o.t.lg.dbSession,icon:i.p.iconSvg("diagram-3-fill"),action:_("Session")}]);break;case"PostgreSQL":f=f.concat([{name:o.t.lg.dbRole,icon:i.p.iconSvg("people-fill"),action:_("Role")},{name:o.t.lg.dbSession,icon:i.p.iconSvg("diagram-3-fill"),action:_("Session")},{name:o.t.lg.dbLock,icon:i.p.iconSvg("lock-fill"),action:_("Lock")}])}}var E=[{name:o.t.lg.see,icon:i.p.iconSvg("eye"),disabled:null==t,subMenu:f},{name:o.t.lg.newQuery,icon:i.p.emoji.comment,disabled:null==t,action:function(){c.W.tabBuildFast_sql(x,v,"")}},"separator",{name:o.t.lg.openConn,icon:i.p.iconSvg("plug-fill"),disabled:null==t,action:function(){s.U.cpGet(1).cobj.id!=e.node.data.id&&["database","table","column"].forEach((e=>u.removeGrid(e))),s.U.cpSet(1,e.node.data),d.N.reqDatabaseName(e.node.data).then((e=>{u.viewDatabase(e).then((()=>{i.p.domTabGroupTree.show("tp1-database")}))}))}},{name:o.t.lg.createConn,icon:i.p.iconSvg("plug-fill"),subMenu:g},{name:o.t.lg.editConn,icon:i.p.iconSvg("pencil-square"),disabled:null==t,action:function(){e.api.startEditingCell({rowIndex:e.node.rowIndex,colKey:e.column.colId})}},{name:o.t.lg.copyConn,icon:i.p.iconGrid("copy"),disabled:null==t,action:function(){var a={...e.node.data};a.id=r.R.random(),a.alias+="+",i.p.gridOpsConns.api.applyTransaction({add:[a],addIndex:e.node.rowIndex+1}),l.$.connsSet(a)}},{name:o.t.lg.deleteConn,icon:i.p.iconSvg("trash"),disabled:0==h.length,subMenu:h},"separator",{name:o.t.lg.refresh,icon:i.p.iconSvg("arrow-repeat"),action:function(){d.N.reqConns().then((e=>{u.viewConns(e)}))}},"autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){i.p.domGridConns.classList.toggle("nrc-fullscreen"),m.x.size()}},"separator",{name:o.t.lg.save,icon:i.p.iconGrid("save"),subMenu:["csvExport","excelExport","separator",{name:"JSON",icon:i.p.iconGrid("save"),action:function(){i.p.pasteContent=JSON.stringify(n.F.getAllRows(i.p.gridOpsConns)),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}}]},"copy","copyWithHeaders"];return E}});u.createGrid("conns",t),a()})),viewTrunk:(e,a)=>new Promise((a=>{e=[{Level:0,path:["Database-1"]},{Level:1,path:["Database-1","Schema-1"]},{Level:2,path:["Database-1","Schema-1","Type-1"]},{Level:3,path:["Database-1","Schema-1","Type-1","Item-1"]},{Level:3,path:["Database-1","Schema-1","Type-1","Item-2"]}];var t=n.F.optionDef({rowData:e,getRowId:e=>e.data.TableName,rowGroupPanelShow:"never",treeData:!0,getDataPath:function(e){return console.log(arguments),e.path},defaultColDef:{flex:1},autoGroupColumnDef:{headerName:"Trunk",minWidth:300,cellRendererParams:{suppressCount:!0}},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(i.p.domGridTable.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>{e.node&&e.node.data;return[]}});u.createGrid("trunk",t),i.p.domGridTrunk.style.height="90vh",a()})),viewDatabase:e=>new Promise((a=>{var t=n.F.optionDef({rowData:e,getRowId:e=>e.data.DatabaseName,columnDefs:[{headerName:o.t.lg.databaseInfo,children:[n.F.numberCol(),{field:"DatabaseName",headerName:o.t.lg.dbName,tooltipField:"DatabaseName",width:350,cellRenderer:e=>{if(!e.node.group)return i.p.iconSvg("server",e.value)}},{field:"DatabaseOwner",headerName:o.t.lg.dbOwner,enableRowGroup:!0,columnGroupShow:"open"},{field:"DatabaseSpace",headerName:o.t.lg.dbSpace,enableRowGroup:!0,columnGroupShow:"open"},{field:"DatabaseCharset",headerName:o.t.lg.dbCharSet,enableRowGroup:!0,columnGroupShow:"open"},{field:"DatabaseCollation",headerName:o.t.lg.dbCollation,width:260,enableRowGroup:!0,columnGroupShow:"open"},{field:"DatabaseDataLength",headerName:o.t.lg.dbDataSize,columnGroupShow:"open",aggFunc:"sum",cellRenderer:e=>e.value>0?r.R.formatByteSize(e.value):"",filterParams:n.F.filterParamsDef("Number")},{field:"DatabaseLogLength",headerName:o.t.lg.dbLogSize,columnGroupShow:"open",aggFunc:"sum",cellRenderer:e=>e.value>0?r.R.formatByteSize(e.value):"",filterParams:n.F.filterParamsDef("Number")},{field:"DatabaseIndexLength",headerName:o.t.lg.dbIndexSize,columnGroupShow:"open",aggFunc:"sum",cellRenderer:e=>e.value>0?r.R.formatByteSize(e.value):"",filterParams:n.F.filterParamsDef("Number")},{field:"DatabasePath",headerName:o.t.lg.dbDataPath,width:400,columnGroupShow:"open"},{field:"DatabaseLogPath",headerName:o.t.lg.dbLogPath,width:400,columnGroupShow:"open"},{field:"DatabaseCreateTime",headerName:o.t.lg.createTime,width:210,columnGroupShow:"open",filterParams:n.F.filterParamsDef("Date")}]}],statusBar:{statusPanels:[{statusPanel:"connStatusBarComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agTotalAndFilteredRowCountComponent"}]},components:{connStatusBarComponent:u.gridComponents.connStatusBarComponent},onRowDoubleClicked:function(e){if(!e.node.group){var a=s.U.cpGet(1);s.U.cpSet(1,a.cobj,e.node.data.DatabaseName),d.N.reqTable(a.cobj,e.node.data.DatabaseName).then((e=>{u.viewTable(e,a.cobj).then((()=>{i.p.domTabGroupTree.show("tp1-table")}))}))}},onColumnGroupOpened:function(e){if(e.columnGroup.expanded){var a=e.api.getSelectedRows();if(0==a.length)for(var t=e.api.getFirstDisplayedRow(),o=e.api.getLastDisplayedRow(),r=t;r<=o;r++){var l=e.api.getDisplayedRowAtIndex(r);l.group||a.push(l.data)}else n.F.getAllRows(i.p.gridOpsDatabase).length==a.length&&(a=[]);var c=s.U.cpGet(1);d.N.reqDatabaseInfo(c.cobj,a.map((e=>e.DatabaseName)).join(",")).then((e=>{i.p.gridOpsDatabase.api.applyTransactionAsync({update:e})}))}},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(i.p.domGridDatabase.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>{var a=e.node?e.node.data:null,t=[{name:o.t.lg.newQuery,icon:i.p.emoji.comment,disabled:null==a,action:function(){var e=s.U.cpGet(1);e.databaseName=a.DatabaseName;var t=i.p.iconSvg("server",a.DatabaseName);c.W.tabBuildFast_sql(e,t)}},"separator",{name:o.t.lg.openDatabase,icon:i.p.iconSvg("server"),disabled:null==a,action:function(){var e=s.U.cpGet(1);s.U.cpSet(1,e.cobj,a.DatabaseName),d.N.reqTable(e.cobj,a.DatabaseName).then((a=>{u.viewTable(a,e.cobj).then((()=>{i.p.domTabGroupTree.show("tp1-table")}))}))}},{name:o.t.lg.exportData,icon:i.p.iconGrid("save"),disabled:!0},{name:o.t.lg.importData,icon:i.p.iconGrid("save"),disabled:!0},{name:o.t.lg.executeSqlFile,icon:i.p.iconSvg("file-earmark-code"),disabled:!0,action:function(){}},{name:o.t.lg.createDatabase,icon:i.p.iconSvg("server"),action:function(){var e=s.U.cpGet(1),a=i.p.iconSvg("server",e.cobj.alias),t=p.A.buildCreateDatabaseSql(e);c.W.tabBuildFast_sql(e,a,t)}},{name:o.t.lg.dropDatabase,icon:i.p.iconSvg("trash"),disabled:null==a,action:function(){var e=n.F.getSelectedOrRangeRows(i.p.gridOpsDatabase);if(e.length){var a=s.U.cpGet(1),t=e[0].DatabaseName;"PostgreSQL"==a.cobj.type&&(t="postgres");var o=i.p.iconSvg("server",t),r=p.A.buildDropDatabaseSql(a,e);c.W.tabBuildFast_sql(a,o,r)}}},"separator",{name:o.t.lg.refresh,icon:i.p.iconSvg("arrow-repeat"),action:function(){var e=s.U.cpGet(1);d.N.reqDatabaseName(e.cobj,!0).then((e=>{u.viewDatabase(e)}))}},"autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){i.p.domGridDatabase.classList.toggle("nrc-fullscreen"),m.x.size()}},"separator",{name:o.t.lg.save,icon:i.p.iconGrid("save"),subMenu:["csvExport","excelExport","separator",{name:"JSON",icon:i.p.iconGrid("save"),action:function(){i.p.pasteContent=JSON.stringify(n.F.getAllRows(i.p.gridOpsDatabase)),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}}]},"copy","copyWithHeaders","separator","chartRange"];return t}});if(u.setDisplayItem(t.columnDefs[0].children),u.createGrid("database",t),e.length>i.p.parameterConfig.autoFilterDatabaseNumber.value){var l,b=s.U.cpGet(1),g="Oracle"==b.cobj.type?"user id=":"database=",h=b.cobj.conn.split(";").filter((e=>e.toLowerCase().startsWith(g)));if(h.length){l=h[0].split("=").pop();try{i.p.gridOpsDatabase.api.setFilterModel({DatabaseName:{filterType:"multi",filterModels:[null,{values:[l],filterType:"set"}]}})}catch(e){console.debug(e)}}}a()})),viewTable:(e,a)=>new Promise((t=>{var b="SQLite"==a.type,g=["SQLServer","PostgreSQL"].includes(a.type),h=n.F.optionDef({rowData:e,getRowId:e=>`${e.data.SchemaName}.${e.data.TableName}`,rowGroupPanelShow:"never",columnDefs:[n.F.numberCol(),{field:"TableName",tooltipField:"TableName",headerName:o.t.lg.tableName,width:350,cellRenderer:e=>{var a=e.value;return g&&e.data&&(a=`${e.data.SchemaName}.${e.value}`),null==a?"":i.p.iconSvg("table",a)}},{field:"TableComment",tooltipField:"TableComment",headerName:o.t.lg.tableComment,width:290,hide:b,editable:!b,cellEditor:"agLargeTextCellEditor",cellEditorParams:{maxLength:999}},{field:"TableRows",headerName:o.t.lg.tableRows,filterParams:n.F.filterParamsDef("Number"),aggFunc:"sum",valueFormatter:e=>{if(e.value)return e.value.toLocaleString("en-US")}},{field:"TableDataLength",headerName:o.t.lg.tableDataSize,width:160,aggFunc:"sum",cellRenderer:e=>r.R.formatByteSize(e.value),filterParams:n.F.filterParamsDef("Number")},{field:"TableIndexLength",headerName:o.t.lg.tableIndexSize,width:160,aggFunc:"sum",cellRenderer:e=>r.R.formatByteSize(e.value),filterParams:n.F.filterParamsDef("Number")},{field:"TableCollation",headerName:o.t.lg.tableCollation,width:260},{field:"TableCreateTime",headerName:o.t.lg.createTime,width:220,filterParams:n.F.filterParamsDef("Date")},{field:"TableModifyTime",headerName:o.t.lg.updateTime,width:220,filterParams:n.F.filterParamsDef("Date")},{field:"TableEngine",headerName:"Engine"},{field:"SchemaName",headerName:o.t.lg.schemaName,width:200},{field:"TableOwner",headerName:o.t.lg.tableOwner},{field:"TableSpace",headerName:o.t.lg.tableSpace},{field:"TableType",headerName:o.t.lg.tableCatagory}],groupIncludeFooter:!0,groupIncludeTotalFooter:!0,statusBar:{statusPanels:[{statusPanel:"connStatusBarComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agTotalAndFilteredRowCountComponent"}]},components:{connStatusBarComponent:u.gridComponents.connStatusBarComponent},onCellDoubleClicked:function(e){if("TableComment"!=e.column.colId){var a=e.node.data,t=s.U.cpGet(1);s.U.cpSet(1,t.cobj,t.databaseName);var n=a.SchemaName?`${a.SchemaName}.${a.TableName}`:a.TableName;d.N.reqColumn(t.cobj,t.databaseName,n).then((e=>{u.viewColumn(e,t.cobj).then((()=>{i.p.domTabGroupTree.show("tp1-column")}))}))}},onCellValueChanged:function(e){if("TableComment"==e.column.colId){var a=s.U.cpGet(1),t=e.data;d.N.setTableComment(a.cobj,t.TableName,e.value,t.SchemaName,a.databaseName).then((()=>{l.$.ccBrushTable()})).catch((()=>{var a={...e.data};a.TableComment=e.oldValue,e.api.applyTransaction({update:[a]})}))}},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(i.p.domGridTable.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>{var a=e.node?e.node.data:null,t="SQLite"==s.U.cpGet(1).cobj.type,l=[{name:o.t.lg.tableDesign,disabled:null==a,icon:i.p.iconSvg("layout-three-columns"),action:function(){var e=n.F.getSelectedOrRangeRows(i.p.gridOpsTable),a="";i.p.gridOpsTable.rowData.length!=e.length&&(a=e.map((e=>null==e.SchemaName?e.TableName:`${e.SchemaName}.${e.TableName}`)).join(","));var t=s.U.cpGet(1);s.U.cpSet(1,t.cobj,t.databaseName),d.N.reqColumn(t.cobj,t.databaseName,a).then((e=>{u.viewColumn(e,t.cobj).then((()=>{i.p.domTabGroupTree.show("tp1-column"),s.U.stepSave()}))}))}},{name:o.t.lg.tableData,icon:i.p.iconSvg("grid-3x3-gap-fill"),disabled:null==a,action:function(){var e=n.F.getSelectedOrRangeRows(i.p.gridOpsTable),a=s.U.cpGet(1),t=e.map((e=>p.A.buildSelectSql(a,e))).join(";\r\n"),o=i.p.iconSvg("table",e[0].TableName);c.W.tabBuildFast_sql(a,o,t,e.length<6)}},{name:o.t.lg.tableGenerateSQL,icon:i.p.iconSvg("file-earmark-code"),subMenu:[{name:"SELECT",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Select")}},{name:"INSERT",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Insert")}},{name:"UPDATE",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Update")}},{name:"DELETE",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Delete")}},{name:"TRUNCATE",icon:i.p.iconSvg("file-earmark-code"),disabled:t,action:function(){p.A.buildNewTabSql("Truncate")}},{name:"DROP",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Drop")}},{name:"COUNT",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("Count")}},"separator",{name:"DDL",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.buildNewTabSql("DDL")}}]},{name:o.t.lg.exportData,icon:i.p.iconGrid("save"),disabled:!0},{name:o.t.lg.importData,icon:i.p.iconGrid("save"),disabled:!0},"separator",{name:o.t.lg.refresh,icon:i.p.iconSvg("arrow-repeat"),action:function(){var e=s.U.cpGet(1);d.N.reqTable(e.cobj,e.databaseName,!0).then((a=>{u.viewTable(a,e.cobj)}))}},"autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){i.p.domGridTable.classList.toggle("nrc-fullscreen"),m.x.size()}},"separator",{name:o.t.lg.save,icon:i.p.iconGrid("save"),subMenu:["csvExport","excelExport","separator",{name:"JSON",icon:i.p.iconGrid("save"),action:function(){i.p.pasteContent=JSON.stringify(n.F.getAllRows(i.p.gridOpsTable)),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}},{name:"Markdown",icon:i.p.iconGrid("save"),action:function(){var e=i.p.gridOpsTable.columnApi.getAllGridColumns(),a=[];for(let n=1;n<e.length;n++){var t=e[n];t.visible&&a.push(t.colDef)}i.p.pasteContent=r.R.rowsToMarkdown(n.F.getAllRows(i.p.gridOpsTable),a,{htmlCull:!0}),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}}]},"copy","copyWithHeaders","separator","chartRange"];return l}});u.setDisplayItem(h.columnDefs),u.createGrid("table",h),t()})),viewColumn:(e,a)=>new Promise((t=>{var l="SQLite"==a.type,c=n.F.optionDef({rowData:e,getRowId:e=>`${e.data.SchemaName}.${e.data.TableName}.${e.data.ColumnName}`,groupSelectsChildren:!0,groupDefaultExpanded:2,columnDefs:[n.F.numberCol({hide:!0}),{field:"SchemaName",headerName:o.t.lg.schemaName,rowGroup:!0,enableRowGroup:!0,width:200,hide:!0},{field:"TableName",headerName:o.t.lg.tableName,rowGroup:!0,enableRowGroup:!0,width:350,hide:!0},{field:"TableComment",headerName:o.t.lg.tableComment,width:300,hide:!0},{field:"ColumnName",headerName:o.t.lg.columnName,width:200,hide:!0},{field:"ColumnComment",tooltipField:"ColumnComment",headerName:o.t.lg.columnComment,width:330,hide:l,editable:!l,cellEditor:"agLargeTextCellEditor",cellEditorParams:{maxLength:999}},{field:"ColumnType",headerName:o.t.lg.columnTypeLength,width:180,hide:!0},{field:"DataType",headerName:o.t.lg.columnType,width:130,hide:!0},{field:"DataLength",headerName:o.t.lg.columnLength,hide:!0,filterParams:n.F.filterParamsDef("Number")},{field:"DataScale",headerName:o.t.lg.columnScale,hide:!0,filterParams:n.F.filterParamsDef("Number")},{field:"ColumnOrder",headerName:o.t.lg.columnOrder,filterParams:n.F.filterParamsDef("Number")},{field:"PrimaryKey",headerName:o.t.lg.columnPrimary,hide:!0,cellRenderer:e=>e.value>0?i.p.emoji.key+e.value:""},{field:"AutoIncr",headerName:o.t.lg.columnAutoIncrement,cellRenderer:e=>1==e.value?i.p.emoji.incr:""},{field:"IsNullable",headerName:o.t.lg.columnIsNullable,hide:!0,cellRenderer:e=>0==e.value?i.p.emoji.star:""},{field:"ColumnDefault",headerName:o.t.lg.columnDefault,width:120}],autoGroupColumnDef:n.F.autoGroupColumnDef({field:"ColumnName",headerName:o.t.lg.group,width:560,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,filterValueGetter:e=>null!=e.data.SchemaName?`${e.data.SchemaName}.${e.data.TableName}`:e.data.TableName,cellRendererParams:{checkbox:!0,suppressCount:!0,suppressEnterExpand:!0,suppressDoubleClickExpand:!0,innerRenderer:function(e){if(!e.node.group){var a=[];return e.data.PrimaryKey>0&&a.push(i.p.emoji.key+e.data.PrimaryKey),a.push(e.data.ColumnType),1==e.data.IsNullable?a.push("null"):a.push("not null"),i.p.iconSvg("bookshelf",`${e.value} <span class="opacity-75">( ${a.join(", ")} )</span>`)}switch(e.node.field){case"SchemaName":var t=r.R.groupBy(i.p.gridOpsColumn.rowData.filter((a=>a[e.node.field]==e.value)),(e=>e.TableName));return`<b>${e.value} (${t.length})</b>`;case"TableName":t="SchemaName"==e.node.parent.field?i.p.gridOpsColumn.rowData.filter((a=>a[e.node.parent.field]==e.node.parent.key&&a[e.node.field]==e.value)):i.p.gridOpsColumn.rowData.filter((a=>a[e.node.field]==e.value));return`<b>${e.value} (${t.length})</b> <span title="${t[0].TableComment||""}">${t[0].TableComment||""}</span>`;default:return e.value}}}}),statusBar:{statusPanels:[{statusPanel:"connStatusBarComponent",align:"left"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agTotalAndFilteredRowCountComponent"}]},components:{connStatusBarComponent:u.gridComponents.connStatusBarComponent},onCellValueChanged:function(e){if("ColumnComment"==e.column.colId){var t=s.U.cpGet(1),n=e.data;d.N.setColumnComment(a,n.TableName,n.ColumnName,e.value,n.SchemaName,t.databaseName).then((()=>{})).catch((()=>{var a={...e.data};a.columnComment=e.oldValue,e.api.applyTransaction({update:[a]})}))}},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(i.p.domGridColumn.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>{var a=["expandAll","contractAll","separator",{name:o.t.lg.refresh,icon:i.p.iconSvg("arrow-repeat"),action:function(){var e=s.U.cpGet(1),a=r.R.groupBy(i.p.gridOpsColumn.rowData,(e=>null==e.SchemaName?e.TableName:`${e.SchemaName}.${e.TableName}`)).join(",");d.N.reqColumn(e.cobj,e.databaseName,a,!0).then((a=>{u.viewColumn(a,e.cobj)}))}},"autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){i.p.domGridColumn.classList.toggle("nrc-fullscreen"),m.x.size()}},"separator",{name:o.t.lg.save,icon:i.p.iconGrid("save"),subMenu:["csvExport","excelExport","separator",{name:"JSON",icon:i.p.iconGrid("save"),action:function(){i.p.pasteContent=JSON.stringify(n.F.getAllRows(i.p.gridOpsColumn)),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}},{name:"Markdown",icon:i.p.iconGrid("save"),action:function(){var e=i.p.gridOpsColumn.columnApi.getAllGridColumns(),a=[],t=!1;for(let n=1;n<e.length;n++){var l=e[n];l.visible&&a.push(l.colDef),"TableName"==l.colId&&l.rowGroupActive&&(t=!0)}if(t){var s=[],c=n.F.getAllRows(i.p.gridOpsColumn);r.R.groupBy(c,(e=>e.TableName)).forEach((e=>{var t=c.filter((a=>a.TableName==e)),n=r.R.markdownEncode(t[0].TableComment),o=r.R.rowsToMarkdown(t,a);s.push(`### ${e}\n${n}\n\n`+o)})),i.p.pasteContent=s.join("\n\n")}else i.p.pasteContent=r.R.rowsToMarkdown(n.F.getAllRows(i.p.gridOpsColumn),a);r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}}]},"copy","copyWithHeaders"];return a}});u.setDisplayItem(c.columnDefs),u.createGrid("column",c),t()})),setDisplayItem:(e,a)=>{var t=[];switch(a=a||s.U.cpGet(1).cobj.type){case"SQLite":t=["DatabaseOwner","DatabaseSpace","DatabaseCollation","DatabaseLogLength","DatabaseIndexLength","DatabaseLogPath","TableDataLength","TableIndexLength","TableCollation","TableCreateTime","TableModifyTime","TableEngine","SchemaName","TableOwner","TableSpace","TableType","TableComment","ColumnComment"];break;case"MySQL":case"MariaDB":t=["DatabaseOwner","DatabaseSpace","DatabaseLogLength","DatabaseLogPath","TableModifyTime","TableOwner","TableSpace"];break;case"Oracle":t=["DatabaseLogLength","DatabaseLogPath","TableCollation","TableEngine","SchemaName"];break;case"SQLServer":t=["DatabaseSpace","DatabaseCharset","DatabaseIndexLength","TableCollation","TableEngine","TableSpace"];break;case"PostgreSQL":t=["DatabaseLogLength","DatabaseIndexLength","DatabaseLogPath","DatabaseCreateTime","TableCollation","TableCreateTime","TableModifyTime","TableEngine","TableSpace"]}for(var n=e.length-1;n>=0;n--){var o=e[n];t.includes(o.field)&&e.splice(n,1)}},viewExecuteSql:(e,a)=>new Promise((t=>{var l=c.W.tabKeys[a];null==l&&t(),l.grids&&l.grids.forEach((e=>e.gridOps&&e.gridOps.api.destroy())),l.grids=[],l.esdata=e,l.domTabGroupEsql.innerHTML="",l.domTabGroupEsql.getAttribute("data-bind")||(l.domTabGroupEsql.setAttribute("data-bind",!0),l.domTabGroupEsql.addEventListener("sl-close",(async e=>{var a=e.target,t=l.domTabGroupEsql.querySelector(`sl-tab-panel[name="${a.panel}"]`);if(a.active){var n=a.previousElementSibling||a.nextElementSibling;n.nodeName!="sl-tab-panel".toUpperCase()&&l.domTabGroupEsql.show(n.panel)}a.remove(),t.remove(),c.W.tabNavFix();for(var o=0;o<l.grids.length;o++){if(l.grids[o].tpkey==a.panel){l.grids.splice(o,1);break}}0==l.domTabGroupEsql.children.length&&m.x.setSpliterSize(l.domTabPanel.children[0],"no"),e.stopPropagation()})),l.domTabGroupEsql.addEventListener("sl-tab-show",(function(e){m.x.size()}),!1)),new Promise((t=>{for(const t in e)if("Item2"!=t){var c,d=0;for(const A in e[t]){d++,e.Item2&&A in e.Item2&&(c=e.Item2[A]);var u=e[t][A],b=[],g="Result",h=`tp3-${t}-${d}`;"Item1"==t?(["sql-notes","sql-historys"].includes(A)?g=r.R.hump(o.t.lg[`storageKey_${A.split("-").pop()}`]):c&&(g=c[0].BaseTableName||g),d>1&&(g+=" - "+d),g=i.p.iconSvg("grid-3x3-gap-fill",g)):g=i.p.iconSvg("info-circle","Info");var f=document.createElement("div");f.innerHTML=`\n<sl-tab slot="nav" panel="${h}" closable>${g}</sl-tab>\n<sl-tab-panel name="${h}">\n    <sl-input class="nr-filter-execute-sql mb-2" placeholder="${o.t.lg.search}" size="small">\n        <sl-icon name="search" slot="prefix"></sl-icon>\n    </sl-input>\n    <div class="nr-grid-execute-sql" data-key="${a}"></div>\n</sl-tab-panel>\n                `;let R=f.querySelector("sl-tab"),O=f.querySelector("sl-tab-panel"),k=f.querySelector(".nr-filter-execute-sql"),I=f.querySelector(".nr-grid-execute-sql");var x=l.domTabGroupEsql.querySelectorAll("sl-tab-panel");l.domTabGroupEsql.insertBefore(R,x[0]),l.domTabGroupEsql.appendChild(O),f.remove();var v=function(e){e.api.sizeColumnsToFit(),m.x.size()};if(u.length>0){"Item1"==t&&b.push(n.F.numberCol());var _=u[0];for(var E in _){var S=[],y=[],T={field:E,headerName:E,headerTooltip:E,width:200,enableRowGroup:!0,cellRenderer:e=>null==e.value?e.node.group?null:r.R.formatNull():e.value,headerComponentParams:{template:null}};if(c){var C=c.find((e=>e.ColumnName==E));if(C){var D=C.DataTypeName;null==D&&(D=C.DataType.split(",")[0].split(".")[1].toLowerCase()),C.IsKey&&S.push(i.p.emoji.key),S.push(C.ColumnName),S.push(D),S.push(C.ColumnSize),S.push(C.AllowDBNull?"null":"not null");var N=s.U.cpGet(l.tpkey).cobj.type,L={DataType:null==C.DataTypeName?D.replace(/\d+/g,""):C.DataTypeName,DataLength:C.ColumnSize,PrimaryKey:C.IsKey?1:0};switch(p.A.sqlDataType(N,L).category){case"string":T.width=Math.min(10*C.ColumnSize,500),C.DataType.startsWith("System.Byte")?T.cellRenderer=e=>null==e.value?e.node.group?null:r.R.formatNull():`<span role="button" data-cmd="view-cell-base64" data-val="${e.value}">${i.p.emoji.see}Base64</span>`:T.cellRenderer=e=>{var a=i.p.parameterConfig.gridDataShowLength.value,t=e.value;return null!=t&&"string"!=typeof t&&(t=t.toString()),null==t?e.node.group?null:r.R.formatNull():t.length>a?`${i.p.emoji.cut} ${r.R.htmlEncode(t.substring(0,a))} ...`:r.R.htmlEncode(t)},y.push(i.p.iconSvg("type"));break;case"number":y.push(i.p.iconSvg("123")),T.filterParams=n.F.filterParamsDef("Number");break;case"date":y.push(i.p.iconSvg("clock")),T.width=280,T.filterParams=n.F.filterParamsDef("Date")}C.IsKey&&y.push(i.p.iconSvg("key","",{className:"nrc-text-orange"})),T.width=Math.max(T.width,200),T.width=Math.min(T.width,500)}}else S.push(E);T.headerTooltip=S.join(" "),T.headerComponentParams.template=`\n                            <div class="ag-cell-label-container" role="presentation">\n                                <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n                                <div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n                                    <sup class="ag-header-type-icon">${y.join("")}</sup>\n                                    <span ref="eText" class="ag-header-cell-text" unselectable="on"></span>\n                                    <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                                    <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                                    <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                                    <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                                    <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n                                </div>\n                            </div>`,b.push(T)}b.length>3&&(v=function(){m.x.size()})}else if(A in(e.Item2||{})){for(const a in e.Item2[A]){var w=e.Item2[A][a];b.push({headerName:w.ColumnName,field:w.ColumnName,headerTooltip:E})}v=function(e){e.columnApi.autoSizeAllColumns(),m.x.size()}}let M=n.F.optionDef({rowData:u,columnDefs:b,groupDisplayType:"groupRows",statusBar:{statusPanels:[{statusPanel:"agSelectedRowCountComponent",align:"right"},{statusPanel:"agTotalAndFilteredRowCountComponent",align:"right"},{statusPanel:"agAggregationComponent",align:"left"}]},onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(I.classList.toggle("nrc-fullscreen"),m.x.size())},getContextMenuItems:e=>[{name:"NULL",disabled:!0},{name:o.t.lg.delete,icon:i.p.iconGrid("cross"),disabled:!0},"separator",{name:o.t.lg.save,icon:i.p.iconGrid("save"),subMenu:["csvExport","excelExport","separator",{name:"JSON",icon:i.p.iconGrid("save"),action:function(){i.p.pasteContent=JSON.stringify(n.F.getAllRows(M)),r.R.clipboard(i.p.pasteContent).then((()=>{r.R.output(o.t.lg.copiedToClipboard)}))}},{name:"Markdown",icon:i.p.iconGrid("save")}]},"copy","copyWithHeaders",{name:o.t.lg.dataGenerateSQL,icon:i.p.iconSvg("file-earmark-code"),subMenu:[{name:"INSERT",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.dataNewSql(e,"Insert")}},{name:"UPDATE",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.dataNewSql(e,"Update")}},{name:"DELETE",icon:i.p.iconSvg("file-earmark-code"),action:function(){p.A.dataNewSql(e,"Delete")}}]},"separator","autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){I.classList.toggle("nrc-fullscreen"),m.x.size()}},"separator","chartRange"],onGridReady:v});"Item1"!=t&&(M.columnDefs.forEach((e=>{delete e.width,e.flex=1})),delete M.onGridReady,M.rowGroupPanelShow="never",M.headerHeight=0,M.getContextMenuItems=()=>["copy","csvExport","excelExport","separator","autoSizeAll","resetColumns",{name:o.t.lg.fullScreenSwitch,icon:i.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){I.classList.toggle("nrc-fullscreen"),m.x.size()}}]),l.grids.push({tpkey:h,domTab:R,domTabPanel:O,domFilterExecuteSql:k,domGridExecuteSql:I,opsExecuteSql:M})}}t()})).then((()=>{c.W.tabNavFix(),2==l.grids.length&&0==l.grids[0].opsExecuteSql.columnDefs.length?l.domTabGroupEsql.show(l.grids[1].tpkey):l.domTabGroupEsql.show(l.grids[0].tpkey),m.x.setSpliterSize(l.domTabPanel.children[0],"auto"),m.x.themeGrid(i.p.theme),m.x.size(),t(l)}))}))}}},__webpack_module_cache__={};function __webpack_require__(e){var a=__webpack_module_cache__[e];if(void 0!==a)return a.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,a)=>{for(var t in a)__webpack_require__.o(a,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},__webpack_require__.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);var __webpack_exports__={};(()=>{var e=__webpack_require__(484),a=__webpack_require__(147),t=__webpack_require__(213),n=__webpack_require__(334),o=__webpack_require__(644),r=__webpack_require__(722),l=__webpack_require__(268),i=__webpack_require__(408),s=__webpack_require__(769),c=__webpack_require__(33),p=__webpack_require__(384),d=__webpack_require__(372),m=__webpack_require__(3),u=__webpack_require__(178),b=__webpack_require__(821),g=__webpack_require__(513),h={dom:()=>{var e=document.createElement("div");e.className="nr-main",e.style.visibility="hidden";var a=[`<sl-input class="nr-text-api-server mb-2" placeholder="${s.t.lg.setServerPlaceholder}"></sl-input>`];b.p.resApiServer.forEach((e=>{a.push(`\n            <sl-tooltip content="${e.remark??e.key}">\n                <sl-button class="mb-2" size="small" data-cmd="set-api-server" data-val="${e.key}" >${e.key}</sl-button>\n            </sl-tooltip>\n            `)}));var t=[];b.p.resTheme.forEach((e=>{t.push(`<sl-menu-item data-cmd="theme" data-val="${e.key}">${b.p.iconSvg(e.icon,s.t.lg[`themeKey_${e.key}`],{slot:"prefix"})}</sl-menu-item>`)}));var n=[];s.t.resLanguage.forEach((e=>{n.push(`<sl-menu-item data-cmd="language" data-val="${e.key}">${b.p.iconSvg(e.icon,s.t.lg[`languageKey_${e.key.replace("-","_")}`],{slot:"prefix"})}</sl-menu-item>`)}));var r=[];r.push('<div class="nr-config-export-items mb-2">');for(const e in m.$.keys){var l=m.$.keys[e].key,i=s.t.lg[`storageKey_${l}`];r.push(`<sl-checkbox checked class="me-3" data-val="${l}">${i}</sl-checkbox>`)}r.push("</div>"),r.push(`\n        <sl-button type="default" class="mb-2" data-cmd="config-export">${b.p.emoji.save}${s.t.lg.setExportSave}</sl-button>\n        <sl-button type="default" class="mb-2" data-cmd="config-export-clipboard">${b.p.emoji.clipboard}${s.t.lg.setExportSaveClipboard}</sl-button>\n        `);var c=[];c.push(`\n        <sl-textarea label="ndk.json" class="mb-2" placeholder="${s.t.lg.setImportPlaceholder}"></sl-textarea>\n        <sl-button type="default" data-cmd="config-import">${b.p.emoji.save}${s.t.lg.setImportSave}</sl-button>\n        `),o.R.supportClipboard&&c.push(`<sl-button type="default" data-cmd="config-import-clipboard">${b.p.emoji.clipboard}${s.t.lg.setImportSaveClipboard}</sl-button>`),e.innerHTML=`\n        \x3c!--顶部--\x3e\n        <div class="nr-box-head">\n            \x3c!--菜单--\x3e\n            <sl-dropdown class="nr-menu mb-2">\n                <sl-button type="default" slot="trigger" size="small" caret class="nr-request-status">${b.p.emoji.menu}${s.t.lg.menu}</sl-button>\n                <sl-menu>\n                    <sl-menu-item data-cmd="setting-manager">\n                        ${b.p.iconSvg("gear",s.t.lg.setting,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-divider></sl-divider>\n                    ${t.join("\n")}\n                    <sl-divider></sl-divider>\n                    ${n.join("\n")}\n                    <sl-divider></sl-divider>\n                    <sl-menu-item data-cmd="about">\n                        ${b.p.iconSvg("info-circle",s.t.lg.about,{slot:"prefix"})}\n                    </sl-menu-item>\n                </sl-menu>\n            </sl-dropdown>\n\n            \x3c!--设置弹窗--\x3e\n            <sl-dialog label="${b.p.emoji.cog}${s.t.lg.setTitle}" class="nr-dialog-setting dialog-width" style="--width: 70vw;">\n                <sl-details summary="${b.p.emoji.server}${s.t.lg.setServerTitle}" open>\n                    ${a.join("\n")}\n                </sl-details>\n                <sl-details summary="${b.p.emoji.parameter}${s.t.lg.setParameterConfigTitle}" open>\n                    <div class="nr-parameter-config"></div>\n                </sl-details>\n                <sl-details summary="${b.p.emoji.io}${s.t.lg.setExportTitle}" open>\n                    ${r.join("\n")}                    \n                    <sl-divider></sl-divider>\n                    ${c.join("\n")}                    \n                </sl-details>\n            </sl-dialog>\n\n            \x3c!--新建查询--\x3e\n            <sl-button class="mb-2" data-cmd="new-query" size="small">${b.p.emoji.comment}${s.t.lg.newQuery}</sl-button>\n\n            <sl-divider vertical></sl-divider>\n            \n            \x3c!--快捷（数据库）--\x3e\n            <sl-dropdown class="nr-quick-db mb-2">\n                <sl-button slot="trigger" size="small" caret>${b.p.emoji.quick}${s.t.lg.quick}</sl-button>\n                <sl-menu>\n                    <sl-menu-item data-cmd="quick-dbenvinfo">\n                        ${b.p.iconSvg("info-circle",s.t.lg.dbEnvInfo,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-menu-item data-cmd="quick-dbparamsinfo">\n                        ${b.p.iconSvg("info-circle",s.t.lg.dbParamsInfo,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-divider></sl-divider>\n                    <sl-menu-item data-cmd="quick-generate-code">\n                        ${b.p.iconSvg("file-earmark-code",s.t.lg.generateCode,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-menu-item data-cmd="quick-generate-faker">\n                        ${b.p.iconSvg("box",s.t.lg.generateFaker,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-divider></sl-divider>\n                    <sl-menu-item data-cmd="open-link" data-val="https://www.connectionstrings.com">\n                        ${b.p.iconSvg("box-arrow-up-right","ConnectionString",{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-menu-item data-cmd="open-link" data-val="https://database.guide">\n                        ${b.p.iconSvg("box-arrow-up-right","Guide",{slot:"prefix"})}\n                    </sl-menu-item>\n                </sl-menu>\n            </sl-dropdown>\n\n            \x3c!--快捷（应用）--\x3e\n            <sl-dropdown class="nr-quick-app mb-2">\n                <sl-button slot="trigger" size="small" caret>${b.p.emoji.package}${s.t.lg.package}</sl-button>\n                <sl-menu>\n                    <sl-menu-item data-cmd="quick-notes">\n                        ${b.p.iconSvg("journal-code",s.t.lg.note,{slot:"prefix"})}\n                    </sl-menu-item>\n                    <sl-menu-item data-cmd="quick-links">\n                        ${b.p.iconSvg("link-45deg",s.t.lg.link,{slot:"prefix"})}\n                    </sl-menu-item>\n                </sl-menu>\n            </sl-dropdown>\n\n            <sl-divider vertical></sl-divider>\n            \n            \x3c!--当前选项卡连接信息--\x3e\n            <sl-dropdown class="nr-tabconns mb-2"></sl-dropdown>\n            <sl-dropdown class="nr-tabdatabase mb-2"></sl-dropdown>\n\n            <div>\n                \x3c!--输出--\x3e\n                <div class="nr-output">\n                    <sl-icon-button slot="trigger" name="info-circle"></sl-icon-button>\n                    <div class="nr-output-body">\n                        <sl-input class="nr-filter-output mb-2" size="small" placeholder="${s.t.lg.search}">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-output" style="width:40em;max-width:100%;height:30vh"></div>\n\n                        \x3c!--队列--\x3e\n                        <div class="nr-grid-queue" style="width:40em;max-width:100%;height:5em;margin-top:0.3em"></div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n        \x3c!--分离器主体--\x3e\n        <div class="nr-spliter-body nrc-spliter-horizontal">\n\n            \x3c!--主体 左--\x3e\n            <div class="nr-box-left nrc-spliter-item">\n                \x3c!--选项卡--\x3e\n                <sl-tab-group class="nr-tab-group-tree">\n                    <sl-tab slot="nav" panel="tp1-conns">${b.p.iconSvg("plug-fill",s.t.lg.tab1Conns)}</sl-tab>\n                    <sl-tab slot="nav" panel="tp1-trunk" style="display:none">${b.p.iconSvg("diagram-3-fill","Trunk")}</sl-tab>\n                    <sl-tab slot="nav" panel="tp1-database">${b.p.iconSvg("server",s.t.lg.tab1Database)}</sl-tab>\n                    <sl-tab slot="nav" panel="tp1-table">${b.p.iconSvg("table",s.t.lg.tab1Table)}</sl-tab>\n                    <sl-tab slot="nav" panel="tp1-column">${b.p.iconSvg("bookshelf",s.t.lg.tab1Column)}</sl-tab>\n\n                    <sl-tab-panel name="tp1-conns">\n                        <sl-input class="nr-filter-conns mb-2" placeholder="${s.t.lg.search}" size="small">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-conns"></div>\n                    </sl-tab-panel>\n                    <sl-tab-panel name="tp1-trunk" style="display:none">\n                        <sl-input class="nr-filter-trunk mb-2" placeholder="${s.t.lg.search}" size="small">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-trunk"></div>\n                    </sl-tab-panel>\n                    <sl-tab-panel name="tp1-database">\n                        <sl-input class="nr-filter-database mb-2" placeholder="${s.t.lg.search}" size="small">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-database"></div>\n                    </sl-tab-panel>\n                    <sl-tab-panel name="tp1-table">\n                        <sl-input class="nr-filter-table mb-2" placeholder="${s.t.lg.search}" size="small">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-table"></div>\n                    </sl-tab-panel>\n                    <sl-tab-panel name="tp1-column">\n                        <sl-input class="nr-filter-column mb-2" placeholder="${s.t.lg.search}" size="small">\n                            <sl-icon name="search" slot="prefix"></sl-icon>\n                        </sl-input>\n                        <div class="nr-grid-column"></div>\n                    </sl-tab-panel>\n                </sl-tab-group>\n            </div>\n            <div class="nrc-spliter-bar"></div>\n            <div class="nrc-spliter-bar-active"></div>\n\n            \x3c!--主体 右--\x3e\n            <div class="nr-box-right nrc-spliter-item">\n                <sl-tab-group class="nr-tab-group-body">\n                </sl-tab-group>\n            </div>\n        </div>\n        `,document.body.appendChild(e)},event:function(){if(document.body.addEventListener("click",(function(e){var t=e.target.getAttribute("data-cmd");null!=t&&a.x.actionRun(t,e.target)}),!1),document.body.addEventListener("mousedown",(function(e){if(e.target.classList.contains("nrc-spliter-bar")){var t,n,o=e.target.parentElement,r=o.children,l=r[0],i=r[2];e.target.parentElement.classList.contains("nrc-spliter-horizontal")?(t=function(a){var t=l.clientWidth-(e.clientX-a.clientX);t=Math.max(0,t),t=Math.min(o.clientWidth-i.clientWidth,t),i.style.display="block",i.style.left=`${t}px`},n=function(){i.style.display="none";var e=i.style.left;e.includes("%")||(e=(parseInt(i.style.left||l.clientWidth)/o.clientWidth*100).toFixed(4)+"%"),a.x.setSpliterSize(o,e),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),this.releaseCapture&&this.releaseCapture()}):(t=function(a){var t=l.clientHeight-(e.clientY-a.clientY);t=Math.max(0,t),t=Math.min(o.clientHeight-i.clientHeight,t),i.style.display="block",i.style.top=`${t}px`},n=function(){i.style.display="none";var e=i.style.top;e.includes("%")||(e=(parseInt(i.style.top||l.clientHeight)/o.clientHeight*100).toFixed(4)+"%"),i.style.top=e,l.style.height=e,i.nextElementSibling.style.height=`calc(100% - var(--nrc-spliter-width) - ${e})`,a.x.size(),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),this.releaseCapture&&this.releaseCapture()}),window.addEventListener("mousemove",t,!1),window.addEventListener("mouseup",n,!1),this.setCapture&&this.setCapture()}}),!1),document.body.addEventListener("dblclick",(function(e){if(e.target.classList.contains("nrc-spliter-bar")){var t,n=e.target.parentElement;(t=n.classList.contains("nrc-spliter-horizontal")?(e.clientY-e.target.getBoundingClientRect().top)/e.target.clientHeight:(e.clientX-e.target.getBoundingClientRect().left)/e.target.clientWidth)<.33333?a.x.setSpliterSize(n,"82%"):t>.33333&&t<.66666?a.x.setSpliterSize(n,"50%"):a.x.setSpliterSize(n,"18%")}})),document.body.addEventListener("transitionend",(function(e){if(e.target.classList.contains("nrc-spliter-item")&&["width","height"].indexOf(e.propertyName)>-1){var t=e.target.parentElement;t.classList.contains("nr-spliter-body")&&d.U.stepSave(),t.classList.contains("nr-spliter-sql")&&a.x.size()}})),b.p.domTabGroupTree.addEventListener("sl-tab-show",(function(){new Promise((e=>e())).then((()=>{a.x.size(),d.U.stepSave()}))}),!1),["conns","database","table","column"].forEach((e=>{e=o.R.hump(e),b.p[`domFilter${e}`].addEventListener("input",(function(a){clearTimeout(a.target.si),a.target.si=setTimeout((()=>{var a=b.p[`gridOps${e}`];a&&a.api&&(a.api.setQuickFilter(this.value),d.U.stepSave())}),200)}))})),b.p.domTabGroupBody.addEventListener("sl-close",(async e=>{var a=e.target,t=b.p.domTabGroupBody.querySelector(`sl-tab-panel[name="${a.panel}"]`);if(a.active){var n=a.previousElementSibling||a.nextElementSibling;n.nodeName!="sl-tab-panel".toUpperCase()?b.p.domTabGroupBody.show(n.panel):d.U.cpInfo("reset")}a.remove(),t.remove(),u.W.tabNavFix(),delete u.W.tabKeys[a.panel],d.U.cpRemove(a.panel)})),b.p.domTabGroupBody.addEventListener("sl-tab-show",(function(e){e.target.classList.contains("nr-tab-group-body")&&d.U.cpInfo(e.detail.name),new Promise((e=>e())).then((()=>a.x.size()))}),!1),b.p.domOutput.firstElementChild.addEventListener("click",(function(){b.p.domOutputBody.style.display="block"==b.p.domOutputBody.style.display?"none":"block"}),!1),b.p.domOutputBody.addEventListener("mouseenter",(function(){clearTimeout(b.p.defer.outputAutoHide)}),!1),b.p.domOutputBody.addEventListener("mouseleave",(function(){b.p.defer.outputAutoHide=setTimeout((()=>{b.p.domOutputBody.style.display="none"}),6e3)}),!1),null==b.p.gridOpsOutput){var t=e.F.optionDef({rowData:[],defaultColDef:e.F.defaultColDef(),columnDefs:[{field:"content",flex:1}],headerHeight:0,rowGroupPanelShow:"never",onCellKeyDown:function(e){e.event.ctrlKey&&e.event.altKey&&"KeyM"==e.event.code&&(b.p.domGridOutput.classList.toggle("nrc-fullscreen"),a.x.size())},getContextMenuItems:()=>[{name:"清空",icon:b.p.iconSvg("trash"),action:function(){b.p.gridOpsOutput.rowData=[],b.p.gridOpsOutput.api.setRowData([])}},{name:s.t.lg.save,icon:b.p.iconGrid("save"),subMenu:["csvExport","excelExport"]},"copy","separator",{name:s.t.lg.fullScreenSwitch,icon:b.p.iconGrid("maximize"),shortcut:"Ctrl+Alt+M",action:function(){b.p.domGridOutput.classList.toggle("nrc-fullscreen")}}]});ndkView.createGrid("output",t),b.p.domFilterOutput.addEventListener("input",(function(){b.p.gridOpsOutput.api.setQuickFilter(this.value)}),!1)}if(null==b.p.gridOpsQueue){t=e.F.optionDef({rowData:[],defaultColDef:e.F.defaultColDef(),columnDefs:[{field:"cancel",cellRenderer:()=>b.p.emoji.loading,width:30},{field:"abortCtrl",flex:1,cellRenderer:e=>`${s.t.lg.inProgress} &nbsp; ${e.data.date}`}],headerHeight:0,rowGroupPanelShow:"never",onCellClicked:function(e){"cancel"==e.column.colId&&c.N.statusInfo.queueCancel(e.data)}});ndkView.createGrid("queue",t)}window.addEventListener("error",(function(e){if(console.debug(e),e.error){var a={message:e.error.message,stack:e.error.stack};m.$.errorsAdd(a),o.R.notify(s.t.lg.notify,{body:a.message,icon:"favicon.ico",tag:"error"})}})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{if("auto"==b.p.theme){let t=e.matches?"dark":"light";console.debug(`Change the theme to ${t}`),a.x.actionRun("theme","auto")}})),document.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),document.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files[0];a&&(b.p.fileObject=a,b.p.fileContent=null,["text","json"].filter((e=>a.type.includes(e))).length>0||[".sql",".md"].filter((e=>a.name.endsWith(e))).length>0?o.R.readFileContent(a,b.p.parameterConfig.readFileEncoding.value).then((a=>{b.p.fileContent=a,e.target.nodeName.includes("TEXTAREA")?(b.p.fileEditor=e.target,b.p.fileEditor.value=a):document.querySelectorAll(".monaco-editor").forEach((t=>{if(t.contains(e.target)){var n=monaco.editor.getModels().find((e=>e.uri==t.dataset.uri));n&&(b.p.fileEditor=n,n.setValue(a))}}))})).catch((e=>{o.R.output(e)})):o.R.output(s.t.lg.onlyTextFile))})),document.addEventListener("paste",(function(e){var a=e.clipboardData.getData("text/plain");b.p.pasteContent=a})),window.addEventListener("resize",(()=>a.x.size()),!1)}};window.addEventListener("DOMContentLoaded",(function(){e.F.lk(),m.$.init(window.localforage),m.$.stepsGet().then((e=>{e&&e.language&&(s.t.language=e.language),h.dom(),document.querySelectorAll("*").forEach((e=>{if(e.classList.value.startsWith("nr-")){var a="dom";e.classList[0].substring(3).split("-").forEach((e=>a+=e.substring(0,1).toUpperCase()+e.substring(1))),b.p[a]=e}})),a.x.actionRun("language",s.t.language),t.C.init(window.meRequire),h.event(),d.U.stepStart().then((()=>{b.p.domLoading.style.display="none",b.p.domMain.style.visibility="visible"}))}))}),!1);const f=__webpack_require__(120);Object.assign(window,{magicBytes:f,agg:e.F,ndkInit:h,ndkAction:a.x,ndkEditor:t.C,ndkExecute:n.Y,ndkFunction:o.R,ndkGenerateCode:r.l,ndkGenerateSQL:l.A,ndkGenerateDDL:i.w,ndkI18n:s.t,ndkRequest:c.N,ndkNoteSQL:p.A,ndkStep:d.U,ndkStorage:m.$,ndkTab:u.W,ndkVary:b.p,ndkView:g.P})})()})();